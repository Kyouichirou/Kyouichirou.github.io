<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="Lian个人博客-数据与思考">
<meta name="description" content="Make Thing Better and Simpler">
<meta name="theme-color" content="#000">
<title>Longley数据集-多重共线性问题与岭回归 | Lian</title>
<link rel="shortcut icon" href="/favicon.ico?v=1758516680740">
<link rel="stylesheet" href="/media/css/mist.css">
<link rel="stylesheet" href="/media/fonts/font-awesome.css">
<link
  href="//fonts.loli.net/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
  rel="stylesheet" type="text/css">

<link href="/media/hljs/styles/tomorrow-night.css"
  rel="stylesheet">

<link rel="stylesheet" href="/styles/main.css">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/media/js/jquery.js"></script>
<script src="/media/hljs/highlight.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.0/languages/vbnet.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.0/languages/vbscript-html.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.0/languages/vbscript.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.0/languages/sql.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/velocity/1.5.1/velocity.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/velocity/1.5.1/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.11.1/katex.min.css"
  integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ["\\(", "\\)"]],
      displayMath: [['$$', '$$'], ["\\[", "\\]"]]
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'a', 'annotation', 'annotation-xml'],
      ignoreHtmlClass: 'tex2jax_ignore|crayon-.*', // 'crayon-' 开头的类，属于Wordpress代码高亮库，这部分不需要处理，否则会导致显示不正确,这部分是正则式，多条之间用'|'分割
      processHtmlClass: 'tex2jax_process'
    },
    //禁用右键菜单	
    renderActions: {
      addMenu: [0, '', '']
    }
  };
</script>
<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>




<script>
  var _hmt = _hmt || [];
  (function () {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?19bd452dc174a21cc99fb66ddfcef0cc";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>



  <meta name="description" content="Longley数据集-多重共线性问题与岭回归" />
  <meta name="keywords" content="spss,scipy,math,sklearn,priority" />
</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    
<div class="mist">
  <header class="header bg-color ">
    <div class="blog-header box-shadow-wrapper  " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="">
              <span class="logo-line-before">
                <i class=""></i>
              </span>
              <span class="main-title">Lian</span>
              <span class="logo-line-after">
                <i class=""></i>
              </span>
            </a>  
          
        </div>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/" target="_self">
                  <i class="fa fa-globe"></i> Home
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/archives" target="_self">
                  <i class="fa fa-globe"></i> Archives
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/tags" target="_self">
                  <i class="fa fa-globe"></i> Tags
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="https://Kyouichirou.github.io/post/about-me" target="_self">
                  <i class="fa fa-globe"></i> About
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends/" target="_self">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </li>
            
          
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout mist bg-color">
      <div class="section-layout-wrapper">
        

<div class="sidebar">
  
    <div class="sidebar-box box-shadow-wrapper  right-motion" id="sidebar">
      
        <div class="post-list-sidebar">
          <div class="sidebar-title">
            <span id="tocSideBar" class="sidebar-title-item sidebar-title-active language" data-lan="index">文章目录</span>
            <span id="metaSideBar" class="sidebar-title-item language" data-lan="preview">站点概览</span>
          </div>
        </div>
      
      <div class="sidebar-body mist" id="sidebar_body">
        
          
            <div class="post-side-meta" id="post_side_meta">
              
<div class="sidebar-wrapper box-shadow-wrapper ">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="/images/avatar.png"/>
    <p class="site-author-name">Lian</p>
    
    <div class="site-description right-motion">
      
      
      
        <p>make thing better and simpler.</p>
      
      
    </div>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">103</span>
        <span class="site-item-stat-name language" data-lan="article">文章</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">64</span>
        <span class="site-item-stat-name language" data-lan="tag">标签</span>
      </a>
    </div>
  </div>
  
  



</div>
            </div>
            <div class="post-toc sidebar-body-active" id="post_toc" style="opacity: 1;">
              <div class="toc-box right-motion">
  <div class="toc-wrapper  auto"
    id="toc_wrapper">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%B8%80-%E5%89%8D%E8%A8%80">一. 前言</a>
<ul>
<li><a href="#11-%E5%A4%9A%E9%87%8D%E5%85%B1%E7%BA%BF%E6%80%A7">1.1 多重共线性</a>
<ul>
<li><a href="#111-%E4%BA%A7%E7%94%9F%E7%9A%84%E5%8E%9F%E5%9B%A0">1.1.1 产生的原因</a></li>
<li><a href="#112-%E5%BD%B1%E5%93%8D">1.1.2 影响</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E4%BA%8C-%E6%8E%A2%E7%A9%B6">二. 探究</a>
<ul>
<li><a href="#21-spss%E5%88%86%E6%9E%90">2.1 SPSS分析</a></li>
</ul>
</li>
<li><a href="#%E4%B8%89-%E8%A7%A3%E5%86%B3">三. 解决</a>
<ul>
<li><a href="#31-spss%E6%AD%A5%E8%BF%9B">3.1 spss步进</a></li>
<li><a href="#32-%E5%B2%AD%E5%9B%9E%E5%BD%92">3.2 岭回归</a></li>
<li><a href="#33-spss%E7%9A%84%E9%97%AE%E9%A2%98">3.3 spss的问题</a></li>
<li><a href="#34-python%E7%9A%84%E5%A4%84%E7%90%86">3.4 python的处理</a>
<ul>
<li><a href="#341-%E7%9F%A9%E9%98%B5">3.4.1 矩阵</a></li>
<li><a href="#342-sklearn">3.4.2 sklearn</a>
<ul>
<li><a href="#3421-%CE%B1-%E7%9A%84%E7%A1%AE%E5%AE%9A">3.4.2.1 α 的确定</a></li>
<li><a href="#3422-ridge%E5%8F%82%E6%95%B0">3.4.2.2 Ridge参数</a></li>
</ul>
</li>
<li><a href="#343-%E7%9B%B8%E5%85%B3%E6%80%A7%E7%9F%A9%E9%98%B5">3.4.3 相关性矩阵</a></li>
<li><a href="#344-vif%E8%AE%A1%E7%AE%97">3.4.4 VIF计算</a></li>
<li><a href="#345-%E5%B2%AD%E8%BF%B9%E5%9B%BE">3.4.5 岭迹图</a></li>
<li><a href="#346-%E8%AE%A1%E7%AE%97%E7%9A%84%E5%B7%AE%E5%BC%82">3.4.6 计算的差异</a>
<ul>
<li><a href="#3461-rigde_regression">3.4.6.1 rigde_regression</a></li>
<li><a href="#3462-statsmodels">3.4.6.2 statsmodels</a></li>
<li><a href="#3463-svd">3.4.6.3 svd</a></li>
</ul>
</li>
<li><a href="#347-%E6%BA%90%E7%A0%81%E7%9A%84%E8%A7%A3%E8%AF%BB">3.4.7 源码的解读</a>
<ul>
<li><a href="#3471-%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83%E5%8C%96%E5%A4%84%E7%90%86">3.4.7.1 数据中心化处理</a></li>
<li><a href="#3472-%E9%AA%8C%E8%AF%81">3.4.7.2 验证</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%9B%9B-%E6%8B%93%E5%B1%95%E6%80%9D%E8%80%83">四. 拓展思考</a>
<ul>
<li><a href="#41-%E6%A0%87%E5%87%86%E5%8C%96%E5%9B%9E%E5%BD%92%E7%B3%BB%E6%95%B0">4.1 标准化回归系数</a></li>
<li><a href="#42-%E6%A8%A1%E5%9E%8B%E5%8F%AF%E8%A7%A3%E9%87%8A%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7">4.2 模型可解释的重要性</a></li>
<li><a href="#43-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%9B%B4%E6%8E%A5%E9%87%87%E7%94%A8%E7%9F%A9%E9%98%B5%E5%85%AC%E5%BC%8F%E6%B1%82%E8%A7%A3">4.3 为什么不直接采用矩阵公式求解</a></li>
</ul>
</li>
<li><a href="#%E4%BA%94-%E5%8F%82%E8%80%83">五. 参考</a></li>
</ul>
</li>
</ul>

  </div>
</div>

<script>

  let lastTop = 0, lList = [], hList = [], postBody, lastIndex = -1;
  let active = 'active-show', activeClass = 'active-current';
  let tocWrapper = document.querySelector('#toc_wrapper');
  let tocContent = tocWrapper.children[0];
  let autoNumber = tocWrapper && tocWrapper.classList.contains('auto-number');

  function addTocNumber(elem, deep) {
    if (!elem) {
      return;
    }
    let prop = elem.__proto__;

    if (prop === HTMLUListElement.prototype) {
      for (let i = 0; i < elem.children.length; i++) {
        addTocNumber(elem.children[i], deep + (i + 1) + '.');
      }
    } else if (prop === HTMLLIElement.prototype) {
      // 保存li元素
      if (elem.children[0] && elem.children[0].__proto__ === HTMLAnchorElement.prototype) {
        lList.push(elem);
      }
      for (let i = 0; i < elem.children.length; i++) {
        let cur = elem.children[i];
        if (cur.__proto__ === HTMLAnchorElement.prototype) {
          if (autoNumber) {
            cur.text = deep + ' ' + cur.text;
          }
        } else if (cur.__proto__ === HTMLUListElement.prototype) {
          addTocNumber(cur, deep);
        }
      }
    }
  }

  function removeParentActiveClass() {
    let parents = tocContent.querySelectorAll('.' + active)
    parents.forEach(function (elem) {
      elem.classList.remove(active);
    });
  }

  function addActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.add(activeClass);
    }
  }

  function removeActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.remove(activeClass);
    }
  }

  function addActiveLiElemment(elem, parent) {
    if (!elem || elem === parent) {
      return;
    } else {
      if (elem.__proto__ === HTMLLIElement.prototype) {
        elem.classList.add(active);
      }
      addActiveLiElemment(elem.parentElement, parent);
    }
  }

  function showToc() {
    if (tocWrapper) {
      postBody = document.querySelector('#post_body');
      for (let i = 0; i < postBody.children.length; i++) {
        if (postBody.children[i].__proto__ === HTMLHeadingElement.prototype) {
          hList.push(postBody.children[i]);
        }
      }
      if (tocWrapper.classList.contains('compress')) {
        tocContent.classList.add('closed');
      } else if (tocWrapper.classList.contains('no_compress')) {
        tocContent.classList.add('expanded');
      } else {
        if (hList.length > 10) {
          active = 'active-hidden'
          tocContent.classList.add('closed');
        } else {
          tocContent.classList.add('expanded');
        }
      }
    }
  }

  (function () {
    // 处理不是从#一级标题开始目录
    if (tocContent.children.length === 1 && tocContent.children[0].__proto__ === HTMLLIElement.prototype) {
      let con = tocContent.children[0].children[0];
      tocContent.innerHTML = con.innerHTML;
    }
    let markdownItTOC = document.querySelector('.markdownIt-TOC');
    let innerHeight = window.innerHeight;
    markdownItTOC.style = `max-height: ${innerHeight - 80 > 0 ? innerHeight - 80 : innerHeight}px`
    addTocNumber(tocContent, '');
  })();

  document.addEventListener('scroll', function (e) {
    if (lList.length <= 0) {
      return;
    }
    let scrollTop = document.scrollingElement.scrollTop + 10;
    let dir;

    if (lastTop - scrollTop > 0) {
      dir = 'up';
    } else {
      dir = 'down';
    }

    lastTop = scrollTop;
    if (scrollTop <= 0) {
      if (lastIndex >= 0 && lastIndex < hList.length) {
        lList[lastIndex].classList.remove(activeClass);
      }
      return;
    }

    let current = 0, hasFind = false;
    for (let i = 0; i < hList.length; i++) {
      if (hList[i].offsetTop > scrollTop) {
        current = i;
        hasFind = true;
        break;
      }
    }
    if (!hasFind && scrollTop > lList[lList.length - 1].offsetTop) {
      current = hList.length - 1;
    } else {
      current--;
    }
    if (dir === 'down') {
      if (current > lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex)
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    } else {
      if (current < lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex);
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    }
  });


  window.addEventListener('load', function () {
    showToc();
    document.querySelector('#sidebar').style = 'display: block;';
    tocWrapper.classList.add('toc-active');
    setTimeout(function () {
      if ("createEvent" in document) {
        let evt = document.createEvent("HTMLEvents");
        evt.initEvent("scroll", false, true);
        document.dispatchEvent(evt);
      }
      else {
        document.fireEvent("scroll");
      }
    }, 500)
  })

</script>
            </div>
          
        
      </div>
    </div>
  
</div>
<script>
  const SIDEBAR_TITLE_ACTIVE = 'sidebar-title-active';
  const SIDEBAR_BODY_ACTIVE = 'sidebar-body-active';
  const SLIDE_UP_IN = 'slide-up-in';

  let sidebar = document.querySelector('#sidebar'),
  tocSideBar = document.querySelector('#tocSideBar'),
  metaSideBar = document.querySelector('#metaSideBar'),
  postToc = document.querySelector('#post_toc'),
  postSiteMeta = document.querySelector('#post_side_meta'),
  sidebarTitle = document.querySelector('.sidebar-title'),
  sidebarBody = document.querySelector('#sidebar_body');

  tocSideBar && tocSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  metaSideBar && metaSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  function toggleSidebar(e) {
    let currentTitle = document.querySelector("."+SIDEBAR_TITLE_ACTIVE);
    if (currentTitle == e.srcElement) {
      return ;
    }
    let current, showElement, hideElement;
    if (e.srcElement == metaSideBar) {
      showElement = postSiteMeta;
      hideElement = postToc;
    } else if (e.srcElement == tocSideBar){
      showElement = postToc;
      hideElement = postSiteMeta;
    }
    currentTitle.classList.remove(SIDEBAR_TITLE_ACTIVE);
    e.srcElement.classList.add(SIDEBAR_TITLE_ACTIVE);

    jQuery.Velocity(hideElement, 'stop');
    jQuery.Velocity(hideElement, 'transition.slideUpOut', {
      display: 'none',
      duration: 200,
      complete: function () {
        jQuery.Velocity(showElement, 'transition.slideDownIn', {
          duration: 200
        });
      }
    })
    hideElement.classList.remove(SIDEBAR_BODY_ACTIVE);
    showElement.classList.add(SIDEBAR_BODY_ACTIVE);
  }

  postToc && postToc.addEventListener('transitionend', function() {
    this.classList.remove(SLIDE_UP_IN);
  });

  if (sidebarBody) {
    if (sidebarBody.classList.contains('pisces') || sidebarBody.classList.contains('gemini')) {
      let hasFix = false;
      let scrollEl = document.querySelector('.main-continer');
      let limitTop = document.querySelector('#nav_ul').children.length * 42 + 162;
      window.addEventListener('scroll', function(e) {
        if (document.scrollingElement.scrollTop >= limitTop) {
          if (!hasFix) {
            sidebar.classList.add('sidebar-fixed');
            hasFix = true;
          }
        } else {
          if (hasFix) {
            sidebar.classList.remove('sidebar-fixed');
            hasFix = false;
          }
        }
      });
    }
  }
  
</script>
        <div class="section-box box-shadow-wrapper">
          <div class="section bg-color post post-page">
            <section class="post-header">
  <h1 class="post-title">
    <a class="post-title-link" href="https://Kyouichirou.github.io/post/longley-shu-ju-ji-duo-chong-gong-xian-xing-wen-ti-yu-ling-hui-gui/"> Longley数据集-多重共线性问题与岭回归 </a>
  </h1>
  <div class="post-meta">
    
    <span class="meta-item pc-show">
      <i class="fa fa-calendar-o"></i>
      <span class="language" data-lan="publish">发布于</span>
      <span class="publish-time" data-t="2023-05-11 11:00:54">2023-05-11</span>
      <span class="post-meta-divider pc-show">|</span>
    </span>
    
    <span class="meta-item">
      <i class="fa fa-folder-o"></i>
      <span class="pc-show language" data-lan="category-in">标签:</span>
       
      <a href="https://Kyouichirou.github.io/tag/Q2P6FXAzPd/"> <span>spss</span> </a>、   
      <a href="https://Kyouichirou.github.io/tag/89XKfdJfIJ/"> <span>scipy</span> </a>、   
      <a href="https://Kyouichirou.github.io/tag/bxmmKSW1O/"> <span>math</span> </a>、   
      <a href="https://Kyouichirou.github.io/tag/XPEQV0L0x/"> <span>sklearn</span> </a>、   
      <a href="https://Kyouichirou.github.io/tag/7svOER7Ka/">
        <span>priority</span>
      </a>
       
    </span>
    <span class="post-meta-divider">|</span>
    
    <span class="meta-item">
      <i class="fa fa-clock-o"></i>
      <span
        >65<span class="language" data-lan="minute"
          >分钟</span
        ></span
      >
    </span>
    <span class="meta-item">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-file-word-o"></i>
      <span
        >13287<span class="pc-show language" data-lan="words"
          >字数</span
        ></span
      >
    </span>
    
  </div>
</section>

            <div class="post-body next-md-body" id="post_body">
              <h2 id="一-前言">一. 前言</h2>
<p>在<a href="https://kyouichirou.github.io/post/yi-yuan-xian-xing-hui-gui-xiang-jie/">一元线性回归详解 | Lian (kyouichirou.github.io)</a>中提及了多重共线性(<code>Multicollinearity</code>)的问题, 由于是一元线性回归, 并未对该问题做深入的探讨.</p>
<p>下面以<code>Longley</code>数据集为例, 分别以spss, python对相关问题展开讨论.</p>
<p>数据源见: https://www.itl.nist.gov/div898/strd/lls/data/LINKS/DATA/Longley.dat</p>
<!--more-->
<pre><code class="language-bash">NIST/ITL StRD
Dataset Name:  Longley (Longley.dat)

File Format:   ASCII
               Certified Values  (lines 31 to 51)
               Data              (lines 61 to 76)

Procedure:     Linear Least Squares Regression

Reference:     Longley, J. W. (1967).
               An Appraisal of Least Squares Programs for the
               Electronic Computer from the Viewpoint of the User.
               Journal of the American Statistical Association, 62, pp. 819-841.

Data:          1 Response Variable (y)
               6 Predictor Variable (x)
               16 Observations
               Higher Level of Difficulty
               Observed Data

Model:         Polynomial Class
               7 Parameters (B0,B1,...,B7)

               y = B0 + B1*x1 + B2*x2 + B3*x3 + B4*x4 + B5*x5 + B6*x6 + e

               Certified Regression Statistics

                                          Standard Deviation
     Parameter         Estimate              of Estimate

        B0       -3482258.63459582         890420.383607373
        B1        15.0618722713733         84.9149257747669
        B2       -0.358191792925910E-01    0.334910077722432E-01
        B3       -2.02022980381683         0.488399681651699
        B4       -1.03322686717359         0.214274163161675
        B5       -0.511041056535807E-01    0.226073200069370
        B6        1829.15146461355         455.478499142212

     Residual
     Standard Deviation   304.854073561965

     R-Squared            0.995479004577296

               Certified Analysis of Variance Table

Source of Degrees of     Sums of             Mean
Variation  Freedom       Squares            Squares          F Statistic

Regression    6      184172401.944494   30695400.3240823   330.285339234588
Residual      9      836424.055505915   92936.0061673238

Data:     y       x1      x2      x3       x4       x5     x6
        60323    83.0   234289   2356     1590    107608  1947
        61122    88.5   259426   2325     1456    108632  1948
        60171    88.2   258054   3682     1616    109773  1949
        61187    89.5   284599   3351     1650    110929  1950
        63221    96.2   328975   2099     3099    112075  1951
        63639    98.1   346999   1932     3594    113270  1952
        64989    99.0   365385   1870     3547    115094  1953
        63761   100.0   363112   3578     3350    116219  1954
        66019   101.2   397469   2904     3048    117388  1955
        67857   104.6   419180   2822     2857    118734  1956
        68169   108.4   442769   2936     2798    120445  1957
        66513   110.8   444546   4681     2637    121950  1958
        68655   112.6   482704   3813     2552    123366  1959
        69564   114.2   502601   3931     2514    125368  1960
        69331   115.7   518173   4806     2572    127852  1961
        70551   116.9   554894   4007     2827    130081  1962
</code></pre>
<p>(<em>注意, GitHub上一些名为longley的数据集和上述的内容有所差异, 大部分对其中的若干列数据进行了修改</em>.)</p>
<h3 id="11-多重共线性">1.1 多重共线性</h3>
<blockquote>
<ul>
<li><strong>Structural multicollinearity</strong> is a mathematical artifact caused by creating new predictors from other predictors - such as creating the predictor <mjx-container class="MathJax CtxtMenu_Attached_0" jax="SVG" tabindex="0" ctxtmenu_counter="0" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.282ex" height="1.912ex" role="img" focusable="false" viewBox="0 -833.9 1008.6 844.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.025ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><use data-c="1D465" xlink:href="#MJX-TEX-I-1D465"></use></g><g data-mml-node="TeXAtom" transform="translate(605,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-TEX-N-32"></use></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>x</mi><mrow data-mjx-texclass="ORD"><mn>2</mn></mrow></msup></math></mjx-assistive-mml></mjx-container> from the predictor <em>x</em>.</li>
<li><strong>Data-based multicollinearity</strong>, on the other hand, is a result of a poorly designed experiment, reliance on purely observational data, or the inability to manipulate the system on which the data are collected.</li>
</ul>
</blockquote>
<p>在<a href="https://kyouichirou.github.io/post/yi-yuan-xian-xing-hui-gui-xiang-jie/">一元线性回归详解 | Lian (kyouichirou.github.io)</a>, <a href="https://kyouichirou.github.io/post/ji-qi-xue-xi-ti-du-xia-jiang-de-jian-dan-li-jie/">机器学习-梯度下降的简单理解 | Lian (kyouichirou.github.io)</a>, 对一元线性回归做了详解.</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">假</mi><mi mathvariant="normal">设</mi><mi mathvariant="normal">存</mi><mi mathvariant="normal">在</mi><mi mathvariant="normal">线</mi><mi mathvariant="normal">性</mi><mi mathvariant="normal">回</mi><mi mathvariant="normal">归</mi><mi mathvariant="normal">模</mi><mi mathvariant="normal">型</mi><mo>:</mo><mspace linebreak="newline"></mspace><mi>y</mi><mo>=</mo><msub><mi>β</mi><mn>0</mn></msub><mo>+</mo><msub><mi>β</mi><mn>1</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>β</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><msub><mi>β</mi><mn>3</mn></msub><msub><mi>x</mi><mn>3</mn></msub><mo>+</mo><msub><mi>β</mi><mn>4</mn></msub><msub><mi>x</mi><mn>4</mn></msub><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><msub><mi>β</mi><mi>p</mi></msub><msub><mi>x</mi><mi>p</mi></msub><mo>+</mo><mi>ϵ</mi><mo separator="true">;</mo><mtext>  </mtext><mtext>矩阵的形式为:</mtext><mtext>  </mtext><mi>y</mi><mo>=</mo><mi>X</mi><mi>β</mi><mo>+</mo><mi>ϵ</mi><mspace linebreak="newline"></mspace><msup><mover accent="true"><mi>β</mi><mo>^</mo></mover><mo>∗</mo></msup><mo>=</mo><mo>(</mo><msup><mi>X</mi><mi>T</mi></msup><mi>X</mi><msup><mo>)</mo><mrow><mo>−</mo><mn>1</mn></mrow></msup><msup><mi>X</mi><mi>T</mi></msup><mi>y</mi></mrow><annotation encoding="application/x-tex">假设存在线性回归模型:\\
y = \beta_0 + \beta_1x_1 +  \beta_2x_2 +  \beta_3x_3+  \beta_4x_4 + ...+  \beta_px_p + \epsilon;\;\text{矩阵的形式为:}\;y = X\beta + \epsilon\\

\hat{\beta}^* = (X^TX)^{-1}X^Ty
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord cjk_fallback">假</span><span class="mord cjk_fallback">设</span><span class="mord cjk_fallback">存</span><span class="mord cjk_fallback">在</span><span class="mord cjk_fallback">线</span><span class="mord cjk_fallback">性</span><span class="mord cjk_fallback">回</span><span class="mord cjk_fallback">归</span><span class="mord cjk_fallback">模</span><span class="mord cjk_fallback">型</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϵ</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord text"><span class="mord cjk_fallback">矩阵的形式为</span><span class="mord">:</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">ϵ</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.1523199999999998em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9578799999999998em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.738696em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span></span></p>
<figure data-type="image" tabindex="1"><a href="https://imgse.com/i/p9atR0I"><img src="https://s1.ax1x.com/2023/05/06/p9atR0I.png" alt="p9atR0I.png" loading="lazy"></a></figure>
<h4 id="111-产生的原因">1.1.1 产生的原因</h4>
<figure data-type="image" tabindex="2"><a href="https://imgse.com/i/p9UL0PI"><img src="https://s1.ax1x.com/2023/05/06/p9UL0PI.png" alt="p9UL0PI.png" loading="lazy"></a></figure>
<p><em>(图: 何晓群, 应用回归分析)</em></p>
<blockquote>
<p>多重共线性问题就是指一个解释变量的变化引起另一个解释变量地变化.</p>
<p>原本自变量应该是各自独立的, 根据回归分析结果, 能得知哪些因素对因变量Y有显著影响, 哪些没有影响. 如果各个自变量x之间有很强的线性关系, 就无法固定其他变量, 也就找不到x和y之间真实的关系了.</p>
<p>除此以外, 多重共线性的原因还可能包括:</p>
<p>数据不足. 在某些情况下, 收集更多数据可以解决共线性问题.<br>
错误地使用虚拟变量. (比如, 同时将男, 女两个虚拟变量都放入模型, 此时必定出现共线性, 称为完全共线性)</p>
<p>https://zhuanlan.zhihu.com/p/72722146</p>
</blockquote>
<blockquote>
<p>For example, suppose you run a regression analysis using the <a href="https://www.statology.org/explanatory-response-variables/">response variable</a> <em>max vertical jump</em> and the following predictor variables:</p>
<ul>
<li>height</li>
<li>shoe size</li>
<li>hours spent practicing per day</li>
</ul>
<p>In this case, <em>height</em> and <em>shoe size</em> are likely to be highly correlated with each other since taller people tend to have larger shoe sizes. This means that multicollinearity is likely to be a problem in this regression.</p>
</blockquote>
<h4 id="112-影响">1.1.2 影响</h4>
<figure data-type="image" tabindex="3"><a href="https://imgse.com/i/p9arJ10"><img src="https://s1.ax1x.com/2023/05/06/p9arJ10.png" alt="p9arJ10.png" loading="lazy"></a></figure>
<p>(<em>图: 线性回归分析导论, 第五版, 道格拉斯</em>)</p>
<blockquote>
<ul>
<li>The coefficient estimates can swing wildly based on which other independent variables are in the model. The coefficients become very sensitive to small changes in the model.</li>
<li>Multicollinearity reduces the precision of the estimated coefficients, which weakens the statistical power of your regression model. You might not be able to trust the p-values to identify independent variables that are statistically significant.</li>
</ul>
</blockquote>
<blockquote>
<p>( 1) 完全共线性下<a href="https://baike.baidu.com/item/%E5%8F%82%E6%95%B0%E4%BC%B0%E8%AE%A1?fromModule=lemma_inlink">参数估计</a>量不存在</p>
<p>( 2) 近似共线性下OLS估计量非有效</p>
<p>多重共线性使参数估计值的方差增大 1/(1-r2)为<a href="https://baike.baidu.com/item/%E6%96%B9%E5%B7%AE%E8%86%A8%E8%83%80%E5%9B%A0%E5%AD%90?fromModule=lemma_inlink">方差膨胀因子</a>(Variance Inflation Factor, VIF)如果方差膨胀因子值越大 说明共线性越强. 相反 因为 容许度是方差膨胀因子的倒数 所以 容许度越小 共线性越强. 可以这样记忆: 容许度代表容许 也就是许可 如果 值越小 代表在数值上越不容许 就是越小 越不要. 而共线性是一个负面指标 在分析中都是不希望它出现 将共线性和容许度联系在一起 容许度越小 越不要 实际情况越不好 共线性这个&quot; 坏蛋&quot; 越强. 进一步 方差膨胀因子因为是容许度倒数 所以反过来.</p>
<p>总之就是找容易记忆的方法.</p>
<p>( 3) 参数估计量经济含义不合理</p>
<p>( 4) 变量的<a href="https://baike.baidu.com/item/%E6%98%BE%E8%91%97%E6%80%A7%E6%A3%80%E9%AA%8C/8788495?fromModule=lemma_inlink">显著性检验</a>失去意义 可能将重要的解释变量排除在模型之外</p>
<p>( 5) 模型的预测功能失效. 变大的<a href="https://baike.baidu.com/item/%E6%96%B9%E5%B7%AE?fromModule=lemma_inlink">方差</a>容易使<a href="https://baike.baidu.com/item/%E5%8C%BA%E9%97%B4?fromModule=lemma_inlink">区间</a>预测的&quot; 区间&quot; 变大 使预测失去意义.</p>
<p>需要注意: 即使出现较高程度的多重共线性 OLS估计量仍具有线性性等良好的统计性质. 但是OLS法在统计推断上无法给出真正有用的信息.</p>
<p>https://baike.baidu.com/item/%E5%A4%9A%E9%87%8D%E5%85%B1%E7%BA%BF%E6%80%A7#3</p>
</blockquote>
<ul>
<li><a href="https://www.sciencedirect.com/topics/mathematics/multicollinearity-problem">Multicollinearity Problem - an overview | ScienceDirect Topics</a></li>
</ul>
<h2 id="二-探究">二. 探究</h2>
<p><code>longley</code>数据集并未在<code>Python sklearn</code>中预置, 研究了一下<code>statsmodels</code>, 发现预置了这个数据集.</p>
<p><em>注意一些网络检索到的数据集虽然名为<code>longley</code>, 但是其中的内容被修改过.</em></p>
<pre><code class="language-python">import statsmodels.api as sm

data = sm.datasets.longley.load_pandas()

# 将数据导出
data.data.to_csv('longley_data_set.csv', index=False)
</code></pre>
<table>
<thead>
<tr>
<th>TOTEMP</th>
<th>GNPDEFL</th>
<th>GNP</th>
<th>UNEMP</th>
<th>ARMED</th>
<th>POP</th>
<th>YEAR</th>
</tr>
</thead>
<tbody>
<tr>
<td>60323</td>
<td>83</td>
<td>234289</td>
<td>2356</td>
<td>1590</td>
<td>107608</td>
<td>1947</td>
</tr>
<tr>
<td>61122</td>
<td>88.5</td>
<td>259426</td>
<td>2325</td>
<td>1456</td>
<td>108632</td>
<td>1948</td>
</tr>
<tr>
<td>60171</td>
<td>88.2</td>
<td>258054</td>
<td>3682</td>
<td>1616</td>
<td>109773</td>
<td>1949</td>
</tr>
<tr>
<td>61187</td>
<td>89.5</td>
<td>284599</td>
<td>3351</td>
<td>1650</td>
<td>110929</td>
<td>1950</td>
</tr>
<tr>
<td>63221</td>
<td>96.2</td>
<td>328975</td>
<td>2099</td>
<td>3099</td>
<td>112075</td>
<td>1951</td>
</tr>
<tr>
<td>63639</td>
<td>98.1</td>
<td>346999</td>
<td>1932</td>
<td>3594</td>
<td>113270</td>
<td>1952</td>
</tr>
<tr>
<td>64989</td>
<td>99</td>
<td>365385</td>
<td>1870</td>
<td>3547</td>
<td>115094</td>
<td>1953</td>
</tr>
<tr>
<td>63761</td>
<td>100</td>
<td>363112</td>
<td>3578</td>
<td>3350</td>
<td>116219</td>
<td>1954</td>
</tr>
<tr>
<td>66019</td>
<td>101.2</td>
<td>397469</td>
<td>2904</td>
<td>3048</td>
<td>117388</td>
<td>1955</td>
</tr>
<tr>
<td>67857</td>
<td>104.6</td>
<td>419180</td>
<td>2822</td>
<td>2857</td>
<td>118734</td>
<td>1956</td>
</tr>
<tr>
<td>68169</td>
<td>108.4</td>
<td>442769</td>
<td>2936</td>
<td>2798</td>
<td>120445</td>
<td>1957</td>
</tr>
<tr>
<td>66513</td>
<td>110.8</td>
<td>444546</td>
<td>4681</td>
<td>2637</td>
<td>121950</td>
<td>1958</td>
</tr>
<tr>
<td>68655</td>
<td>112.6</td>
<td>482704</td>
<td>3813</td>
<td>2552</td>
<td>123366</td>
<td>1959</td>
</tr>
<tr>
<td>69564</td>
<td>114.2</td>
<td>502601</td>
<td>3931</td>
<td>2514</td>
<td>125368</td>
<td>1960</td>
</tr>
<tr>
<td>69331</td>
<td>115.7</td>
<td>518173</td>
<td>4806</td>
<td>2572</td>
<td>127852</td>
<td>1961</td>
</tr>
<tr>
<td>70551</td>
<td>116.9</td>
<td>554894</td>
<td>4007</td>
<td>2827</td>
<td>130081</td>
<td>1962</td>
</tr>
</tbody>
</table>
<h3 id="21-spss分析">2.1 SPSS分析</h3>
<p>将上述的数据导入spss(<em>注意excel生成的csv, 带有bom, spss直接导入也会出错</em>), 选择回归 -&gt; 线性.</p>
<figure data-type="image" tabindex="4"><a href="https://imgse.com/i/p9UkSoV"><img src="https://s1.ax1x.com/2023/05/05/p9UkSoV.png" alt="p9UkSoV.png" loading="lazy"></a></figure>
<table summary="Correlations, 表, 1 个级别的列标题和 2 个级别的行标题, 包含 9 列 23 行的表" tabindex="0" role="grid" style="width: 684px; margin-bottom: 0px;" class="WebReportBlue PivotTable ui-selectable" aria-label="Correlations" data-lookname="WebReportBlue" data-rowlabelwidth="2" data-collabelheight="1" data-numrows="21" data-numcols="7" data-rowlabels="Corner" data-decimal-char="." data-col-labels="TOTEMP;GNPDEFL;GNP;UNEMP;ARMED;POP;YEAR" data-row-labels="Pearson Correlation TOTEMP; GNPDEFL; GNP; UNEMP; ARMED; POP; YEAR;Sig. (1-tailed) TOTEMP; GNPDEFL; GNP; UNEMP; ARMED; POP; YEAR;N TOTEMP; GNPDEFL; GNP; UNEMP; ARMED; POP; YEAR" data-layer-dimension="" data-column-dimension="Variables2;" data-row-dimension="Statistics;Variables;" data-maxcolwidth="72">
<caption class="title ui-selectee" style="width:684px">Correlations<span class="details ui-selectee"></span></caption>
<tbody class="PivotBody defaultLayer innerFrameBd ui-selectee" style="display: table;">
<tr class="ui-selectee" style="">
<td class="cornerLabels ui-selectee" data-rc="0_0" tabindex="-1" colspan="2">&nbsp;</td>
<td class="columnLabels dataAreaLeft vCC role3 ui-selectee" data-rc="0_2" tabindex="-1">TOTEMP</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_3" tabindex="-1">GNPDEFL</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_4" tabindex="-1">GNP</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_5" tabindex="-1">UNEMP</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_6" tabindex="-1">ARMED</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_7" tabindex="-1">POP</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_8" tabindex="-1">YEAR</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels dataAreaTop role3 ui-selectee" data-rc="1_0" tabindex="-1" rowspan="7">Pearson Correlation</td>
<td class="rowLabels dataAreaTop vCR role3 ui-selectee" data-rc="1_1" tabindex="-1">TOTEMP</td>
<td class="e dataAreaTop dataAreaLeft vCC ui-selectee" data-rc="1_2" tabindex="-1" data-d="3">1.000</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_3" tabindex="-1" data-f="9708985250610558" data-d="3" data-i="0">.971</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_4" tabindex="-1" data-f="9835516111796694" data-d="3" data-i="0">.984</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_5" tabindex="-1" data-f="5024980838759942" data-d="3" data-i="0">.502</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_6" tabindex="-1" data-f="45730739997648173" data-d="3">.457</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_7" tabindex="-1" data-f="9603905715943756" data-d="3" data-i="0">.960</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_8" tabindex="-1" data-f="9713294591921187" data-d="3" data-i="0">.971</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="2_1" tabindex="-1">GNPDEFL</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="2_2" tabindex="-1" data-f="9708985250610558" data-d="3" data-i="0">.971</td>
<td class="o hCR vCC ui-selectee" data-rc="2_3" tabindex="-1" data-d="3">1.000</td>
<td class="o hCR vCC ui-selectee" data-rc="2_4" tabindex="-1" data-f="9915891780247822" data-d="3" data-i="0">.992</td>
<td class="o hCR vCC ui-selectee" data-rc="2_5" tabindex="-1" data-f="6206333925590964" data-d="3" data-i="0">.621</td>
<td class="o hCR vCC ui-selectee" data-rc="2_6" tabindex="-1" data-f="46474418760067454" data-d="3">.465</td>
<td class="o hCR vCC ui-selectee" data-rc="2_7" tabindex="-1" data-f="9791634329774979" data-d="3" data-i="0">.979</td>
<td class="o hCR vCC ui-selectee" data-rc="2_8" tabindex="-1" data-f="9911491900672054" data-d="3" data-i="0">.991</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="3_1" tabindex="-1">GNP</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="3_2" tabindex="-1" data-f="9835516111796694" data-d="3" data-i="0">.984</td>
<td class="e hCR vCC ui-selectee" data-rc="3_3" tabindex="-1" data-f="9915891780247822" data-d="3" data-i="0">.992</td>
<td class="e hCR vCC ui-selectee" data-rc="3_4" tabindex="-1" data-d="3">1.000</td>
<td class="e hCR vCC ui-selectee" data-rc="3_5" tabindex="-1" data-f="6042609398895579" data-d="3" data-i="0">.604</td>
<td class="e hCR vCC ui-selectee" data-rc="3_6" tabindex="-1" data-f="4464367918926264" data-d="3">.446</td>
<td class="e hCR vCC ui-selectee" data-rc="3_7" tabindex="-1" data-f="9910900694584777" data-d="3" data-i="0">.991</td>
<td class="e hCR vCC ui-selectee" data-rc="3_8" tabindex="-1" data-f="9952734837647847" data-d="3" data-i="0">.995</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="4_1" tabindex="-1">UNEMP</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="4_2" tabindex="-1" data-f="5024980838759942" data-d="3" data-i="0">.502</td>
<td class="o hCR vCC ui-selectee" data-rc="4_3" tabindex="-1" data-f="6206333925590964" data-d="3" data-i="0">.621</td>
<td class="o hCR vCC ui-selectee" data-rc="4_4" tabindex="-1" data-f="6042609398895579" data-d="3" data-i="0">.604</td>
<td class="o hCR vCC ui-selectee" data-rc="4_5" tabindex="-1" data-d="3">1.000</td>
<td class="o hCR vCC ui-selectee" data-rc="4_6" tabindex="-1" data-f="17742062950187834" data-d="3" data-i="-">-.177</td>
<td class="o hCR vCC ui-selectee" data-rc="4_7" tabindex="-1" data-f="686551516365312" data-d="3" data-i="0">.687</td>
<td class="o hCR vCC ui-selectee" data-rc="4_8" tabindex="-1" data-f="6682566045621746" data-d="3" data-i="0">.668</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="5_1" tabindex="-1">ARMED</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="5_2" tabindex="-1" data-f="45730739997648173" data-d="3">.457</td>
<td class="e hCR vCC ui-selectee" data-rc="5_3" tabindex="-1" data-f="46474418760067454" data-d="3">.465</td>
<td class="e hCR vCC ui-selectee" data-rc="5_4" tabindex="-1" data-f="4464367918926264" data-d="3">.446</td>
<td class="e hCR vCC ui-selectee" data-rc="5_5" tabindex="-1" data-f="17742062950187834" data-d="3" data-i="-">-.177</td>
<td class="e hCR vCC ui-selectee" data-rc="5_6" tabindex="-1" data-d="3">1.000</td>
<td class="e hCR vCC ui-selectee" data-rc="5_7" tabindex="-1" data-f="364416267189032" data-d="3">.364</td>
<td class="e hCR vCC ui-selectee" data-rc="5_8" tabindex="-1" data-f="4172451498349454" data-d="3">.417</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="6_1" tabindex="-1">POP</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="6_2" tabindex="-1" data-f="9603905715943756" data-d="3" data-i="0">.960</td>
<td class="o hCR vCC ui-selectee" data-rc="6_3" tabindex="-1" data-f="9791634329774979" data-d="3" data-i="0">.979</td>
<td class="o hCR vCC ui-selectee" data-rc="6_4" tabindex="-1" data-f="9910900694584777" data-d="3" data-i="0">.991</td>
<td class="o hCR vCC ui-selectee" data-rc="6_5" tabindex="-1" data-f="686551516365312" data-d="3" data-i="0">.687</td>
<td class="o hCR vCC ui-selectee" data-rc="6_6" tabindex="-1" data-f="364416267189032" data-d="3">.364</td>
<td class="o hCR vCC ui-selectee" data-rc="6_7" tabindex="-1" data-d="3">1.000</td>
<td class="o hCR vCC ui-selectee" data-rc="6_8" tabindex="-1" data-f="9939528462329255" data-d="3" data-i="0">.994</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="7_1" tabindex="-1">YEAR</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="7_2" tabindex="-1" data-f="9713294591921187" data-d="3" data-i="0">.971</td>
<td class="e hCR vCC ui-selectee" data-rc="7_3" tabindex="-1" data-f="9911491900672054" data-d="3" data-i="0">.991</td>
<td class="e hCR vCC ui-selectee" data-rc="7_4" tabindex="-1" data-f="9952734837647847" data-d="3" data-i="0">.995</td>
<td class="e hCR vCC ui-selectee" data-rc="7_5" tabindex="-1" data-f="6682566045621746" data-d="3" data-i="0">.668</td>
<td class="e hCR vCC ui-selectee" data-rc="7_6" tabindex="-1" data-f="4172451498349454" data-d="3">.417</td>
<td class="e hCR vCC ui-selectee" data-rc="7_7" tabindex="-1" data-f="9939528462329255" data-d="3" data-i="0">.994</td>
<td class="e hCR vCC ui-selectee" data-rc="7_8" tabindex="-1" data-d="3">1.000</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR role3 ui-selectee" data-rc="8_0" tabindex="-1" rowspan="7">Sig. (1-tailed)</td>
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="8_1" tabindex="-1">TOTEMP</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="8_2" tabindex="-1">.</td>
<td class="o hCR vCC ui-selectee" data-rc="8_3" tabindex="-1" data-f="0000000002195" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="8_4" tabindex="-1" data-f="0000000000042" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="8_5" tabindex="-1" data-f="023644704889515207" data-d="3">.024</td>
<td class="o hCR vCC ui-selectee" data-rc="8_6" tabindex="-1" data-f="03745890248212059" data-d="3">.037</td>
<td class="o hCR vCC ui-selectee" data-rc="8_7" tabindex="-1" data-f="0000000018466" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="8_8" tabindex="-1" data-f="0000000001979" data-d="3">.000</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="9_1" tabindex="-1">GNPDEFL</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="9_2" tabindex="-1" data-f="0000000002195" data-d="3">.000</td>
<td class="e hCR vCC ui-selectee" data-rc="9_3" tabindex="-1">.</td>
<td class="e hCR vCC ui-selectee" data-rc="9_4" tabindex="-1" data-f="0000000000000" data-d="3">.000</td>
<td class="e hCR vCC ui-selectee" data-rc="9_5" tabindex="-1" data-f="005153180641771469" data-d="3">.005</td>
<td class="e hCR vCC ui-selectee" data-rc="9_6" tabindex="-1" data-f="034858791651705835" data-d="3">.035</td>
<td class="e hCR vCC ui-selectee" data-rc="9_7" tabindex="-1" data-f="0000000000216" data-d="3">.000</td>
<td class="e hCR vCC ui-selectee" data-rc="9_8" tabindex="-1" data-f="0000000000001" data-d="3">.000</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="10_1" tabindex="-1">GNP</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="10_2" tabindex="-1" data-f="0000000000042" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="10_3" tabindex="-1" data-f="0000000000000" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="10_4" tabindex="-1">.</td>
<td class="o hCR vCC ui-selectee" data-rc="10_5" tabindex="-1" data-f="006584390245132884" data-d="3">.007</td>
<td class="o hCR vCC ui-selectee" data-rc="10_6" tabindex="-1" data-f="041508308464827184" data-d="3">.042</td>
<td class="o hCR vCC ui-selectee" data-rc="10_7" tabindex="-1" data-f="0000000000001" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="10_8" tabindex="-1" data-f="0000000000000" data-d="3">.000</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="11_1" tabindex="-1">UNEMP</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="11_2" tabindex="-1" data-f="023644704889515207" data-d="3">.024</td>
<td class="e hCR vCC ui-selectee" data-rc="11_3" tabindex="-1" data-f="005153180641771469" data-d="3">.005</td>
<td class="e hCR vCC ui-selectee" data-rc="11_4" tabindex="-1" data-f="006584390245132884" data-d="3">.007</td>
<td class="e hCR vCC ui-selectee" data-rc="11_5" tabindex="-1">.</td>
<td class="e hCR vCC ui-selectee" data-rc="11_6" tabindex="-1" data-f="25547429316171766" data-d="3">.255</td>
<td class="e hCR vCC ui-selectee" data-rc="11_7" tabindex="-1" data-f="0016551414098376308" data-d="3">.002</td>
<td class="e hCR vCC ui-selectee" data-rc="11_8" tabindex="-1" data-f="002330195692707299" data-d="3">.002</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="12_1" tabindex="-1">ARMED</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="12_2" tabindex="-1" data-f="03745890248212059" data-d="3">.037</td>
<td class="o hCR vCC ui-selectee" data-rc="12_3" tabindex="-1" data-f="034858791651705835" data-d="3">.035</td>
<td class="o hCR vCC ui-selectee" data-rc="12_4" tabindex="-1" data-f="041508308464827184" data-d="3">.042</td>
<td class="o hCR vCC ui-selectee" data-rc="12_5" tabindex="-1" data-f="25547429316171766" data-d="3">.255</td>
<td class="o hCR vCC ui-selectee" data-rc="12_6" tabindex="-1">.</td>
<td class="o hCR vCC ui-selectee" data-rc="12_7" tabindex="-1" data-f="08261468625533376" data-d="3">.083</td>
<td class="o hCR vCC ui-selectee" data-rc="12_8" tabindex="-1" data-f="053923853579074706" data-d="3">.054</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="13_1" tabindex="-1">POP</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="13_2" tabindex="-1" data-f="0000000018466" data-d="3">.000</td>
<td class="e hCR vCC ui-selectee" data-rc="13_3" tabindex="-1" data-f="0000000000216" data-d="3">.000</td>
<td class="e hCR vCC ui-selectee" data-rc="13_4" tabindex="-1" data-f="0000000000001" data-d="3">.000</td>
<td class="e hCR vCC ui-selectee" data-rc="13_5" tabindex="-1" data-f="0016551414098376308" data-d="3">.002</td>
<td class="e hCR vCC ui-selectee" data-rc="13_6" tabindex="-1" data-f="08261468625533376" data-d="3">.083</td>
<td class="e hCR vCC ui-selectee" data-rc="13_7" tabindex="-1">.</td>
<td class="e hCR vCC ui-selectee" data-rc="13_8" tabindex="-1" data-f="0000000000000" data-d="3">.000</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="14_1" tabindex="-1">YEAR</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="14_2" tabindex="-1" data-f="0000000001979" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="14_3" tabindex="-1" data-f="0000000000001" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="14_4" tabindex="-1" data-f="0000000000000" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="14_5" tabindex="-1" data-f="002330195692707299" data-d="3">.002</td>
<td class="o hCR vCC ui-selectee" data-rc="14_6" tabindex="-1" data-f="053923853579074706" data-d="3">.054</td>
<td class="o hCR vCC ui-selectee" data-rc="14_7" tabindex="-1" data-f="0000000000000" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="14_8" tabindex="-1">.</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR role3 ui-selectee" data-rc="15_0" tabindex="-1" rowspan="7">N</td>
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="15_1" tabindex="-1">TOTEMP</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="15_2" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="15_3" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="15_4" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="15_5" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="15_6" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="15_7" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="15_8" tabindex="-1" data-d="0">16</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="16_1" tabindex="-1">GNPDEFL</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="16_2" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="16_3" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="16_4" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="16_5" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="16_6" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="16_7" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="16_8" tabindex="-1" data-d="0">16</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="17_1" tabindex="-1">GNP</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="17_2" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="17_3" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="17_4" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="17_5" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="17_6" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="17_7" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="17_8" tabindex="-1" data-d="0">16</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="18_1" tabindex="-1">UNEMP</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="18_2" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="18_3" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="18_4" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="18_5" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="18_6" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="18_7" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="18_8" tabindex="-1" data-d="0">16</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="19_1" tabindex="-1">ARMED</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="19_2" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="19_3" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="19_4" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="19_5" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="19_6" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="19_7" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="19_8" tabindex="-1" data-d="0">16</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="20_1" tabindex="-1">POP</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="20_2" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="20_3" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="20_4" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="20_5" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="20_6" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="20_7" tabindex="-1" data-d="0">16</td>
<td class="o hCR vCC ui-selectee" data-rc="20_8" tabindex="-1" data-d="0">16</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="21_1" tabindex="-1">YEAR</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="21_2" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="21_3" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="21_4" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="21_5" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="21_6" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="21_7" tabindex="-1" data-d="0">16</td>
<td class="e hCR vCC ui-selectee" data-rc="21_8" tabindex="-1" data-d="0">16</td>
</tr>
<tr class="ui-selectee" style="">
<td tabindex="-1" style="width:130px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:76px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:76px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
</tr>
</tbody>
</table>
<table summary="Model Summary" tabindex="0" role="grid" style="width: 877px; margin-bottom: 0px;" class="WebReportBlue PivotTable ui-selectable" aria-label="Model Summary" data-lookname="WebReportBlue" data-rowlabelwidth="1" data-collabelheight="2" data-numrows="1" data-numcols="10" data-rowlabels="Corner" data-decimal-char="." data-col-labels="R ;R Square ;Adjusted R Square ;Std. Error of the Estimate ;Change Statistics R Square Change; F Change; df1; df2; Sig. F Change;Durbin-Watson " data-row-labels="1" data-layer-dimension="" data-column-dimension="Statistics;" data-row-dimension="Model;" data-maxcolwidth="72">
<caption class="title ui-selectee" style="width:877px" title="b. Dependent Variable: TOTEMP">Model Summary<sup class="ui-selectee">b</sup><span class="details ui-selectee"></span></caption>
<tbody class="PivotBody defaultLayer innerFrameBd ui-selectee" style="display: table;">
<tr class="ui-selectee" style="">
<td class="cornerLabels ui-selectee" data-rc="0_0" tabindex="-1" rowspan="2">Model</td>
<td class="columnLabels dataAreaLeft hCC vCC role3 ui-selectee" data-rc="0_1" tabindex="-1" rowspan="2">R</td>
<td class="columnLabels hCC vCC role3 ui-selectee" data-rc="0_2" tabindex="-1" rowspan="2">R Square</td>
<td class="columnLabels hCC vCC role3 ui-selectee" data-rc="0_3" tabindex="-1" rowspan="2">Adjusted R Square</td>
<td class="columnLabels hDC vCC role3 ui-selectee" data-rc="0_4" tabindex="-1" rowspan="2">Std. Error of the Estimate</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_5" tabindex="-1" colspan="5">Change Statistics</td>
<td class="columnLabels hCC vCC role3 ui-selectee" data-rc="0_10" tabindex="-1" rowspan="2">Durbin-Watson</td>
</tr>
<tr class="ui-selectee" style="">
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_5" tabindex="-1">R Square Change</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_6" tabindex="-1">F Change</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_7" tabindex="-1">df1</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_8" tabindex="-1">df2</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_9" tabindex="-1">Sig. F Change</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels dataAreaTop role3 ui-selectee" data-rc="2_0" tabindex="-1" data-d="0">1</td>
<td class="o dataAreaTop dataAreaLeft vCC ui-selectee" data-rc="2_1" tabindex="-1" data-f="997736941571923" data-d="3" data-i="0" title="a. Predictors: (Constant), YEAR, ARMED, UNEMP, GNPDEFL, POP, GNP">.998<sup class="ui-selectee">a</sup></td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_2" tabindex="-1" data-f="9954790045772951" data-d="3" data-i="0">.995</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_3" tabindex="-1" data-f="9924650076288252" data-d="3" data-i="0">.992</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_4" tabindex="-1" data-f="85407356198164" data-d="4" data-i="304">304.8541</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_5" tabindex="-1" data-f="9954790045772951" data-d="3" data-i="0">.995</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_6" tabindex="-1" data-f="28533923455166" data-d="3">330.285</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_7" tabindex="-1" data-d="0">6</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_8" tabindex="-1" data-d="0">9</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_9" tabindex="-1" data-f="0000000004984" data-d="3">.000</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_10" tabindex="-1" data-f="5594876892814815" data-d="3" data-i="2">2.559</td>
</tr>
</tbody><tfoot style="display: table-footer-group;" class="ui-selectee">
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="3_0" tabindex="-1" colspan="11">a. Predictors: (Constant), YEAR, ARMED, UNEMP, GNPDEFL, POP, GNP</td>
</tr>
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="4_0" tabindex="-1" colspan="11">b. Dependent Variable: TOTEMP</td>
</tr>
<tr class="ui-selectee" style="">
<td tabindex="-1" style="width:52px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:71px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:73px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
</tr>
</tfoot>
</table>
<p>从<code>R方, F-change, sig, dw</code>等指标来看, 貌似拟合的结果还可以(即一定程度认为多重共线性不影响拟合的结果的数值).</p>
<table summary="ANOVA, 表, 1 个级别的列标题和 2 个级别的行标题, 包含 7 列 7 行的表" tabindex="0" role="grid" style="width: 525px; margin-bottom: 0px;" class="WebReportBlue PivotTable ui-selectable" aria-label="ANOVA" data-lookname="WebReportBlue" data-rowlabelwidth="2" data-collabelheight="1" data-numrows="3" data-numcols="5" data-rowlabels="Corner" data-decimal-char="." data-col-labels="Sum of Squares;df;Mean Square;F;Sig." data-row-labels="1 Regression; Residual; Total" data-layer-dimension="" data-column-dimension="Statistics;" data-row-dimension="Model;Source;" data-maxcolwidth="72">
<caption class="title ui-selectee" style="width:525px" title="a. Dependent Variable: TOTEMP">ANOVA<sup class="ui-selectee">a</sup><span class="details ui-selectee"></span></caption>
<tbody class="PivotBody defaultLayer innerFrameBd ui-selectee" style="display: table;">
<tr class="ui-selectee" style="">
<td class="cornerLabels ui-selectee" data-rc="0_0" tabindex="-1" colspan="2">Model</td>
<td class="columnLabels dataAreaLeft vCC role3 ui-selectee" data-rc="0_2" tabindex="-1">Sum of Squares</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_3" tabindex="-1">df</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_4" tabindex="-1">Mean Square</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_5" tabindex="-1">F</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_6" tabindex="-1">Sig.</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels dataAreaTop role3 ui-selectee" data-rc="1_0" tabindex="-1" data-d="0" rowspan="3">1</td>
<td class="rowLabels dataAreaTop vCR role3 ui-selectee" data-rc="1_1" tabindex="-1">Regression</td>
<td class="e dataAreaTop dataAreaLeft vCC ui-selectee" data-rc="1_2" tabindex="-1" data-f="94449398" data-d="3" data-i="184172401">184172401.944</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_3" tabindex="-1" data-d="0">6</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_4" tabindex="-1" data-f="32408233" data-d="3">30695400.324</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_5" tabindex="-1" data-f="28533923455564" data-d="3">330.285</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_6" tabindex="-1" data-f="0000000004984" data-d="3" title="b. Predictors: (Constant), YEAR, ARMED, UNEMP, GNPDEFL, POP, GNP">.000<sup class="ui-selectee">b</sup></td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="2_1" tabindex="-1">Residual</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="2_2" tabindex="-1" data-f="055506007" data-d="3">836424.056</td>
<td class="o hCR vCC ui-selectee" data-rc="2_3" tabindex="-1" data-d="0">9</td>
<td class="o hCR vCC ui-selectee" data-rc="2_4" tabindex="-1" data-f="00616733411" data-d="3">92936.006</td>
<td class="o hCR vCC ui-selectee" data-rc="2_5" tabindex="-1">&nbsp;</td>
<td class="o hCR vCC ui-selectee" data-rc="2_6" tabindex="-1">&nbsp;</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="3_1" tabindex="-1">Total</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="3_2" tabindex="-1" data-f="185008826" data-d="3">185008826.000</td>
<td class="e hCR vCC ui-selectee" data-rc="3_3" tabindex="-1" data-d="0">15</td>
<td class="e hCR vCC ui-selectee" data-rc="3_4" tabindex="-1">&nbsp;</td>
<td class="e hCR vCC ui-selectee" data-rc="3_5" tabindex="-1">&nbsp;</td>
<td class="e hCR vCC ui-selectee" data-rc="3_6" tabindex="-1">&nbsp;</td>
</tr>
</tbody><tfoot style="display: table-footer-group;" class="ui-selectee">
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="4_0" tabindex="-1" colspan="7">a. Dependent Variable: TOTEMP</td>
</tr>
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="5_0" tabindex="-1" colspan="7">b. Predictors: (Constant), YEAR, ARMED, UNEMP, GNPDEFL, POP, GNP</td>
</tr>
<tr class="ui-selectee" style="">
<td tabindex="-1" style="width:48px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:84px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
</tr>
</tfoot>
</table>
注意残差 `mse` 值.
<table summary="Coefficients, 表, 2 个级别的列标题和 2 个级别的行标题, 包含 14 列 11 行的表" tabindex="0" role="grid" style="width: 1086px; margin-bottom: 0px;" class="WebReportBlue PivotTable ui-selectable" aria-label="Coefficients" data-lookname="WebReportBlue" data-rowlabelwidth="2" data-collabelheight="2" data-numrows="7" data-numcols="12" data-rowlabels="Corner" data-decimal-char="." data-col-labels="Unstandardized Coefficients B; Std. Error;Standardized Coefficients Beta;t ;Sig. ;95.0% Confidence Interval for B Lower Bound; Upper Bound;Correlations Zero-order; Partial; Part;Collinearity Statistics Tolerance; VIF" data-row-labels="1 (Constant); GNPDEFL; GNP; UNEMP; ARMED; POP; YEAR" data-layer-dimension="" data-column-dimension="Statistics;" data-row-dimension="Model;Variables;" data-maxcolwidth="72">
<caption class="title ui-selectee" style="width:1086px" title="a. Dependent Variable: TOTEMP">Coefficients<sup class="ui-selectee">a</sup><span class="details ui-selectee"></span></caption>
<tbody class="PivotBody defaultLayer innerFrameBd ui-selectee" style="display: table;">
<tr class="ui-selectee" style="">
<td class="cornerLabels ui-selectee" data-rc="0_0" tabindex="-1" rowspan="2" colspan="2">Model</td>
<td class="columnLabels dataAreaLeft hCC vCC role2 ui-selectee" data-rc="0_2" tabindex="-1" colspan="2">Unstandardized Coefficients</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_4" tabindex="-1">Standardized Coefficients</td>
<td class="columnLabels hCC vCC role3 ui-selectee" data-rc="0_5" tabindex="-1" rowspan="2">t</td>
<td class="columnLabels hDC vCC role3 ui-selectee" data-rc="0_6" tabindex="-1" rowspan="2">Sig.</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_7" tabindex="-1" colspan="2">95.0% Confidence Interval for B</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_9" tabindex="-1" colspan="3">Correlations</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_12" tabindex="-1" colspan="2">Collinearity Statistics</td>
</tr>
<tr class="ui-selectee" style="">
<td class="columnLabels dataAreaLeft vCC role3 ui-selectee" data-rc="1_2" tabindex="-1">B</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_3" tabindex="-1">Std. Error</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_4" tabindex="-1">Beta</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_7" tabindex="-1">Lower Bound</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_8" tabindex="-1">Upper Bound</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_9" tabindex="-1">Zero-order</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_10" tabindex="-1">Partial</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_11" tabindex="-1">Part</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_12" tabindex="-1">Tolerance</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_13" tabindex="-1">VIF</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels dataAreaTop role3 ui-selectee" data-rc="2_0" tabindex="-1" data-d="0" rowspan="7">1</td>
<td class="rowLabels dataAreaTop vCR role3 ui-selectee" data-rc="2_1" tabindex="-1">(Constant)</td>
<td class="o dataAreaTop dataAreaLeft vCC ui-selectee" data-rc="2_2" tabindex="-1" data-f="6345957224" data-d="3" data-i="-9223">-3482258.635</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_3" tabindex="-1" data-f="383607433" data-d="3">890420.384</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_4" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_5" tabindex="-1" data-f="9108029181539656" data-d="3" data-i="-3">-3.911</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_6" tabindex="-1" data-f="003560403663728249" data-d="3">.004</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_7" tabindex="-1" data-f="483274803" data-d="3" data-i="-9223">-5496529.483</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_8" tabindex="-1" data-f="7859166428" data-d="3" data-i="-9223">-1467987.786</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_9" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_10" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_11" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_12" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_13" tabindex="-1">&nbsp;</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="3_1" tabindex="-1">GNPDEFL</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="3_2" tabindex="-1" data-f="061872271350023" data-d="3">15.062</td>
<td class="e hCR vCC ui-selectee" data-rc="3_3" tabindex="-1" data-f="91492577477668" data-d="3" data-i="84">84.915</td>
<td class="e hCR vCC ui-selectee" data-rc="3_4" tabindex="-1" data-f="046282022670836614" data-d="3">.046</td>
<td class="e hCR vCC ui-selectee" data-rc="3_5" tabindex="-1" data-f="17737602822970416" data-d="3">.177</td>
<td class="e hCR vCC ui-selectee" data-rc="3_6" tabindex="-1" data-f="8631408328092686" data-d="3" data-i="0">.863</td>
<td class="e hCR vCC ui-selectee" data-rc="3_7" tabindex="-1" data-f="02903529853896" data-d="3" data-i="-177">-177.029</td>
<td class="e hCR vCC ui-selectee" data-rc="3_8" tabindex="-1" data-f="15277984123898" data-d="3">207.153</td>
<td class="e hCR vCC ui-selectee" data-rc="3_9" tabindex="-1" data-f="9708985250610558" data-d="3" data-i="0">.971</td>
<td class="e hCR vCC ui-selectee" data-rc="3_10" tabindex="-1" data-f="05902226754430568" data-d="3">.059</td>
<td class="e hCR vCC ui-selectee" data-rc="3_11" tabindex="-1" data-f="0039754903626069114" data-d="3">.004</td>
<td class="e hCR vCC ui-selectee" data-rc="3_12" tabindex="-1" data-f="007378307456801742" data-d="3">.007</td>
<td class="e hCR vCC ui-selectee" data-rc="3_13" tabindex="-1" data-f="5324382800209" data-d="3" data-i="135">135.532</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="4_1" tabindex="-1">GNP</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="4_2" tabindex="-1" data-f="03581917929258463" data-d="3" data-i="-">-.036</td>
<td class="o hCR vCC ui-selectee" data-rc="4_3" tabindex="-1" data-f="03349100777224664" data-d="3">.033</td>
<td class="o hCR vCC ui-selectee" data-rc="4_4" tabindex="-1" data-f="0137463487143434" data-d="3" data-i="-1">-1.014</td>
<td class="o hCR vCC ui-selectee" data-rc="4_5" tabindex="-1" data-f="0695163172207467" data-d="3" data-i="-1">-1.070</td>
<td class="o hCR vCC ui-selectee" data-rc="4_6" tabindex="-1" data-f="31268106109283794" data-d="3">.313</td>
<td class="o hCR vCC ui-selectee" data-rc="4_7" tabindex="-1" data-f="11158110241390272" data-d="3" data-i="-">-.112</td>
<td class="o hCR vCC ui-selectee" data-rc="4_8" tabindex="-1" data-f="03994274382873346" data-d="3">.040</td>
<td class="o hCR vCC ui-selectee" data-rc="4_9" tabindex="-1" data-f="9835516111796694" data-d="3" data-i="0">.984</td>
<td class="o hCR vCC ui-selectee" data-rc="4_10" tabindex="-1" data-f="3358038578523898" data-d="3" data-i="-">-.336</td>
<td class="o hCR vCC ui-selectee" data-rc="4_11" tabindex="-1" data-f="023970836725781874" data-d="3" data-i="-">-.024</td>
<td class="o hCR vCC ui-selectee" data-rc="4_12" tabindex="-1" data-f="0005591235457" data-d="3">.001</td>
<td class="o hCR vCC ui-selectee" data-rc="4_13" tabindex="-1" data-f="5134827183697" data-d="3" data-i="1788">1788.513</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="5_1" tabindex="-1">UNEMP</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="5_2" tabindex="-1" data-f="0202298038167426" data-d="3" data-i="-2">-2.020</td>
<td class="e hCR vCC ui-selectee" data-rc="5_3" tabindex="-1" data-f="4883996816517441" data-d="3">.488</td>
<td class="e hCR vCC ui-selectee" data-rc="5_4" tabindex="-1" data-f="5375425776393444" data-d="3" data-i="-">-.538</td>
<td class="e hCR vCC ui-selectee" data-rc="5_5" tabindex="-1" data-f="136427355940166" data-d="3" data-i="-4">-4.136</td>
<td class="e hCR vCC ui-selectee" data-rc="5_6" tabindex="-1" data-f="0025350917341133428" data-d="3">.003</td>
<td class="e hCR vCC ui-selectee" data-rc="5_7" tabindex="-1" data-f="125066641973598" data-d="3" data-i="-3">-3.125</td>
<td class="e hCR vCC ui-selectee" data-rc="5_8" tabindex="-1" data-f="9153929656598867" data-d="3" data-i="-">-.915</td>
<td class="e hCR vCC ui-selectee" data-rc="5_9" tabindex="-1" data-f="5024980838759942" data-d="3" data-i="0">.502</td>
<td class="e hCR vCC ui-selectee" data-rc="5_10" tabindex="-1" data-f="8095090449588436" data-d="3" data-i="-">-.810</td>
<td class="e hCR vCC ui-selectee" data-rc="5_11" tabindex="-1" data-f="09270884714967297" data-d="3" data-i="-">-.093</td>
<td class="e hCR vCC ui-selectee" data-rc="5_12" tabindex="-1" data-f="02974518142241769" data-d="3">.030</td>
<td class="e hCR vCC ui-selectee" data-rc="5_13" tabindex="-1" data-f="618890596052715" data-d="3" data-i="33">33.619</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="6_1" tabindex="-1">ARMED</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="6_2" tabindex="-1" data-f="0332268671735616" data-d="3" data-i="-1">-1.033</td>
<td class="o hCR vCC ui-selectee" data-rc="6_3" tabindex="-1" data-f="2142741631616866" data-d="3">.214</td>
<td class="o hCR vCC ui-selectee" data-rc="6_4" tabindex="-1" data-f="20474069234424558" data-d="3" data-i="-">-.205</td>
<td class="o hCR vCC ui-selectee" data-rc="6_5" tabindex="-1" data-f="821985310445064" data-d="3" data-i="-4">-4.822</td>
<td class="o hCR vCC ui-selectee" data-rc="6_6" tabindex="-1" data-f="0009443667642" data-d="3">.001</td>
<td class="o hCR vCC ui-selectee" data-rc="6_7" tabindex="-1" data-f="5179487001723622" data-d="3" data-i="-1">-1.518</td>
<td class="o hCR vCC ui-selectee" data-rc="6_8" tabindex="-1" data-f="548505034174761" data-d="3" data-i="-">-.549</td>
<td class="o hCR vCC ui-selectee" data-rc="6_9" tabindex="-1" data-f="45730739997648173" data-d="3">.457</td>
<td class="o hCR vCC ui-selectee" data-rc="6_10" tabindex="-1" data-f="8490839641874433" data-d="3" data-i="-">-.849</td>
<td class="o hCR vCC ui-selectee" data-rc="6_11" tabindex="-1" data-f="10807410855699948" data-d="3" data-i="-">-.108</td>
<td class="o hCR vCC ui-selectee" data-rc="6_12" tabindex="-1" data-f="27863456408995946" data-d="3">.279</td>
<td class="o hCR vCC ui-selectee" data-rc="6_13" tabindex="-1" data-f="5889301934455693" data-d="3" data-i="3">3.589</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="7_1" tabindex="-1">POP</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="7_2" tabindex="-1" data-f="05110410565361188" data-d="3" data-i="-">-.051</td>
<td class="e hCR vCC ui-selectee" data-rc="7_3" tabindex="-1" data-f="22607320006939574" data-d="3">.226</td>
<td class="e hCR vCC ui-selectee" data-rc="7_4" tabindex="-1" data-f="10122111394591227" data-d="3" data-i="-">-.101</td>
<td class="e hCR vCC ui-selectee" data-rc="7_5" tabindex="-1" data-f="2260511446643162" data-d="3" data-i="-">-.226</td>
<td class="e hCR vCC ui-selectee" data-rc="7_6" tabindex="-1" data-f="8262117957634361" data-d="3" data-i="0">.826</td>
<td class="e hCR vCC ui-selectee" data-rc="7_7" tabindex="-1" data-f="5625172145073071" data-d="3" data-i="-">-.563</td>
<td class="e hCR vCC ui-selectee" data-rc="7_8" tabindex="-1" data-f="4603090032000833" data-d="3">.460</td>
<td class="e hCR vCC ui-selectee" data-rc="7_9" tabindex="-1" data-f="9603905715943756" data-d="3" data-i="0">.960</td>
<td class="e hCR vCC ui-selectee" data-rc="7_10" tabindex="-1" data-f="07513738046367775" data-d="3" data-i="-">-.075</td>
<td class="e hCR vCC ui-selectee" data-rc="7_11" tabindex="-1" data-f="005066435166230402" data-d="3" data-i="-">-.005</td>
<td class="e hCR vCC ui-selectee" data-rc="7_12" tabindex="-1" data-f="002505317396422982" data-d="3">.003</td>
<td class="e hCR vCC ui-selectee" data-rc="7_13" tabindex="-1" data-f="1510223126899" data-d="3">399.151</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="8_1" tabindex="-1">YEAR</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="8_2" tabindex="-1" data-f="1514646135045" data-d="3">1829.151</td>
<td class="o hCR vCC ui-selectee" data-rc="8_3" tabindex="-1" data-f="47849914224247" data-d="3">455.478</td>
<td class="o hCR vCC ui-selectee" data-rc="8_4" tabindex="-1" data-f="479664382946762" data-d="3">2.480</td>
<td class="o hCR vCC ui-selectee" data-rc="8_5" tabindex="-1" data-f="015889812709412" data-d="3">4.016</td>
<td class="o hCR vCC ui-selectee" data-rc="8_6" tabindex="-1" data-f="003036803341631994" data-d="3">.003</td>
<td class="o hCR vCC ui-selectee" data-rc="8_7" tabindex="-1" data-f="7875152783047" data-d="3" data-i="798">798.788</td>
<td class="o hCR vCC ui-selectee" data-rc="8_8" tabindex="-1" data-f="515413948704" data-d="3" data-i="2859">2859.515</td>
<td class="o hCR vCC ui-selectee" data-rc="8_9" tabindex="-1" data-f="9713294591921187" data-d="3" data-i="0">.971</td>
<td class="o hCR vCC ui-selectee" data-rc="8_10" tabindex="-1" data-f="8011397162371788" data-d="3" data-i="0">.801</td>
<td class="o hCR vCC ui-selectee" data-rc="8_11" tabindex="-1" data-f="0900072653957642" data-d="3">.090</td>
<td class="o hCR vCC ui-selectee" data-rc="8_12" tabindex="-1" data-f="0013175567378356289" data-d="3">.001</td>
<td class="o hCR vCC ui-selectee" data-rc="8_13" tabindex="-1" data-f="9805974069213" data-d="3" data-i="758">758.981</td>
</tr>
</tbody><tfoot style="display: table-footer-group;" class="ui-selectee">
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="9_0" tabindex="-1" colspan="14">a. Dependent Variable: TOTEMP</td>
</tr>
<tr class="ui-selectee" style="">
<td tabindex="-1" style="width:48px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:77px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:87px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:77px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:74px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:71px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
</tr>
</tfoot>
</table>
但是对于各项回归系数的拟合值的检验指标,` t, sig`, 两项数据出现了不一样的情况, 多项出现 `sig` 远大 0.05, 作为多重共线性诊断的关键指标的` VIF`, 多项已经远远大于 `10` 这个指标.
<figure data-type="image" tabindex="5"><a href="https://imgse.com/i/p9Uhs76"><img src="https://s1.ax1x.com/2023/05/06/p9Uhs76.png" alt="p9Uhs76.png" loading="lazy"></a></figure>
<table summary="Collinearity Diagnostics, 表, 2 个级别的列标题和 2 个级别的行标题, 包含 11 列 11 行的表" tabindex="0" role="grid" style="width: 796px; margin-bottom: 0px;" class="WebReportBlue PivotTable ui-selectable" aria-label="Collinearity Diagnostics" data-lookname="WebReportBlue" data-rowlabelwidth="2" data-collabelheight="2" data-numrows="7" data-numcols="9" data-rowlabels="Corner" data-decimal-char="." data-col-labels="Eigenvalue ;Condition Index ;Variance Proportions (Constant); GNPDEFL; GNP; UNEMP; ARMED; POP; YEAR" data-row-labels="1 1; 2; 3; 4; 5; 6; 7" data-layer-dimension="" data-column-dimension="Statistics;" data-row-dimension="Model;Dimension;" data-maxcolwidth="72">
<caption class="title ui-selectee" style="width:796px" title="a. Dependent Variable: TOTEMP">Collinearity Diagnostics<sup class="ui-selectee">a</sup><span class="details ui-selectee"></span></caption>
<tbody class="PivotBody defaultLayer innerFrameBd ui-selectee" style="display: table;">
<tr class="ui-selectee" style="">
<td class="cornerLabels ui-selectee" data-rc="0_0" tabindex="-1" rowspan="2">Model</td>
<td class="cornerLabels ui-selectee" data-rc="0_1" tabindex="-1" rowspan="2">Dimension</td>
<td class="columnLabels dataAreaLeft hCC vCC role3 ui-selectee" data-rc="0_2" tabindex="-1" rowspan="2">Eigenvalue</td>
<td class="columnLabels hDC vCC role3 ui-selectee" data-rc="0_3" tabindex="-1" rowspan="2">Condition Index</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_4" tabindex="-1" colspan="7">Variance Proportions</td>
</tr>
<tr class="ui-selectee" style="">
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_4" tabindex="-1">(Constant)</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_5" tabindex="-1">GNPDEFL</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_6" tabindex="-1">GNP</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_7" tabindex="-1">UNEMP</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_8" tabindex="-1">ARMED</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_9" tabindex="-1">POP</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_10" tabindex="-1">YEAR</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels dataAreaTop role3 ui-selectee" data-rc="2_0" tabindex="-1" data-d="0" rowspan="7">1</td>
<td class="rowLabels dataAreaTop vCR role3 ui-selectee" data-rc="2_1" tabindex="-1" data-d="0">1</td>
<td class="o dataAreaTop dataAreaLeft vCC ui-selectee" data-rc="2_2" tabindex="-1" data-f="861392768154346" data-d="3" data-i="6">6.861</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_3" tabindex="-1" data-d="3">1.000</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_4" tabindex="-1" data-f="0000000001540" data-d="2">.00</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_5" tabindex="-1" data-f="0000016366698" data-d="2">.00</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_6" tabindex="-1" data-f="0000006742617" data-d="2">.00</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_7" tabindex="-1" data-f="0000447150019" data-d="2">.00</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_8" tabindex="-1" data-f="0003536940256" data-d="2">.00</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_9" tabindex="-1" data-f="0000001740763" data-d="2">.00</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_10" tabindex="-1" data-f="0000000001541" data-d="2">.00</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="3_1" tabindex="-1" data-d="0">2</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="3_2" tabindex="-1" data-f="08210250361264267" data-d="3">.082</td>
<td class="e hCR vCC ui-selectee" data-rc="3_3" tabindex="-1" data-f="141720519870459" data-d="3">9.142</td>
<td class="e hCR vCC ui-selectee" data-rc="3_4" tabindex="-1" data-f="0000000008166" data-d="2">.00</td>
<td class="e hCR vCC ui-selectee" data-rc="3_5" tabindex="-1" data-f="0000000070955" data-d="2">.00</td>
<td class="e hCR vCC ui-selectee" data-rc="3_6" tabindex="-1" data-f="0000075261428" data-d="2">.00</td>
<td class="e hCR vCC ui-selectee" data-rc="3_7" tabindex="-1" data-f="014280277355039906" data-d="2">.01</td>
<td class="e hCR vCC ui-selectee" data-rc="3_8" tabindex="-1" data-f="09190849397818275" data-d="2">.09</td>
<td class="e hCR vCC ui-selectee" data-rc="3_9" tabindex="-1" data-f="0000000402169" data-d="2">.00</td>
<td class="e hCR vCC ui-selectee" data-rc="3_10" tabindex="-1" data-f="0000000007705" data-d="2">.00</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="4_1" tabindex="-1" data-d="0">3</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="4_2" tabindex="-1" data-f="045680784457884795" data-d="3">.046</td>
<td class="o hCR vCC ui-selectee" data-rc="4_3" tabindex="-1" data-f="255735049271552" data-d="3">12.256</td>
<td class="o hCR vCC ui-selectee" data-rc="4_4" tabindex="-1" data-f="0000000334225" data-d="2">.00</td>
<td class="o hCR vCC ui-selectee" data-rc="4_5" tabindex="-1" data-f="0000001012272" data-d="2">.00</td>
<td class="o hCR vCC ui-selectee" data-rc="4_6" tabindex="-1" data-f="0002571742332" data-d="2">.00</td>
<td class="o hCR vCC ui-selectee" data-rc="4_7" tabindex="-1" data-f="0008362574783" data-d="2">.00</td>
<td class="o hCR vCC ui-selectee" data-rc="4_8" tabindex="-1" data-f="06356501115476453" data-d="2">.06</td>
<td class="o hCR vCC ui-selectee" data-rc="4_9" tabindex="-1" data-f="0000083892767" data-d="2">.00</td>
<td class="o hCR vCC ui-selectee" data-rc="4_10" tabindex="-1" data-f="0000000319652" data-d="2">.00</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="5_1" tabindex="-1" data-d="0">4</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="5_2" tabindex="-1" data-f="010688465676188755" data-d="3">.011</td>
<td class="e hCR vCC ui-selectee" data-rc="5_3" tabindex="-1" data-f="336607098623023" data-d="3">25.337</td>
<td class="e hCR vCC ui-selectee" data-rc="5_4" tabindex="-1" data-f="0000000011910" data-d="2">.00</td>
<td class="e hCR vCC ui-selectee" data-rc="5_5" tabindex="-1" data-f="0003448390592" data-d="2">.00</td>
<td class="e hCR vCC ui-selectee" data-rc="5_6" tabindex="-1" data-f="001065044369222594" data-d="2">.00</td>
<td class="e hCR vCC ui-selectee" data-rc="5_7" tabindex="-1" data-f="06464237675253118" data-d="2">.06</td>
<td class="e hCR vCC ui-selectee" data-rc="5_8" tabindex="-1" data-f="4267242980262243" data-d="2">.43</td>
<td class="e hCR vCC ui-selectee" data-rc="5_9" tabindex="-1" data-f="0000182108031" data-d="2">.00</td>
<td class="e hCR vCC ui-selectee" data-rc="5_10" tabindex="-1" data-f="0000000014267" data-d="2">.00</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="6_1" tabindex="-1" data-d="0">5</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="6_2" tabindex="-1" data-f="0001292281304" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="6_3" tabindex="-1" data-f="4239460015958" data-d="3">230.424</td>
<td class="o hCR vCC ui-selectee" data-rc="6_4" tabindex="-1" data-f="0000005260203" data-d="2">.00</td>
<td class="o hCR vCC ui-selectee" data-rc="6_5" tabindex="-1" data-f="45676598290927" data-d="2">.46</td>
<td class="o hCR vCC ui-selectee" data-rc="6_6" tabindex="-1" data-f="015656131350446034" data-d="2">.02</td>
<td class="o hCR vCC ui-selectee" data-rc="6_7" tabindex="-1" data-f="005594819190051848" data-d="2">.01</td>
<td class="o hCR vCC ui-selectee" data-rc="6_8" tabindex="-1" data-f="11540240661909155" data-d="2">.12</td>
<td class="o hCR vCC ui-selectee" data-rc="6_9" tabindex="-1" data-f="009682267549880576" data-d="2">.01</td>
<td class="o hCR vCC ui-selectee" data-rc="6_10" tabindex="-1" data-f="0000005273968" data-d="2">.00</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="7_1" tabindex="-1" data-d="0">6</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="7_2" tabindex="-1" data-f="0000062463047" data-d="3" data-s="E-6">6.246E-6</td>
<td class="e hCR vCC ui-selectee" data-rc="7_3" tabindex="-1" data-f="080297930438" data-d="3">1048.080</td>
<td class="e hCR vCC ui-selectee" data-rc="7_4" tabindex="-1" data-f="0001491375126" data-d="2">.00</td>
<td class="e hCR vCC ui-selectee" data-rc="7_5" tabindex="-1" data-f="5045560164386967" data-d="2" data-i="0">.50</td>
<td class="e hCR vCC ui-selectee" data-rc="7_6" tabindex="-1" data-f="32838545984825357" data-d="2">.33</td>
<td class="e hCR vCC ui-selectee" data-rc="7_7" tabindex="-1" data-f="22534475091871617" data-d="2">.23</td>
<td class="e hCR vCC ui-selectee" data-rc="7_8" tabindex="-1" data-f="0000006865016" data-d="2">.00</td>
<td class="e hCR vCC ui-selectee" data-rc="7_9" tabindex="-1" data-f="8305635481579782" data-d="2" data-i="0">.83</td>
<td class="e hCR vCC ui-selectee" data-rc="7_10" tabindex="-1" data-f="0001603148783" data-d="2">.00</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="8_1" tabindex="-1" data-d="0">7</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="8_2" tabindex="-1" data-f="0000000036638" data-d="3" data-s="E-9">3.664E-9</td>
<td class="o hCR vCC ui-selectee" data-rc="8_3" tabindex="-1" data-f="04710071111" data-d="3">43275.047</td>
<td class="o hCR vCC ui-selectee" data-rc="8_4" tabindex="-1" data-f="9998503008828827" data-d="2" data-i="0">1.00</td>
<td class="o hCR vCC ui-selectee" data-rc="8_5" tabindex="-1" data-f="03833141660021204" data-d="2">.04</td>
<td class="o hCR vCC ui-selectee" data-rc="8_6" tabindex="-1" data-f="6546279897943833" data-d="2" data-i="0">.65</td>
<td class="o hCR vCC ui-selectee" data-rc="8_7" tabindex="-1" data-f="6892568033034762" data-d="2" data-i="0">.69</td>
<td class="o hCR vCC ui-selectee" data-rc="8_8" tabindex="-1" data-f="30204540969451943" data-d="2">.30</td>
<td class="o hCR vCC ui-selectee" data-rc="8_9" tabindex="-1" data-f="15972736991907624" data-d="2">.16</td>
<td class="o hCR vCC ui-selectee" data-rc="8_10" tabindex="-1" data-f="9998391234082947" data-d="2" data-i="0">1.00</td>
</tr>
</tbody><tfoot style="display: table-footer-group;" class="ui-selectee">
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="9_0" tabindex="-1" colspan="11">a. Dependent Variable: TOTEMP</td>
</tr>
<tr class="ui-selectee" style="">
<td tabindex="-1" style="width:52px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:80px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:80px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:77px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:76px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
</tr>
</tfoot>
</table>
<figure data-type="image" tabindex="6"><a href="https://imgse.com/i/p9UFN24"><img src="https://s1.ax1x.com/2023/05/05/p9UFN24.png" alt="p9UFN24.png" loading="lazy"></a></figure>
<p>(<em>图: 问卷统计分析实务 SPSS操作与应用, 吴明隆</em>)</p>
<h2 id="三-解决">三. 解决</h2>
<figure data-type="image" tabindex="7"><a href="https://imgse.com/i/p9UhDn1"><img src="https://s1.ax1x.com/2023/05/06/p9UhDn1.png" alt="p9UhDn1.png" loading="lazy"></a></figure>
<blockquote>
<p><strong>How to Resolve Multicollinearity</strong></p>
<p>If you detect multicollinearity, the next step is to decide if you need to resolve it in some way. Depending on the goal of your regression analysis, you might not actually need to resolve the multicollinearity.</p>
<p>Namely:</p>
<p><strong>1.</strong> If there is only moderate multicollinearity, you likely don’t need to resolve it in any way.</p>
<p><strong>2.</strong> Multicollinearity only affects the predictor variables that are correlated with one another. If you are interested in a predictor variable in the model that doesn’t suffer from multicollinearity, then multicollinearity isn’t a concern.</p>
<p><strong>3.</strong> Multicollinearity impacts the coefficient estimates and the p-values, but it doesn’t impact predictions or goodness-of-fit statistics. This means if your main goal with the regression is to make predictions and you’re not concerned with understanding the exact relationship between the predictor variables and response variable, then multicollinearity doesn’t need to be resolved.</p>
<p>If you determine that you <em>do</em> need to fix multicollinearity, then some common solutions include:</p>
<p><strong>1. Remove one or more of the highly correlated variables.</strong> This is the quickest fix in most cases and is often an acceptable solution because the variables you’re removing are redundant anyway and add little unique or independent information the model.</p>
<p><strong>2. Linearly combine the predictor variables in some way, such as adding or subtracting them from one way.</strong> By doing so, you can create one new variables that encompasses the information from both variables and you no longer have an issue of multicollinearity.</p>
<p><strong>3. Perform an analysis that is designed to account for highly correlated variables such as <a href="https://www.statology.org/principal-components-analysis-in-r/">principal component analysis</a> or <a href="https://www.statology.org/partial-least-squares/">partial least squares (PLS) regression</a>.</strong> These techniques are specifically designed to handle highly correlated predictor variables.</p>
<p>https://www.statology.org/multicollinearity-regression/</p>
</blockquote>
<blockquote>
<ol>
<li>手动移除出共线性的变量</li>
</ol>
<p>先做下相关分析, 如果发现某两个自变量X(解释变量)的相关系数值大于0.7, 则移除掉一个自变量(解释变量), 然后再做回归分析. 此方法是最直接的方法, 但有的时候我们不希望把某个自变量从模型中剔除, 这样就要考虑使用其他方法.</p>
<ol start="2">
<li>逐步回归法</li>
</ol>
<p>让系统自动进行自变量的选择剔除, 使用逐步回归将共线性的自变量自动剔除出去. 此种解决办法有个问题是, 可能算法会剔除掉本不想剔除的自变量, 如果有此类情况产生, 此时最好是使用岭回归进行分析.</p>
<ol start="3">
<li>增加样本容量</li>
</ol>
<p>增加样本容量是解释共线性问题的一种办法, 但在实际操作中可能并不太适合, 原因是样本量的收集需要成本时间等.</p>
<ol start="4">
<li><strong>岭回归</strong></li>
</ol>
<p>上述第1和第2种解决办法在实际研究中使用较多, 但问题在于, 如果实际研究中并不想剔除掉某些自变量, 某些自变量很重要, 不能剔除. 此时可能只有岭回归最为适合了. <strong>岭回归是当前解决共线性问题最有效的解释办法</strong>.</p>
</blockquote>
<h3 id="31-spss步进">3.1 spss步进</h3>
<figure data-type="image" tabindex="8"><a href="https://imgse.com/i/p9Uk0Sg"><img src="https://s1.ax1x.com/2023/05/05/p9Uk0Sg.png" alt="p9Uk0Sg.png" loading="lazy"></a></figure>
<p>其他的设置保持不变即可, 选择&quot;步进&quot;.</p>
<table summary="Variables Entered/Removed, 表, 1 个级别的列标题和 1 个级别的行标题, 包含 4 列 5 行的表" tabindex="0" role="grid" style="width: 340px; margin-bottom: 0px;" class="WebReportBlue PivotTable ui-selectable" aria-label="Variables Entered/Removed" data-lookname="WebReportBlue" data-rowlabelwidth="1" data-collabelheight="1" data-numrows="2" data-numcols="3" data-rowlabels="Corner" data-decimal-char="." data-col-labels="Variables Entered;Variables Removed;Method" data-row-labels="1;2" data-layer-dimension="" data-column-dimension="Details;" data-row-dimension="Model;" data-maxcolwidth="72">
<caption class="title ui-selectee" style="width:340px" title="a. Dependent Variable: TOTEMP">Variables Entered/Removed<sup class="ui-selectee">a</sup><span class="details ui-selectee"></span></caption>
<tbody class="PivotBody defaultLayer innerFrameBd ui-selectee" style="display: table;">
<tr class="ui-selectee" style="">
<td class="cornerLabels ui-selectee" data-rc="0_0" tabindex="-1">Model</td>
<td class="columnLabels dataAreaLeft vCC role3 ui-selectee" data-rc="0_1" tabindex="-1">Variables Entered</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_2" tabindex="-1">Variables Removed</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_3" tabindex="-1">Method</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels dataAreaTop role3 ui-selectee" data-rc="1_0" tabindex="-1" data-d="0">1</td>
<td class="e dataAreaTop dataAreaLeft vCC ui-selectee" data-rc="1_1" tabindex="-1" style="text-align:left;">GNP</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_2" tabindex="-1">.</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_3" tabindex="-1" style="text-align:left;">Stepwise (Criteria: Probability-of-F-to-enter &lt;= .050, Probability-of-F-to-remove &gt;= .100).</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR role3 ui-selectee" data-rc="2_0" tabindex="-1" data-d="0">2</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="2_1" tabindex="-1" style="text-align:left;">UNEMP</td>
<td class="o hCR vCC ui-selectee" data-rc="2_2" tabindex="-1">.</td>
<td class="o hCR vCC ui-selectee" data-rc="2_3" tabindex="-1" style="text-align:left;">Stepwise (Criteria: Probability-of-F-to-enter &lt;= .050, Probability-of-F-to-remove &gt;= .100).</td>
</tr>
</tbody><tfoot style="display: table-footer-group;" class="ui-selectee">
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="3_0" tabindex="-1" colspan="4">a. Dependent Variable: TOTEMP</td>
</tr>
<tr class="ui-selectee" style="">
<td tabindex="-1" style="width:52px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
</tr>
</tfoot>
</table>
<p>其关键在于, 将出现部分项被移除掉.</p>
<table summary="Excluded Variables, 表, 2 个级别的列标题和 2 个级别的行标题, 包含 9 列 15 行的表" tabindex="0" role="grid" style="width: 658px; margin-bottom: 0px;" class="WebReportBlue PivotTable ui-selectable" aria-label="Excluded Variables" data-lookname="WebReportBlue" data-rowlabelwidth="2" data-collabelheight="2" data-numrows="9" data-numcols="7" data-rowlabels="Corner" data-decimal-char="." data-col-labels="Beta In ;t ;Sig. ;Partial Correlation ;Collinearity Statistics Tolerance; VIF; Minimum Tolerance" data-row-labels="1 GNPDEFL; UNEMP; ARMED; POP; YEAR;2 GNPDEFL; ARMED; POP; YEAR" data-layer-dimension="" data-column-dimension="Statistics;" data-row-dimension="Model;Variables;" data-maxcolwidth="72">
<caption class="title ui-selectee" style="width:658px" title="a. Dependent Variable: TOTEMP">Excluded Variables<sup class="ui-selectee">a</sup><span class="details ui-selectee"></span></caption>
<tbody class="PivotBody defaultLayer innerFrameBd ui-selectee" style="display: table;">
<tr class="ui-selectee" style="">
<td class="cornerLabels ui-selectee" data-rc="0_0" tabindex="-1" rowspan="2" colspan="2">Model</td>
<td class="columnLabels dataAreaLeft hCC vCC role3 ui-selectee" data-rc="0_2" tabindex="-1" rowspan="2">Beta In</td>
<td class="columnLabels hCC vCC role3 ui-selectee" data-rc="0_3" tabindex="-1" rowspan="2">t</td>
<td class="columnLabels hCC vCC role3 ui-selectee" data-rc="0_4" tabindex="-1" rowspan="2">Sig.</td>
<td class="columnLabels hDC vCC role3 ui-selectee" data-rc="0_5" tabindex="-1" rowspan="2">Partial Correlation</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_6" tabindex="-1" colspan="3">Collinearity Statistics</td>
</tr>
<tr class="ui-selectee" style="">
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_6" tabindex="-1">Tolerance</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_7" tabindex="-1">VIF</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_8" tabindex="-1">Minimum Tolerance</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels dataAreaTop role3 ui-selectee" data-rc="2_0" tabindex="-1" data-d="0" rowspan="5">1</td>
<td class="rowLabels dataAreaTop vCR role3 ui-selectee" data-rc="2_1" tabindex="-1">GNPDEFL</td>
<td class="o dataAreaTop dataAreaLeft vCC ui-selectee" data-rc="2_2" tabindex="-1" data-f="26151478930690447" data-d="3" data-i="-" title="b. Predictors in the Model: (Constant), GNP">-.262<sup class="ui-selectee">b</sup></td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_3" tabindex="-1" data-f="6878049438957131" data-d="3" data-i="-">-.688</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_4" tabindex="-1" data-f="5036635864014257" data-d="3" data-i="0">.504</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_5" tabindex="-1" data-f="18738374706176902" data-d="3" data-i="-">-.187</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_6" tabindex="-1" data-f="01675090202413676" data-d="3">.017</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_7" tabindex="-1" data-f="69827765448553" data-d="3" data-i="59">59.698</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_8" tabindex="-1" data-f="01675090202413676" data-d="3">.017</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="3_1" tabindex="-1">UNEMP</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="3_2" tabindex="-1" data-f="14463421292531323" data-d="3" data-i="-" title="b. Predictors in the Model: (Constant), GNP">-.145<sup class="ui-selectee">b</sup></td>
<td class="e hCR vCC ui-selectee" data-rc="3_3" tabindex="-1" data-f="9874187960077796" data-d="3" data-i="-2">-2.987</td>
<td class="e hCR vCC ui-selectee" data-rc="3_4" tabindex="-1" data-f="010489617155152205" data-d="3">.010</td>
<td class="e hCR vCC ui-selectee" data-rc="3_5" tabindex="-1" data-f="6380130559230872" data-d="3" data-i="-">-.638</td>
<td class="e hCR vCC ui-selectee" data-rc="3_6" tabindex="-1" data-f="6348687165237881" data-d="3" data-i="0">.635</td>
<td class="e hCR vCC ui-selectee" data-rc="3_7" tabindex="-1" data-f="5751288006053936" data-d="3" data-i="1">1.575</td>
<td class="e hCR vCC ui-selectee" data-rc="3_8" tabindex="-1" data-f="6348687165237881" data-d="3" data-i="0">.635</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="4_1" tabindex="-1">ARMED</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="4_2" tabindex="-1" data-f="022747478661476594" data-d="3" title="b. Predictors in the Model: (Constant), GNP">.023<sup class="ui-selectee">b</sup></td>
<td class="o hCR vCC ui-selectee" data-rc="4_3" tabindex="-1" data-f="40891217171767885" data-d="3">.409</td>
<td class="o hCR vCC ui-selectee" data-rc="4_4" tabindex="-1" data-f="689260596900955" data-d="3" data-i="0">.689</td>
<td class="o hCR vCC ui-selectee" data-rc="4_5" tabindex="-1" data-f="1126894270376925" data-d="3">.113</td>
<td class="o hCR vCC ui-selectee" data-rc="4_6" tabindex="-1" data-f="8006941908446198" data-d="3" data-i="0">.801</td>
<td class="o hCR vCC ui-selectee" data-rc="4_7" tabindex="-1" data-f="2489162672020147" data-d="3">1.249</td>
<td class="o hCR vCC ui-selectee" data-rc="4_8" tabindex="-1" data-f="8006941908446197" data-d="3" data-i="0">.801</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="5_1" tabindex="-1">POP</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="5_2" tabindex="-1" data-f="8115714871256399" data-d="3" data-i="-" title="b. Predictors in the Model: (Constant), GNP">-.812<sup class="ui-selectee">b</sup></td>
<td class="e hCR vCC ui-selectee" data-rc="5_3" tabindex="-1" data-f="6932534474001053" data-d="3" data-i="-2">-2.693</td>
<td class="e hCR vCC ui-selectee" data-rc="5_4" tabindex="-1" data-f="018429492577410434" data-d="3">.018</td>
<td class="e hCR vCC ui-selectee" data-rc="5_5" tabindex="-1" data-f="5984473643300683" data-d="3" data-i="-">-.598</td>
<td class="e hCR vCC ui-selectee" data-rc="5_6" tabindex="-1" data-f="017740474220789948" data-d="3">.018</td>
<td class="e hCR vCC ui-selectee" data-rc="5_7" tabindex="-1" data-f="36827897351844" data-d="3">56.368</td>
<td class="e hCR vCC ui-selectee" data-rc="5_8" tabindex="-1" data-f="017740474220789948" data-d="3">.018</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="6_1" tabindex="-1">YEAR</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="6_2" tabindex="-1" data-f="8030565430190818" data-d="3" data-i="-" title="b. Predictors in the Model: (Constant), GNP">-.803<sup class="ui-selectee">b</sup></td>
<td class="o hCR vCC ui-selectee" data-rc="6_3" tabindex="-1" data-f="7258511278996551" data-d="3" data-i="-1">-1.726</td>
<td class="o hCR vCC ui-selectee" data-rc="6_4" tabindex="-1" data-f="10804718466682593" data-d="3">.108</td>
<td class="o hCR vCC ui-selectee" data-rc="6_5" tabindex="-1" data-f="43175212430561055" data-d="3" data-i="-">-.432</td>
<td class="o hCR vCC ui-selectee" data-rc="6_6" tabindex="-1" data-f="009430692514708738" data-d="3">.009</td>
<td class="o hCR vCC ui-selectee" data-rc="6_7" tabindex="-1" data-f="03675164261088" data-d="3">106.037</td>
<td class="o hCR vCC ui-selectee" data-rc="6_8" tabindex="-1" data-f="009430692514708738" data-d="3">.009</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR role3 ui-selectee" data-rc="7_0" tabindex="-1" data-d="0" rowspan="4">2</td>
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="7_1" tabindex="-1">GNPDEFL</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="7_2" tabindex="-1" data-f="07971572154996838" data-d="3" data-i="-" title="c. Predictors in the Model: (Constant), GNP, UNEMP">-.080<sup class="ui-selectee">c</sup></td>
<td class="e hCR vCC ui-selectee" data-rc="7_3" tabindex="-1" data-f="2520013154813871" data-d="3" data-i="-">-.252</td>
<td class="e hCR vCC ui-selectee" data-rc="7_4" tabindex="-1" data-f="8053043027231809" data-d="3" data-i="0">.805</td>
<td class="e hCR vCC ui-selectee" data-rc="7_5" tabindex="-1" data-f="07255478502407614" data-d="3" data-i="-">-.073</td>
<td class="e hCR vCC ui-selectee" data-rc="7_6" tabindex="-1" data-f="016025858029111672" data-d="3">.016</td>
<td class="e hCR vCC ui-selectee" data-rc="7_7" tabindex="-1" data-f="39915505200759" data-d="3">62.399</td>
<td class="e hCR vCC ui-selectee" data-rc="7_8" tabindex="-1" data-f="016025858029111672" data-d="3">.016</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="8_1" tabindex="-1">ARMED</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="8_2" tabindex="-1" data-f="09566322282083181" data-d="3" data-i="-" title="c. Predictors in the Model: (Constant), GNP, UNEMP">-.096<sup class="ui-selectee">c</sup></td>
<td class="o hCR vCC ui-selectee" data-rc="8_3" tabindex="-1" data-f="8920132072654718" data-d="3" data-i="-1">-1.892</td>
<td class="o hCR vCC ui-selectee" data-rc="8_4" tabindex="-1" data-f="08286080825277091" data-d="3">.083</td>
<td class="o hCR vCC ui-selectee" data-rc="8_5" tabindex="-1" data-f="479340829978801" data-d="3" data-i="-">-.479</td>
<td class="o hCR vCC ui-selectee" data-rc="8_6" tabindex="-1" data-f="48570879338364276" data-d="3">.486</td>
<td class="o hCR vCC ui-selectee" data-rc="8_7" tabindex="-1" data-f="0588468103152877" data-d="3">2.059</td>
<td class="o hCR vCC ui-selectee" data-rc="8_8" tabindex="-1" data-f="3183834168538674" data-d="3">.318</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="9_1" tabindex="-1">POP</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="9_2" tabindex="-1" data-f="304812397347397" data-d="3" data-i="-" title="c. Predictors in the Model: (Constant), GNP, UNEMP">-.305<sup class="ui-selectee">c</sup></td>
<td class="e hCR vCC ui-selectee" data-rc="9_3" tabindex="-1" data-f="5776304461977799" data-d="3" data-i="-">-.578</td>
<td class="e hCR vCC ui-selectee" data-rc="9_4" tabindex="-1" data-f="5741923944912652" data-d="3" data-i="0">.574</td>
<td class="e hCR vCC ui-selectee" data-rc="9_5" tabindex="-1" data-f="16447660924485713" data-d="3" data-i="-">-.164</td>
<td class="e hCR vCC ui-selectee" data-rc="9_6" tabindex="-1" data-f="005632746026204878" data-d="3">.006</td>
<td class="e hCR vCC ui-selectee" data-rc="9_7" tabindex="-1" data-f="53330175863806" data-d="3" data-i="177">177.533</td>
<td class="e hCR vCC ui-selectee" data-rc="9_8" tabindex="-1" data-f="005632746026204878" data-d="3">.006</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="10_1" tabindex="-1">YEAR</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="10_2" tabindex="-1" data-f="8764064094506259" data-d="3" data-i="0" title="c. Predictors in the Model: (Constant), GNP, UNEMP">.876<sup class="ui-selectee">c</sup></td>
<td class="o hCR vCC ui-selectee" data-rc="10_3" tabindex="-1" data-f="1219595649685463" data-d="3">1.122</td>
<td class="o hCR vCC ui-selectee" data-rc="10_4" tabindex="-1" data-f="28382825784872573" data-d="3">.284</td>
<td class="o hCR vCC ui-selectee" data-rc="10_5" tabindex="-1" data-f="3081237720588946" data-d="3">.308</td>
<td class="o hCR vCC ui-selectee" data-rc="10_6" tabindex="-1" data-f="0023912030522021815" data-d="3">.002</td>
<td class="o hCR vCC ui-selectee" data-rc="10_7" tabindex="-1" data-f="199533109097" data-d="3">418.200</td>
<td class="o hCR vCC ui-selectee" data-rc="10_8" tabindex="-1" data-f="0023912030522021815" data-d="3">.002</td>
</tr>
</tbody><tfoot style="display: table-footer-group;" class="ui-selectee">
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="11_0" tabindex="-1" colspan="9">a. Dependent Variable: TOTEMP</td>
</tr>
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="12_0" tabindex="-1" colspan="9">b. Predictors in the Model: (Constant), GNP</td>
</tr>
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="13_0" tabindex="-1" colspan="9">c. Predictors in the Model: (Constant), GNP, UNEMP</td>
</tr>
<tr class="ui-selectee" style="">
<td tabindex="-1" style="width:48px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:76px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:74px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
</tr>
</tfoot>
</table>
<p>剩余的项, 将生成多个模型, 这意味着如此操作将强调的是拟合的结果, 但是模型的可解释性将降低, 同时对于探索各个变量对于因变量的影响将无从存在.</p>
<p>这意味着, 对于多重共线性的处理, 是采取删除特定的干扰变量还是其他操作, 对于其他的操作, 取决对于模型的预期是什么, 关注的重点在于什么. 可以看上面的未进行处理的结果, 其拟合的数值并未受到多重共线性的问题的困扰, 只是拟合的系数无法在统计上被证明是可解释的.</p>
<table summary="Model Summary, 表, 2 个级别的列标题和 1 个级别的行标题, 包含 11 列 8 行的表" tabindex="0" role="grid" style="width: 877px; margin-bottom: 0px;" class="WebReportBlue PivotTable ui-selectable" aria-label="Model Summary" data-lookname="WebReportBlue" data-rowlabelwidth="1" data-collabelheight="2" data-numrows="2" data-numcols="10" data-rowlabels="Corner" data-decimal-char="." data-col-labels="R ;R Square ;Adjusted R Square ;Std. Error of the Estimate ;Change Statistics R Square Change; F Change; df1; df2; Sig. F Change;Durbin-Watson " data-row-labels="1;2" data-layer-dimension="" data-column-dimension="Statistics;" data-row-dimension="Model;" data-maxcolwidth="72">
<caption class="title ui-selectee" style="width:877px" title="c. Dependent Variable: TOTEMP">Model Summary<sup class="ui-selectee">c</sup><span class="details ui-selectee"></span></caption>
<tbody class="PivotBody defaultLayer innerFrameBd ui-selectee" style="display: table;">
<tr class="ui-selectee" style="">
<td class="cornerLabels ui-selectee" data-rc="0_0" tabindex="-1" rowspan="2">Model</td>
<td class="columnLabels dataAreaLeft hCC vCC role3 ui-selectee" data-rc="0_1" tabindex="-1" rowspan="2">R</td>
<td class="columnLabels hCC vCC role3 ui-selectee" data-rc="0_2" tabindex="-1" rowspan="2">R Square</td>
<td class="columnLabels hCC vCC role3 ui-selectee" data-rc="0_3" tabindex="-1" rowspan="2">Adjusted R Square</td>
<td class="columnLabels hDC vCC role3 ui-selectee" data-rc="0_4" tabindex="-1" rowspan="2">Std. Error of the Estimate</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_5" tabindex="-1" colspan="5">Change Statistics</td>
<td class="columnLabels hCC vCC role3 ui-selectee" data-rc="0_10" tabindex="-1" rowspan="2">Durbin-Watson</td>
</tr>
<tr class="ui-selectee" style="">
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_5" tabindex="-1">R Square Change</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_6" tabindex="-1">F Change</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_7" tabindex="-1">df1</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_8" tabindex="-1">df2</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_9" tabindex="-1">Sig. F Change</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels dataAreaTop role3 ui-selectee" data-rc="2_0" tabindex="-1" data-d="0">1</td>
<td class="o dataAreaTop dataAreaLeft vCC ui-selectee" data-rc="2_1" tabindex="-1" data-f="9835516111796694" data-d="3" data-i="0" title="a. Predictors: (Constant), GNP">.984<sup class="ui-selectee">a</sup></td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_2" tabindex="-1" data-f="9673737718541235" data-d="3" data-i="0">.967</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_3" tabindex="-1" data-f="9650433269865609" data-d="3" data-i="0">.965</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_4" tabindex="-1" data-f="6223183881909" data-d="4" data-i="656">656.6223</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_5" tabindex="-1" data-f="9673737718541235" data-d="3" data-i="0">.967</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_6" tabindex="-1" data-f="1026206708305" data-d="3">415.103</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_7" tabindex="-1" data-d="0">1</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_8" tabindex="-1" data-d="0">14</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_9" tabindex="-1" data-f="0000000000084" data-d="3">.000</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_10" tabindex="-1">&nbsp;</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR role3 ui-selectee" data-rc="3_0" tabindex="-1" data-d="0">2</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="3_1" tabindex="-1" data-f="9902800744239507" data-d="3" data-i="0" title="b. Predictors: (Constant), GNP, UNEMP">.990<sup class="ui-selectee">b</sup></td>
<td class="e hCR vCC ui-selectee" data-rc="3_2" tabindex="-1" data-f="9806546258011053" data-d="3" data-i="0">.981</td>
<td class="e hCR vCC ui-selectee" data-rc="3_3" tabindex="-1" data-f="9776784143858908" data-d="3" data-i="0">.978</td>
<td class="e hCR vCC ui-selectee" data-rc="3_4" tabindex="-1" data-f="7024775320992" data-d="4" data-i="524">524.7025</td>
<td class="e hCR vCC ui-selectee" data-rc="3_5" tabindex="-1" data-f="013280853946981752" data-d="3">.013</td>
<td class="e hCR vCC ui-selectee" data-rc="3_6" tabindex="-1" data-f="924671062740527" data-d="3" data-i="8">8.925</td>
<td class="e hCR vCC ui-selectee" data-rc="3_7" tabindex="-1" data-d="0">1</td>
<td class="e hCR vCC ui-selectee" data-rc="3_8" tabindex="-1" data-d="0">13</td>
<td class="e hCR vCC ui-selectee" data-rc="3_9" tabindex="-1" data-f="010489617155152363" data-d="3">.010</td>
<td class="e hCR vCC ui-selectee" data-rc="3_10" tabindex="-1" data-f="9761877084946835" data-d="3" data-i="0">.976</td>
</tr>
</tbody><tfoot style="display: table-footer-group;" class="ui-selectee">
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="4_0" tabindex="-1" colspan="11">a. Predictors: (Constant), GNP</td>
</tr>
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="5_0" tabindex="-1" colspan="11">b. Predictors: (Constant), GNP, UNEMP</td>
</tr>
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="6_0" tabindex="-1" colspan="11">c. Dependent Variable: TOTEMP</td>
</tr>
<tr class="ui-selectee" style="">
<td tabindex="-1" style="width:52px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:71px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:73px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
</tr>
</tfoot>
</table>
<table summary="Coefficients, 表, 2 个级别的列标题和 2 个级别的行标题, 包含 14 列 9 行的表" tabindex="0" role="grid" style="width: 1071px; margin-bottom: 0px;" class="WebReportBlue PivotTable ui-selectable" aria-label="Coefficients" data-lookname="WebReportBlue" data-rowlabelwidth="2" data-collabelheight="2" data-numrows="5" data-numcols="12" data-rowlabels="Corner" data-decimal-char="." data-col-labels="Unstandardized Coefficients B; Std. Error;Standardized Coefficients Beta;t ;Sig. ;95.0% Confidence Interval for B Lower Bound; Upper Bound;Correlations Zero-order; Partial; Part;Collinearity Statistics Tolerance; VIF" data-row-labels="1 (Constant); GNP;2 (Constant); GNP; UNEMP" data-layer-dimension="" data-column-dimension="Statistics;" data-row-dimension="Model;Variables;" data-maxcolwidth="72">
<caption class="title ui-selectee" style="width:1071px" title="a. Dependent Variable: TOTEMP">Coefficients<sup class="ui-selectee">a</sup><span class="details ui-selectee"></span></caption>
<tbody class="PivotBody defaultLayer innerFrameBd ui-selectee" style="display: table;">
<tr class="ui-selectee" style="">
<td class="cornerLabels ui-selectee" data-rc="0_0" tabindex="-1" rowspan="2" colspan="2">Model</td>
<td class="columnLabels dataAreaLeft hCC vCC role2 ui-selectee" data-rc="0_2" tabindex="-1" colspan="2">Unstandardized Coefficients</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_4" tabindex="-1">Standardized Coefficients</td>
<td class="columnLabels hCC vCC role3 ui-selectee" data-rc="0_5" tabindex="-1" rowspan="2">t</td>
<td class="columnLabels hDC vCC role3 ui-selectee" data-rc="0_6" tabindex="-1" rowspan="2">Sig.</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_7" tabindex="-1" colspan="2">95.0% Confidence Interval for B</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_9" tabindex="-1" colspan="3">Correlations</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_12" tabindex="-1" colspan="2">Collinearity Statistics</td>
</tr>
<tr class="ui-selectee" style="">
<td class="columnLabels dataAreaLeft vCC role3 ui-selectee" data-rc="1_2" tabindex="-1">B</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_3" tabindex="-1">Std. Error</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_4" tabindex="-1">Beta</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_7" tabindex="-1">Lower Bound</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_8" tabindex="-1">Upper Bound</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_9" tabindex="-1">Zero-order</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_10" tabindex="-1">Partial</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_11" tabindex="-1">Part</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_12" tabindex="-1">Tolerance</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_13" tabindex="-1">VIF</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels dataAreaTop role3 ui-selectee" data-rc="2_0" tabindex="-1" data-d="0" rowspan="2">1</td>
<td class="rowLabels dataAreaTop vCR role3 ui-selectee" data-rc="2_1" tabindex="-1">(Constant)</td>
<td class="o dataAreaTop dataAreaLeft vCC ui-selectee" data-rc="2_2" tabindex="-1" data-f="58978188413" data-d="3" data-i="9223">51843.590</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_3" tabindex="-1" data-f="3716363792279" data-d="3">681.372</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_4" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_5" tabindex="-1" data-f="08709698774398" data-d="3">76.087</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_6" tabindex="-1" data-f="00000000" data-d="3">.000</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_7" tabindex="-1" data-f="1929666532" data-d="3">50382.193</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_8" tabindex="-1" data-f="986597115065" data-d="3" data-i="9223">53304.987</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_9" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_10" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_11" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_12" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_13" tabindex="-1">&nbsp;</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="3_1" tabindex="-1">GNP</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="3_2" tabindex="-1" data-f="03475229434762905" data-d="3">.035</td>
<td class="e hCR vCC ui-selectee" data-rc="3_3" tabindex="-1" data-f="0017057121554843932" data-d="3">.002</td>
<td class="e hCR vCC ui-selectee" data-rc="3_4" tabindex="-1" data-f="9835516111796694" data-d="3" data-i="0">.984</td>
<td class="e hCR vCC ui-selectee" data-rc="3_5" tabindex="-1" data-f="374067357079944" data-d="3">20.374</td>
<td class="e hCR vCC ui-selectee" data-rc="3_6" tabindex="-1" data-f="0000000000084" data-d="3">.000</td>
<td class="e hCR vCC ui-selectee" data-rc="3_7" tabindex="-1" data-f="03109390562312656" data-d="3">.031</td>
<td class="e hCR vCC ui-selectee" data-rc="3_8" tabindex="-1" data-f="03841068307213153" data-d="3">.038</td>
<td class="e hCR vCC ui-selectee" data-rc="3_9" tabindex="-1" data-f="9835516111796694" data-d="3" data-i="0">.984</td>
<td class="e hCR vCC ui-selectee" data-rc="3_10" tabindex="-1" data-f="9835516111796694" data-d="3" data-i="0">.984</td>
<td class="e hCR vCC ui-selectee" data-rc="3_11" tabindex="-1" data-f="9835516111796694" data-d="3" data-i="0">.984</td>
<td class="e hCR vCC ui-selectee" data-rc="3_12" tabindex="-1" data-d="3">1.000</td>
<td class="e hCR vCC ui-selectee" data-rc="3_13" tabindex="-1" data-d="3">1.000</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR role3 ui-selectee" data-rc="4_0" tabindex="-1" data-d="0" rowspan="3">2</td>
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="4_1" tabindex="-1">(Constant)</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="4_2" tabindex="-1" data-f="1670501464" data-d="3">52382.167</td>
<td class="o hCR vCC ui-selectee" data-rc="4_3" tabindex="-1" data-f="5498646590579" data-d="3" data-i="573">573.550</td>
<td class="o hCR vCC ui-selectee" data-rc="4_4" tabindex="-1">&nbsp;</td>
<td class="o hCR vCC ui-selectee" data-rc="4_5" tabindex="-1" data-f="32975226362325" data-d="3">91.330</td>
<td class="o hCR vCC ui-selectee" data-rc="4_6" tabindex="-1" data-f="00000000000" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="4_7" tabindex="-1" data-f="0878996185" data-d="3">51143.088</td>
<td class="o hCR vCC ui-selectee" data-rc="4_8" tabindex="-1" data-f="24620067431" data-d="3">53621.246</td>
<td class="o hCR vCC ui-selectee" data-rc="4_9" tabindex="-1">&nbsp;</td>
<td class="o hCR vCC ui-selectee" data-rc="4_10" tabindex="-1">&nbsp;</td>
<td class="o hCR vCC ui-selectee" data-rc="4_11" tabindex="-1">&nbsp;</td>
<td class="o hCR vCC ui-selectee" data-rc="4_12" tabindex="-1">&nbsp;</td>
<td class="o hCR vCC ui-selectee" data-rc="4_13" tabindex="-1">&nbsp;</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="5_1" tabindex="-1">GNP</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="5_2" tabindex="-1" data-f="03784032701745016" data-d="3">.038</td>
<td class="e hCR vCC ui-selectee" data-rc="5_3" tabindex="-1" data-f="001710650368619519" data-d="3">.002</td>
<td class="e hCR vCC ui-selectee" data-rc="5_4" tabindex="-1" data-f="0709484166221055" data-d="3">1.071</td>
<td class="e hCR vCC ui-selectee" data-rc="5_5" tabindex="-1" data-f="120433088841526" data-d="3">22.120</td>
<td class="e hCR vCC ui-selectee" data-rc="5_6" tabindex="-1" data-f="0000000000106" data-d="3">.000</td>
<td class="e hCR vCC ui-selectee" data-rc="5_7" tabindex="-1" data-f="034144691578918036" data-d="3">.034</td>
<td class="e hCR vCC ui-selectee" data-rc="5_8" tabindex="-1" data-f="04153596245598228" data-d="3">.042</td>
<td class="e hCR vCC ui-selectee" data-rc="5_9" tabindex="-1" data-f="9835516111796694" data-d="3" data-i="0">.984</td>
<td class="e hCR vCC ui-selectee" data-rc="5_10" tabindex="-1" data-f="9869750508597593" data-d="3" data-i="0">.987</td>
<td class="e hCR vCC ui-selectee" data-rc="5_11" tabindex="-1" data-f="8533172338011576" data-d="3" data-i="0">.853</td>
<td class="e hCR vCC ui-selectee" data-rc="5_12" tabindex="-1" data-f="6348687165237881" data-d="3" data-i="0">.635</td>
<td class="e hCR vCC ui-selectee" data-rc="5_13" tabindex="-1" data-f="5751288006053936" data-d="3" data-i="1">1.575</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="6_1" tabindex="-1">UNEMP</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="6_2" tabindex="-1" data-f="5435743320770724" data-d="3" data-i="-">-.544</td>
<td class="o hCR vCC ui-selectee" data-rc="6_3" tabindex="-1" data-f="1819545129740346" data-d="3">.182</td>
<td class="o hCR vCC ui-selectee" data-rc="6_4" tabindex="-1" data-f="1446342129253132" data-d="3" data-i="-">-.145</td>
<td class="o hCR vCC ui-selectee" data-rc="6_5" tabindex="-1" data-f="98741879600778" data-d="3" data-i="-2">-2.987</td>
<td class="o hCR vCC ui-selectee" data-rc="6_6" tabindex="-1" data-f="010489617155152205" data-d="3">.010</td>
<td class="o hCR vCC ui-selectee" data-rc="6_7" tabindex="-1" data-f="936663158808128" data-d="3" data-i="-">-.937</td>
<td class="o hCR vCC ui-selectee" data-rc="6_8" tabindex="-1" data-f="15048550534601673" data-d="3" data-i="-">-.150</td>
<td class="o hCR vCC ui-selectee" data-rc="6_9" tabindex="-1" data-f="5024980838759942" data-d="3" data-i="0">.502</td>
<td class="o hCR vCC ui-selectee" data-rc="6_10" tabindex="-1" data-f="6380130559230873" data-d="3" data-i="-">-.638</td>
<td class="o hCR vCC ui-selectee" data-rc="6_11" tabindex="-1" data-f="11524258738409943" data-d="3" data-i="-">-.115</td>
<td class="o hCR vCC ui-selectee" data-rc="6_12" tabindex="-1" data-f="6348687165237881" data-d="3" data-i="0">.635</td>
<td class="o hCR vCC ui-selectee" data-rc="6_13" tabindex="-1" data-f="5751288006053936" data-d="3" data-i="1">1.575</td>
</tr>
</tbody><tfoot style="display: table-footer-group;" class="ui-selectee">
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="7_0" tabindex="-1" colspan="14">a. Dependent Variable: TOTEMP</td>
</tr>
<tr class="ui-selectee" style="">
<td tabindex="-1" style="width:48px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:77px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:87px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:87px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:95px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:95px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:77px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:74px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
</tr>
</tfoot>
</table>
<table summary="ANOVA, 表, 1 个级别的列标题和 2 个级别的行标题, 包含 7 列 11 行的表" tabindex="0" role="grid" style="width: 525px; margin-bottom: 0px;" class="WebReportBlue PivotTable ui-selectable" aria-label="ANOVA" data-lookname="WebReportBlue" data-rowlabelwidth="2" data-collabelheight="1" data-numrows="6" data-numcols="5" data-rowlabels="Corner" data-decimal-char="." data-col-labels="Sum of Squares;df;Mean Square;F;Sig." data-row-labels="1 Regression; Residual; Total;2 Regression; Residual; Total" data-layer-dimension="" data-column-dimension="Statistics;" data-row-dimension="Model;Source;" data-maxcolwidth="72">
<caption class="title ui-selectee" style="width:525px" title="a. Dependent Variable: TOTEMP">ANOVA<sup class="ui-selectee">a</sup><span class="details ui-selectee"></span></caption>
<tbody class="PivotBody defaultLayer innerFrameBd ui-selectee" style="display: table;">
<tr class="ui-selectee" style="">
<td class="cornerLabels ui-selectee" data-rc="0_0" tabindex="-1" colspan="2">Model</td>
<td class="columnLabels dataAreaLeft vCC role3 ui-selectee" data-rc="0_2" tabindex="-1">Sum of Squares</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_3" tabindex="-1">df</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_4" tabindex="-1">Mean Square</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_5" tabindex="-1">F</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="0_6" tabindex="-1">Sig.</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels dataAreaTop role3 ui-selectee" data-rc="1_0" tabindex="-1" data-d="0" rowspan="3">1</td>
<td class="rowLabels dataAreaTop vCR role3 ui-selectee" data-rc="1_1" tabindex="-1">Regression</td>
<td class="e dataAreaTop dataAreaLeft vCC ui-selectee" data-rc="1_2" tabindex="-1" data-f="83392325" data-d="3" data-i="178972685">178972685.834</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_3" tabindex="-1" data-d="0">1</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_4" tabindex="-1" data-f="83392325" data-d="3" data-i="178972685">178972685.834</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_5" tabindex="-1" data-f="10262067083056" data-d="3">415.103</td>
<td class="e dataAreaTop vCC ui-selectee" data-rc="1_6" tabindex="-1" data-f="0000000000084" data-d="3" title="b. Predictors: (Constant), GNP">.000<sup class="ui-selectee">b</sup></td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="2_1" tabindex="-1">Residual</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="2_2" tabindex="-1" data-f="16607676" data-d="3">6036140.166</td>
<td class="o hCR vCC ui-selectee" data-rc="2_3" tabindex="-1" data-d="0">14</td>
<td class="o hCR vCC ui-selectee" data-rc="2_4" tabindex="-1" data-f="8690054828" data-d="3" data-i="9223">431152.869</td>
<td class="o hCR vCC ui-selectee" data-rc="2_5" tabindex="-1">&nbsp;</td>
<td class="o hCR vCC ui-selectee" data-rc="2_6" tabindex="-1">&nbsp;</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="3_1" tabindex="-1">Total</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="3_2" tabindex="-1" data-f="185008826" data-d="3">185008826.000</td>
<td class="e hCR vCC ui-selectee" data-rc="3_3" tabindex="-1" data-d="0">15</td>
<td class="e hCR vCC ui-selectee" data-rc="3_4" tabindex="-1">&nbsp;</td>
<td class="e hCR vCC ui-selectee" data-rc="3_5" tabindex="-1">&nbsp;</td>
<td class="e hCR vCC ui-selectee" data-rc="3_6" tabindex="-1">&nbsp;</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR role3 ui-selectee" data-rc="4_0" tabindex="-1" data-d="0" rowspan="3">2</td>
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="4_1" tabindex="-1">Regression</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="4_2" tabindex="-1" data-f="0309318" data-d="3">181429761.031</td>
<td class="o hCR vCC ui-selectee" data-rc="4_3" tabindex="-1" data-d="0">2</td>
<td class="o hCR vCC ui-selectee" data-rc="4_4" tabindex="-1" data-f="5154659" data-d="3" data-i="90714880">90714880.515</td>
<td class="o hCR vCC ui-selectee" data-rc="4_5" tabindex="-1" data-f="49763608456794" data-d="3">329.498</td>
<td class="o hCR vCC ui-selectee" data-rc="4_6" tabindex="-1" data-f="0000000000073" data-d="3" title="c. Predictors: (Constant), GNP, UNEMP">.000<sup class="ui-selectee">c</sup></td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="5_1" tabindex="-1">Residual</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="5_2" tabindex="-1" data-f="9690682" data-d="3" data-i="9223">3579064.969</td>
<td class="e hCR vCC ui-selectee" data-rc="5_3" tabindex="-1" data-d="0">13</td>
<td class="e hCR vCC ui-selectee" data-rc="5_4" tabindex="-1" data-f="6899283231" data-d="3" data-i="9223">275312.690</td>
<td class="e hCR vCC ui-selectee" data-rc="5_5" tabindex="-1">&nbsp;</td>
<td class="e hCR vCC ui-selectee" data-rc="5_6" tabindex="-1">&nbsp;</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="6_1" tabindex="-1">Total</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="6_2" tabindex="-1" data-f="185008826" data-d="3">185008826.000</td>
<td class="o hCR vCC ui-selectee" data-rc="6_3" tabindex="-1" data-d="0">15</td>
<td class="o hCR vCC ui-selectee" data-rc="6_4" tabindex="-1">&nbsp;</td>
<td class="o hCR vCC ui-selectee" data-rc="6_5" tabindex="-1">&nbsp;</td>
<td class="o hCR vCC ui-selectee" data-rc="6_6" tabindex="-1">&nbsp;</td>
</tr>
</tbody><tfoot style="display: table-footer-group;" class="ui-selectee">
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="7_0" tabindex="-1" colspan="7">a. Dependent Variable: TOTEMP</td>
</tr>
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="8_0" tabindex="-1" colspan="7">b. Predictors: (Constant), GNP</td>
</tr>
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="9_0" tabindex="-1" colspan="7">c. Predictors: (Constant), GNP, UNEMP</td>
</tr>
<tr class="ui-selectee" style="">
<td tabindex="-1" style="width:48px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:84px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
</tr>
</tfoot>
</table>
删除变量的操作, 往往在实际中是不可行的.
<h3 id="32-岭回归">3.2 岭回归</h3>
<blockquote>
<p>岭回归是一种专用于共线性数据分析的有偏估计回归方法, 实质上是一种改良的最小二乘估计法. 通过放弃最小二乘法的<strong>无偏性</strong>, 以损失部分信息, 降低精度为代价获得回归系数更为符合实际(<em>更符合因果推断</em>), 更可靠的回归方法, 对<strong>病态数据</strong>的拟合要强于最小二乘法.</p>
</blockquote>
<p>即, 有别于最小二乘, 岭回归(<code>Ridge regression</code>)是有偏估计.</p>
<figure data-type="image" tabindex="9"><a href="https://imgse.com/i/p9atO7q"><img src="https://s1.ax1x.com/2023/05/06/p9atO7q.png" alt="p9atO7q.png" loading="lazy"></a></figure>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mover accent="true"><mi>β</mi><mo>^</mo></mover><mi>λ</mi></msub><mo>=</mo><mo>(</mo><msup><mi>X</mi><mi>T</mi></msup><mi>X</mi><mo>+</mo><mi>α</mi><msub><mi>I</mi><mi>n</mi></msub><msup><mo>)</mo><mrow><mo>−</mo><mn>1</mn></mrow></msup><msup><mi>X</mi><mi>T</mi></msup><mi>y</mi><mspace linebreak="newline"></mspace><msub><mi>I</mi><mi>n</mi></msub><mo>=</mo><mrow><mo fence="true">[</mo><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo>⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo>⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">⋮</mi><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">⋮</mi><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo>⋱</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">⋮</mi><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo>⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo separator="true">,</mo><mi>n</mi><mo>=</mo><mi mathvariant="normal">自</mi><mi mathvariant="normal">变</mi><mi mathvariant="normal">量</mi><mi mathvariant="normal">数</mi><mo>+</mo><mn>1</mn><mspace linebreak="newline"></mspace><mi>α</mi><mo separator="true">,</mo><mi mathvariant="normal">岭</mi><mi mathvariant="normal">参</mi><mo>(</mo><mi mathvariant="normal">系</mi><mo>)</mo><mi mathvariant="normal">数</mi><mo>(</mo><mi mathvariant="normal">为</mi><mi mathvariant="normal">了</mi><mi mathvariant="normal">方</mi><mi mathvariant="normal">便</mi><mi mathvariant="normal">表</mi><mi mathvariant="normal">示</mi><mo separator="true">,</mo><mi mathvariant="normal">不</mi><mi mathvariant="normal">采</mi><mi mathvariant="normal">用</mi><mi mathvariant="normal">书</mi><mi mathvariant="normal">籍</mi><mi mathvariant="normal">的</mi><mi>λ</mi><mi mathvariant="normal">或</mi><mi mathvariant="normal">者</mi><mi>k</mi><mo>)</mo><mspace linebreak="newline"></mspace><mi>α</mi><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mi mathvariant="normal">即</mi><mi mathvariant="normal">为</mi><mi mathvariant="normal">普</mi><mi mathvariant="normal">通</mi><mi mathvariant="normal">最</mi><mi mathvariant="normal">小</mi><mi mathvariant="normal">二</mi><mi mathvariant="normal">乘</mi></mrow><annotation encoding="application/x-tex">\hat{\beta}_{\lambda} = (X^TX + \alpha I_n)^{-1}X^Ty\\
I_n = \begin{bmatrix}
1 &amp; 0 &amp; \cdots &amp; 0\\
0 &amp; 1 &amp; \cdots &amp; 0\\
\vdots&amp;\vdots &amp; \ddots &amp; \vdots\\
0 &amp; 0 &amp; \cdots  &amp; 1
\end{bmatrix}, n = 自变量数 + 1
\\
\alpha,岭参(系)数(为了方便表示, 不采用书籍的\lambda或者k)\\
\alpha = 0, 即为普通最小二乘
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1523199999999998em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9578799999999998em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">λ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913309999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:5.459999999999999em;vertical-align:-2.4799999999999995em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.953005em;"><span style="top:-1.3499850000000007em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-2.5049850000000005em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.1059850000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-3.7069850000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎢</span></span></span><span style="top:-4.953005em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.4500349999999997em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9799999999999995em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.7674999999999996em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675000000000006em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.4799999999999995em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9799999999999995em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.7674999999999996em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675000000000006em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.4799999999999995em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9799999999999995em;"><span style="top:-5.64em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋯</span></span></span><span style="top:-4.44em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋯</span></span></span><span style="top:-2.5799999999999996em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋱</span></span></span><span style="top:-1.3800000000000006em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋯</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.4799999999999995em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.9799999999999995em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.7674999999999996em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675000000000006em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.4799999999999995em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.953005em;"><span style="top:-1.3499850000000007em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-2.5049850000000005em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.1059850000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-3.7069850000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎥</span></span></span><span style="top:-4.953005em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.4500349999999997em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">自</span><span class="mord cjk_fallback">变</span><span class="mord cjk_fallback">量</span><span class="mord cjk_fallback">数</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">岭</span><span class="mord cjk_fallback">参</span><span class="mopen">(</span><span class="mord cjk_fallback">系</span><span class="mclose">)</span><span class="mord cjk_fallback">数</span><span class="mopen">(</span><span class="mord cjk_fallback">为</span><span class="mord cjk_fallback">了</span><span class="mord cjk_fallback">方</span><span class="mord cjk_fallback">便</span><span class="mord cjk_fallback">表</span><span class="mord cjk_fallback">示</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">不</span><span class="mord cjk_fallback">采</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">书</span><span class="mord cjk_fallback">籍</span><span class="mord cjk_fallback">的</span><span class="mord mathdefault">λ</span><span class="mord cjk_fallback">或</span><span class="mord cjk_fallback">者</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">即</span><span class="mord cjk_fallback">为</span><span class="mord cjk_fallback">普</span><span class="mord cjk_fallback">通</span><span class="mord cjk_fallback">最</span><span class="mord cjk_fallback">小</span><span class="mord cjk_fallback">二</span><span class="mord cjk_fallback">乘</span></span></span></span></span></p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mi>s</mi><mi>s</mi><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo>(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><msup><mo>)</mo><mn>2</mn></msup><mspace linebreak="newline"></mspace><mi>r</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>r</mi><mi>i</mi><mi>d</mi><mi>g</mi><mi>e</mi></mrow></msub><mo>=</mo><mi>r</mi><mi>s</mi><mi>s</mi><mo>+</mo><mi>α</mi><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><msubsup><mi>β</mi><mi>i</mi><mn>2</mn></msubsup><mspace linebreak="newline"></mspace><mo>=</mo><mi>r</mi><mi>s</mi><mi>s</mi><mo>+</mo><mi>α</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>β</mi><mi mathvariant="normal">∣</mi><msup><mi mathvariant="normal">∣</mi><mn>2</mn></msup><mspace linebreak="newline"></mspace><msub><mi>β</mi><mi>i</mi></msub><mo separator="true">,</mo><mi mathvariant="normal">是</mi><mi mathvariant="normal">总</mi><mi mathvariant="normal">计</mi><mi>n</mi><mi mathvariant="normal">个</mi><mi mathvariant="normal">特</mi><mi mathvariant="normal">征</mi><mi mathvariant="normal">中</mi><mi mathvariant="normal">第</mi><mi>i</mi><mi mathvariant="normal">个</mi><mi mathvariant="normal">特</mi><mi mathvariant="normal">征</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">系</mi><mi mathvariant="normal">数</mi><mspace linebreak="newline"></mspace><mi>α</mi><mo separator="true">,</mo><mi mathvariant="normal">是</mi><mi mathvariant="normal">超</mi><mi mathvariant="normal">参</mi><mi mathvariant="normal">数</mi><mo separator="true">,</mo><mi mathvariant="normal">调</mi><mi mathvariant="normal">节</mi><msub><mi>β</mi><mi>i</mi></msub><mi mathvariant="normal">的</mi><mi mathvariant="normal">惩</mi><mi mathvariant="normal">罚</mi><mi mathvariant="normal">强</mi><mi mathvariant="normal">度</mi><mspace linebreak="newline"></mspace><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>β</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mo separator="true">,</mo><mtext>  </mtext><mi mathvariant="normal">为</mi><mi>L</mi><mn>2</mn><mi mathvariant="normal">范</mi><mi mathvariant="normal">数</mi><mspace linebreak="newline"></mspace><mi>α</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi><mi mathvariant="normal">∣</mi><msup><mi mathvariant="normal">∣</mi><mn>2</mn></msup><mo separator="true">,</mo><mtext>  </mtext><mi mathvariant="normal">为</mi><mi mathvariant="normal">惩</mi><mi mathvariant="normal">罚</mi><mi mathvariant="normal">项</mi><mtext>(shrinkage penalty)</mtext></mrow><annotation encoding="application/x-tex">rss = \sum_{i = 1} ^ n (y_i - \hat{y}) ^ 2\\

rss_{ridge} = rss + \alpha\sum_{i=0}^n\beta_i^2\\
= rss + \alpha||\beta||^2\\
β_i, 是总计n个特征中第i个特征的系数\\
\alpha, 是超参数, 调节\beta_i的惩罚强度\\
||\beta||, \;为L2范数\\
\alpha||beta||^2,\;为惩罚项\text{(shrinkage penalty)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.19444em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mord">∣</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">总</span><span class="mord cjk_fallback">计</span><span class="mord mathdefault">n</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">特</span><span class="mord cjk_fallback">征</span><span class="mord cjk_fallback">中</span><span class="mord cjk_fallback">第</span><span class="mord mathdefault">i</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">特</span><span class="mord cjk_fallback">征</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">系</span><span class="mord cjk_fallback">数</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">超</span><span class="mord cjk_fallback">参</span><span class="mord cjk_fallback">数</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">调</span><span class="mord cjk_fallback">节</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">惩</span><span class="mord cjk_fallback">罚</span><span class="mord cjk_fallback">强</span><span class="mord cjk_fallback">度</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mord">∣</span><span class="mord">∣</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord cjk_fallback">为</span><span class="mord mathdefault">L</span><span class="mord">2</span><span class="mord cjk_fallback">范</span><span class="mord cjk_fallback">数</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mord">∣</span><span class="mord">∣</span><span class="mord mathdefault">b</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord cjk_fallback">为</span><span class="mord cjk_fallback">惩</span><span class="mord cjk_fallback">罚</span><span class="mord cjk_fallback">项</span><span class="mord text"><span class="mord">(shrinkage penalty)</span></span></span></span></span></span></p>
<p><a href="https://imgse.com/i/p9sAhKx"><img src="https://s1.ax1x.com/2023/05/11/p9sAhKx.png" alt="p9sAhKx.png" loading="lazy"></a><br>
<a href="https://imgse.com/i/p9sA4r6"><img src="https://s1.ax1x.com/2023/05/11/p9sA4r6.png" alt="p9sA4r6.png" loading="lazy"></a></p>
<p>(<em>图: Python机器学习基础教程-岭回归</em>)</p>
<h3 id="33-spss的问题">3.3 spss的问题</h3>
<p><code>spss(26)</code>原生是不支持岭回归的, 但在<code>回归 - 最优标度</code>下是有一个岭回归, 但是需要注意这个岭回归却不适用于独立的岭回归.</p>
<p><a href="https://imgse.com/i/p9Uh0XR"><img src="https://s1.ax1x.com/2023/05/06/p9Uh0XR.png" alt="p9Uh0XR.png" loading="lazy"></a><br>
<a href="https://imgse.com/i/p9Uhr0x"><img src="https://s1.ax1x.com/2023/05/06/p9Uhr0x.png" alt="p9Uhr0x.png" loading="lazy"></a></p>
<figure data-type="image" tabindex="10"><a href="https://imgse.com/i/p9U4UVP"><img src="https://s1.ax1x.com/2023/05/06/p9U4UVP.png" alt="p9U4UVP.png" loading="lazy"></a></figure>
<p>(<em>图: spss不少这种同名的操作, 但是实现的功能不一样, 对于不熟悉spss者, 很容易形成误导</em>)</p>
<p>这不是重点, <code>spss</code>虽然在图形界面菜单上不支持岭回归, 但是其可以调用外部的脚本实现岭回归计算.</p>
<pre><code class="language-bash">INCLUDE 'C:\Program Files\IBM\SPSS\Statistics\26\Samples\English\Ridge regression.sps'.
ridgereg enter=GNPDEFL GNP UNEMP ARMED POP YEAR
/dep=TOTEMP
/start=0
/stop=1
/inc=0.02
/k=999.
EXECUTE.
</code></pre>
<pre><code class="language-bash">&gt;Error # 5332 in column 14.  Text: rr__tmp1.sav
&gt;The specified file or directory is read-only and cannot be written to.  The
&gt;file will not be saved.  Save the file with another name or to a different
&gt;location or change the access permissions first.
&gt;Execution of this command stops.
NOTE: ALL OUTPUT INCLUDING ERROR MESSAGES HAVE BEEN TEMPORARILY
SUPPRESSED. IF YOU EXPERIENCE UNUSUAL BEHAVIOR, RERUN THIS
MACRO WITH AN ADDITIONAL ARGUMENT /DEBUG='Y'.
BEFORE DOING THIS YOU SHOULD RESTORE YOUR DATA FILE.
THIS WILL FACILITATE FURTHER DIAGNOSIS OF ANY PROBLEMS.
</code></pre>
<p>但是却是无法执行独立的脚本命令.</p>
<p>这个错误, 离谱得让人难以置信.</p>
<p><code>spss</code>在执行这个脚本时, 需要在安装目录下进行写入得操作? what the f**k?</p>
<p>这是特么什么鬼操作, 往安装目录下进行写入操作? 为什么要在安装目录进行?(<em>这是什么脑回路才想出这种机制?</em>)</p>
<p>特么不知道<strong>正常的用户权限</strong>是无法进行直接的操作?(系统盘的目录)</p>
<figure data-type="image" tabindex="11"><a href="https://imgse.com/i/p9Uhwc9"><img src="https://s1.ax1x.com/2023/05/06/p9Uhwc9.png" alt="p9Uhwc9.png" loading="lazy"></a></figure>
<p>(<em>图: IBM官方文档</em>)</p>
<p>这里就要提一下spss的智障设计, 不清楚这种设计逻辑是为了什么目的.</p>
<p>spss那些临时数据的处理逻辑, 为什么要经常在原数据上增加新的列, 或者一定要展示出一些经过变换的临时数据?(这些数据假如spss后续处理需要使用, 不能放在缓存文件? 需要用户保存的, 难道就不能额外的保存提醒? 还有关闭窗口的逻辑也是奇葩....当你不断的修改代码尝试或者其他操作尝试时, 每次执行就新生成一个窗口来展示新的数据, 关闭然后不停的弹窗, 关闭又切换回文档输出窗口...卖得这么贵的产品就不能稍微优化一下执行的交互逻辑?)</p>
<figure data-type="image" tabindex="12"><a href="https://imgse.com/i/p9U4W5T"><img src="https://s1.ax1x.com/2023/05/06/p9U4W5T.png" alt="p9U4W5T.png" loading="lazy"></a></figure>
<p>(<em>图: 执行之后, 原文件被直接关闭, 生成新的数据...神操作, 假如操作出问题, 不停生成...</em>)</p>
<p>由于关于<code>spss</code>进行岭回归操作的检索内容很少, 不清楚spss的骚操作应该如何解决.</p>
<figure data-type="image" tabindex="13"><a href="https://imgse.com/i/p9U5jwq"><img src="https://s1.ax1x.com/2023/05/06/p9U5jwq.png" alt="p9U5jwq.png" loading="lazy"></a></figure>
<p>(<em>图: 进行这么简单的操作, 却要修改系统文件夹下权限, 那只能表示对SPSS佩服</em>)</p>
<p>有意思的是 spss 在这个问题上的后续处理是直接采用 <code>sklearn</code> 的方案</p>
<figure data-type="image" tabindex="14"><a href="https://imgse.com/i/p9DsC0P"><img src="https://s1.ax1x.com/2023/05/10/p9DsC0P.png" alt="p9DsC0P.png" loading="lazy"></a></figure>
<p><em>最新版本spss(29) 新增特性</em></p>
<h3 id="34-python的处理">3.4 python的处理</h3>
<p><em>从以下示例, 也可以看到, python在处理这个问题相对于spss的优势.</em></p>
<p><em>相比于spss这类型商业软件对问题反应迟缓, 开源软件在迭代速度上往往是更快, 同时大量开源开发者的参与, 针对各类型问题的响应速度步进更快, 而且考虑的范围也更广, 例如R语言的最前沿的数学问题解决包的出现速度, python更为完善的生态支持等.</em></p>
<h4 id="341-矩阵">3.4.1 矩阵</h4>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt
from sklearn.metrics import mean_squared_error

# numpy支持直接从文本中读取数组, 表头的文本内容 =&gt; nan
data = np.genfromtxt(&quot;longley_data_set.csv&quot;, delimiter=',')

x_data = data[1:, 1:]

y_data = data[1:, 0, np.newaxis]

alpha = 0.1

X_data = np.concatenate((np.ones((16, 1)), x_data), axis=1)

x_mat = np.mat(X_data)
y_mat = np.mat(y_data)

# 即将上述的数学公式转为矩阵的形式.

# np.eye =&gt; 生成指定大小的单位矩阵
theta = (x_mat.T * x_mat + np.eye(x_mat.shape[1]) * alpha).I * x_mat.T * y_mat

predit_y = np.mat(X_data) * np.mat(theta)

# 自由度 df = 16 - 6(特征数) - 1
# 计算残差的
# np.sqrt(mean_squared_error(y_data, predit_y) / 9 )

mean_squared_error(y_data, predit_y)
141113.86039558204, 这里的计算, 虽然相对于未处理前, 大幅缩小, 但是相比于下面的sklearn的计算的结果还是相差较大
836424.056, 未做任何处理

theta
matrix([[ -6.54257318],
        [-52.72655774],
        [  0.07101763],
        [ -0.42411374],
        [ -0.57272164],
        [ -0.41373894],
        [ 48.39169094]])
</code></pre>
<h4 id="342-sklearn">3.4.2 sklearn</h4>
<pre><code class="language-python">class sklearn.linear_model.RidgeCV(
    alphas=(0.1, 1.0, 10.0),
    *,
    fit_intercept=True,
    scoring=None,
    cv=None,
    gcv_mode=None,
    store_cv_values=False,
    alpha_per_target=False
)
</code></pre>
<blockquote>
<p>Ridge regression with built-in cross-validation.</p>
<p>See glossary entry for <a href="https://scikit-learn.org/stable/glossary.html#term-cross-validation-estimator">cross-validation estimator</a>.</p>
<p>By default, it performs efficient <strong>Leave-One-Out Cross-Validation</strong>.</p>
</blockquote>
<pre><code class="language-python">from sklearn import linear_model

# 随手设置的alpha值
model_a = linear_model.Ridge(alpha=0.1)
model_b = linear_model.RidgeCV(alphas=(0.1, 1, 10))
model_a.fit(x_data, y_data)
model_b.fit(x_data, y_data)

y_predict_a = model_a.predict(x_data)
y_predict_b = model_b.predict(x_data)

print(model_a.coef_)
print(model_a.intercept_)
print(model_b.coef_)
print(model_b.intercept_)
print(mean_squared_error(y_data, y_predict_a))
print(mean_squared_error(y_data, y_predict_b))

[[ 3.44253865e+00 -1.61357602e-02 -1.72517591e+00 -9.46934801e-01
  -1.15461194e-01  1.49532386e+03]]
[-2829852.40891406]

[[ 3.44253865e+00 -1.61281377e-02 -1.72517589e+00 -9.46934742e-01
  -1.15460695e-01  1.49532386e+03]]
[-2829855.42304054]

55396.63452063982

55397.17761139471
</code></pre>
<h5 id="3421-α-的确定">3.4.2.1 α 的确定</h5>
<pre><code class="language-python"># 寻找最佳的alpha

alphas_list = np.linspace(0.001, 1)
model = linear_model.RidgeCV(
    alphas=alphas_list,
    store_cv_values=True
)
model.fit(x_data, y_data)
print(model.alpha_)
</code></pre>
<pre><code class="language-python"># 绘制出内容

mc = min(model.cv_values_.mean(axis=0).reshape(-1))
ma = model.alpha_
plt.figure(figsize=(10, 6))
plt.plot(alphas_list, model.cv_values_.mean(axis=0).reshape(-1))
plt.plot(ma, mc,'go')
plt.text(ma, mc, str(ma))
plt.title(f'alpha - lost')
plt.show()
</code></pre>
<figure data-type="image" tabindex="15"><a href="https://imgse.com/i/p9arK0g"><img src="https://s1.ax1x.com/2023/05/06/p9arK0g.png" alt="p9arK0g.png" loading="lazy"></a></figure>
<pre><code class="language-python"># 将参数改为 ma

model_a = linear_model.Ridge(alpha=ma)
model_b = linear_model.RidgeCV(alphas=(ma, 1, 10))
model_a.fit(x_data, y_data)
model_b.fit(x_data, y_data)

y_predict_a = model_a.predict(x_data)
y_predict_b = model_b.predict(x_data)

print(model_a.coef_)
print(model_a.intercept_)
print(model_b.coef_)
print(model_b.intercept_)
print(mean_squared_error(y_data, y_predict_a))
print(mean_squared_error(y_data, y_predict_b))

[[ 7.28591578e+00 -2.26714123e-02 -1.82315635e+00 -9.75591287e-01
  -9.41080434e-02  1.60622534e+03]]
[-3046586.09163307]
[[ 7.28591578e+00 -2.26616193e-02 -1.82315629e+00 -9.75591208e-01
  -9.41073370e-02  1.60622534e+03]]
[-3046589.97171322]

# k值缩小, mse值进一步缩小
53667.89859907044
53668.79585776975
</code></pre>
<h5 id="3422-ridge参数">3.4.2.2 Ridge参数</h5>
<pre><code class="language-python">class sklearn.linear_model.Ridge(
    alpha=1.0,
    *,
    fit_intercept=True,
    copy_X=True,
    max_iter=None,
    tol=0.0001,
    solver='auto',
    positive=False,
    random_state=None
)
</code></pre>
<blockquote>
<p><strong>alpha</strong>*{float, ndarray of shape (n_targets,)}, default=1.0*</p>
<p>核心参数</p>
<p>Constant that multiplies the L2 term, controlling regularization strength. <code>alpha</code> must be a non-negative float i.e. in <code>[0, inf)</code>.</p>
<p>When <code>alpha = 0</code>, the objective is equivalent to ordinary least squares, solved by the <a href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html#sklearn.linear_model.LinearRegression"><code>LinearRegression</code></a> object. For numerical reasons, using <code>alpha = 0</code> with the <code>Ridge</code> object is not advised. Instead, you should use the <a href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html#sklearn.linear_model.LinearRegression"><code>LinearRegression</code></a> object.</p>
<p>If an array is passed, penalties are assumed to be specific to the targets. Hence they must correspond in number.</p>
<p><strong>fit_intercept</strong><em>bool, default=True</em></p>
<p>保持默认即可, 截距</p>
<p>Whether to fit the intercept for this model. If set to false, no intercept will be used in calculations (i.e. <code>X</code> and <code>y</code> are expected to be centered).</p>
<p><strong>copy_X</strong><em>bool, default=True</em></p>
<p>保持默认即可</p>
<p>If True, X will be copied; else, it may be overwritten.</p>
<p><strong>max_iter</strong><em>int, default=None</em></p>
<p>最大的迭代次数</p>
<p>Maximum number of iterations for conjugate gradient solver. <strong>For ‘sparse_cg’ and ‘lsqr’ solvers</strong>, the default value is determined by scipy.sparse.linalg. For ‘sag’ solver, the default value is 1000. <strong>For ‘lbfgs’ solver</strong>, the default value is 15000.</p>
<p>不同的解析器, 迭代的方式和次数不一样</p>
<p><strong>tol</strong><em>float, default=1e-4</em></p>
<p>解决的精度, 注意不是所有的解析器都生效</p>
<p>Precision of the solution. <strong>Note</strong> that <code>tol</code> has <strong>no effect</strong> for solvers ‘svd’ and ‘cholesky’.</p>
<p><em>Changed in version 1.2:</em> Default value changed from 1e-3 to 1e-4 for consistency with other linear models.</p>
<p><strong>solver</strong>*{‘auto’, ‘svd’, ‘cholesky’, ‘lsqr’, ‘sparse_cg’, ‘sag’, ‘saga’, ‘lbfgs’}, default=’auto’*</p>
<p>解析器</p>
<p>Solver to use in the computational routines:</p>
<ul>
<li>
<p>‘auto’ chooses the solver automatically based on the type of data.</p>
</li>
<li>
<p>‘<strong>svd</strong>’ uses a <strong>Singular Value Decomposition of X</strong> to compute the Ridge coefficients. <strong>It is the most stable solver</strong>, in particular more stable for singular matrices than ‘<strong>cholesky</strong>’ at the cost of being slower.</p>
</li>
</ul>
<p>最可靠的解析器</p>
<ul>
<li>
<p>‘<strong>cholesky</strong>’ uses the standard scipy.linalg.solve function to obtain a closed-form solution.</p>
</li>
<li>
<p><strong>‘sparse_cg</strong>’ uses the conjugate gradient solver as found in scipy.sparse.linalg.cg. As an iterative algorithm, this solver is more appropriate than ‘cholesky’ for large-scale data (possibility to set <code>tol</code> and <code>max_iter</code>).</p>
</li>
<li>
<p>‘<strong>lsqr</strong>’ uses the dedicated regularized least-squares routine scipy.sparse.linalg.lsqr. It is the fastest and uses an iterative procedure.</p>
</li>
<li>
<p>‘<strong>sag</strong>’ uses a Stochastic Average Gradient descent, and ‘saga’ uses its improved, unbiased version named SAGA. Both methods also use an iterative procedure, and are often faster than other solvers when both n_samples and n_features are large. Note that ‘sag’ and ‘saga’ fast convergence is only guaranteed on features with approximately the same scale. You can preprocess the data with a scaler from sklearn.preprocessing.</p>
</li>
</ul>
<p>使用随机平均梯度下降</p>
<ul>
<li>‘<strong>lbfgs</strong>’ uses L-BFGS-B algorithm implemented in <code>scipy.optimize.minimize</code>. It can be used only when <code>positive</code> is True.</li>
</ul>
<blockquote>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>auto</td>
<td>根据数据类型自动选择求解器</td>
</tr>
<tr>
<td>svd</td>
<td>利用X的奇异值分解来计算脊系数. 对于奇异矩阵比&quot; cholesky&quot; 更稳定.</td>
</tr>
<tr>
<td>cholesky</td>
<td>使用标准scipy.linalg.solve去得到一个闭合解</td>
</tr>
<tr>
<td>sparse_cg</td>
<td>使用在scipy.sparse.linalg.cg中发现的共轭梯度求解器. 作为一种迭代算法 这个求解器比&quot; cholesky&quot; 更适合于大规模数据(可以设置tol和max_iter).</td>
</tr>
<tr>
<td>lsqr</td>
<td>使用专用正规化最小二乘的常规scipy.sparse.linalg.lsqr. 它是最快的 但可能不能用旧的scipy版本. 它还使用了一个迭代过程.</td>
</tr>
<tr>
<td>sag</td>
<td>saga使用随机平均梯度下降改进的 没有偏差的版本 名字为SAGA. 这两种方法都使用可迭代的过程 当n_samples和n_feature都很大时 它们通常比其他解决程序更快. 请注意 &quot; sag&quot; 和&quot; saga&quot; 快速收敛只在具有大致相同规模的特性上得到保证. 您可以通过sklearn.preprocessing对数据进行预处理.</td>
</tr>
</tbody>
</table>
</blockquote>
<p>All solvers except ‘svd’ support both dense and sparse data. However, only ‘lsqr’, ‘sag’, ‘sparse_cg’, and ‘lbfgs’ support sparse input when <code>fit_intercept</code> is True.</p>
<p><em>New in version 0.17:</em> Stochastic Average Gradient descent solver.</p>
<p><em>New in version 0.19:</em> SAGA solver.</p>
<p><strong>positive</strong><em>bool, default=False</em></p>
<p>When set to <code>True</code>, forces the coefficients to be positive. Only ‘lbfgs’ solver is supported in this case.</p>
<p>拟合系数是否强制为正数, lbfgs专属参数</p>
<p><strong>random_state</strong><em>int, RandomState instance, default=None</em></p>
<p>随机种子</p>
<p>Used when <code>solver</code> == ‘sag’ or ‘saga’ to shuffle the data. See <a href="https://scikit-learn.org/stable/glossary.html#term-random_state">Glossary</a> for details.</p>
<p><em>New in version 0.17:</em> <code>random_state</code> to support Stochastic Average Gradient.</p>
</blockquote>
<pre><code class="language-python"># 使用网格搜索来查找参数
from sklearn.model_selection import RepeatedKFold, GridSearchCV

# 从上面的参数来看, 主要的参数, 还有个迭代次数
param = {
    'solver':['svd', 'cholesky', 'lsqr', 'sag'],
    'alpha': np.linspace(0.001, 300),
    'fit_intercept':[True, False]
}

cv = RepeatedKFold(n_splits=10, n_repeats=3, random_state=42)

search = GridSearchCV(
    model,
    param,
    scoring='neg_mean_absolute_error',
    n_jobs=-1,
    cv=cv
)
# execute search
result = search.fit(x, y)

print('Best Score: %s' % result.best_score_)
print('Best Hyperparameters: %s' % result.best_params_)

Best Score: -323.02597732757374
Best Hyperparameters: {'alpha': 0.062163265306122456, 'fit_intercept': True, 'solver': 'svd'}
</code></pre>
<h4 id="343-相关性矩阵">3.4.3 相关性矩阵</h4>
<pre><code class="language-python"># rowvar, 默认为true, 每行代表一个变量
np.corrcoef(x_data, rowvar=False)

# 可以看到数据之间的关联, 可以看到大部分数据之间存在高度关联 &gt; 0.9
array([[ 1.        ,  0.99158918,  0.62063339,  0.46474419,  0.97916343,
         0.99114919],
       [ 0.99158918,  1.        ,  0.60426094,  0.44643679,  0.99109007,
         0.99527348],
       [ 0.62063339,  0.60426094,  1.        , -0.17742063,  0.68655152,
         0.6682566 ],
       [ 0.46474419,  0.44643679, -0.17742063,  1.        ,  0.36441627,
         0.41724515],
       [ 0.97916343,  0.99109007,  0.68655152,  0.36441627,  1.        ,
         0.99395285],
       [ 0.99114919,  0.99527348,  0.6682566 ,  0.41724515,  0.99395285,
         1.        ]])
</code></pre>
<h4 id="344-vif计算">3.4.4 VIF计算</h4>
<p>需要借助<code>statsmodels</code>.</p>
<pre><code class="language-python">from statsmodels.stats.outliers_influence import variance_inflation_factor as vif
from statsmodels.tools.tools import add_constant

# 等价于 np.concatenate((np.ones((16, 1)), x_data), axis=1)
X = add_constant(x_data)

# 因为第一列是辅助列(常量), 所以从1开始
[vif(X, i) for i in range(1, X.shape[1])]

[135.53243828000979,
 1788.5134827179431,
 33.61889059605199,
 3.588930193444781,
 399.1510223127205,
 758.9805974067326]
</code></pre>
<h4 id="345-岭迹图">3.4.5 岭迹图</h4>
<figure data-type="image" tabindex="16"><a href="https://imgse.com/i/p9ddFeJ"><img src="https://s1.ax1x.com/2023/05/07/p9ddFeJ.png" alt="p9ddFeJ.png" loading="lazy"></a></figure>
<blockquote>
<ol>
<li>岭迹图的很多细节 很难以解释. 比如为什么多重共线性存在会使得线与线之间有很多交点? 当 α 很大之后 看上去所有的系数都很接近于0 难道不是那时候线之间的交点最多吗?</li>
<li>岭迹图的评判标准 非常模糊. 哪里才是最佳的喇叭口? 哪里才是所谓的系数开始变得&quot; 平稳&quot; 的时候? 一千个读者一千个哈姆雷雷特的画像? 未免也太不严谨了.<br>
难得一提的机器学习发展历史: 过时的岭迹图.<br>
其实 岭迹图会有这样的问题不难理解. 岭回归最初始由Hoerl和Kennard在1970提出来用来改进多重共线性问题的模型 在这篇1970年的论文中 两位作者提出了岭迹图并且向广大学者推荐这种方法 然而遭到了许多人的批评和反抗. 大家接受了岭回归 却鲜少接受岭迹图 这使得岭回归被发明了50年之后 市面上关于岭迹图的教材依然只有1970年年的论文中写的那几句话.</li>
</ol>
</blockquote>
<figure data-type="image" tabindex="17"><a href="https://imgse.com/i/p9ddBwj"><img src="https://s1.ax1x.com/2023/05/07/p9ddBwj.png" alt="p9ddBwj.png" loading="lazy"></a></figure>
<p>综合多方面的资料来看, 岭迹图并不是确定岭参数的很好选择(<em>这一点某种程度上应该有所注意, 即一些传统的数理统计在出现之初, 受限于当时的计算能力(或者其他的时代问题), 为了减少计算上的困难, 开发出的一些技巧未必满足当下的情况, 或者说还适合当下的&quot;大数据&quot;, 算力空前提升的现状吗? 需要注意早期的数理统计不管是数据的采集还是相关的计算, 相关工具都是非常有限的.</em>).</p>
<pre><code class="language-python">alphas = np.linspace(0.001, 1)
clf = linear_model.Ridge(fit_intercept=False)

coefs = []
for a in alphas:
    clf.set_params(alpha=a)
    clf.fit(x_data, data[1:, 0])
    coefs.append(clf.coef_)

plt.figure(figsize=(10, 6))
ax = plt.gca()
ax.set_prop_cycle('color', ['b', 'r', 'g', 'c', 'k', 'y'])

ax.plot(alphas, coefs)
# 缩放x坐标
ax.set_xscale('log')
# 反转x轴, 方便看数据
ax.set_xlim(ax.get_xlim()[::-1])
plt.xlabel('alpha')
plt.ylabel('weights')
plt.title('Ridge coefficients - regularization')
plt.axis('tight')
plt.show()
</code></pre>
<figure data-type="image" tabindex="18"><a href="https://imgse.com/i/p9d0kP1"><img src="https://s1.ax1x.com/2023/05/07/p9d0kP1.png" alt="p9d0kP1.png" loading="lazy"></a></figure>
<p>(图: <code>alphas = np.linspace(0.001, 1)</code>)</p>
<p>出现这种情况时, 如何通过图来确定参数?</p>
<figure data-type="image" tabindex="19"><a href="https://imgse.com/i/p9d0Pa9"><img src="https://s1.ax1x.com/2023/05/07/p9d0Pa9.png" alt="p9d0Pa9.png" loading="lazy"></a></figure>
<p>(图: <code>alphas = np.linspace(0.001, 300)</code>)</p>
<figure data-type="image" tabindex="20"><a href="https://imgse.com/i/p9dhOjH"><img src="https://s1.ax1x.com/2023/05/07/p9dhOjH.png" alt="p9dhOjH.png" loading="lazy"></a></figure>
<h4 id="346-计算的差异">3.4.6 计算的差异</h4>
<p>假如仔细阅读代码, 就会发现, 使用<code>normal equations</code>(即上述的矩阵方程)计算出来的结果和使用sklearn的计算结果差异不管是系数还是拟合结果的mse值都相差巨大.</p>
<pre><code class="language-python"># 使用normal equations的计算结果

matrix([[ -6.54257318],
        [-52.72655774],
        [  0.07101763],
        [ -0.42411374],
        [ -0.57272164],
        [ -0.41373894],
        [ 48.39169094]])

# 使用Ridge()计算结果
[[ 7.28591578e+00 -2.26714123e-02 -1.82315635e+00 -9.75591287e-01
  -9.41080434e-02  1.60622534e+03]]
[-3046586.09163307]
</code></pre>
<p>暂时先不管上面的计算差异, 再仔细阅读<code>sklearn</code>的文档, 会发现, 除了<code>Ridge()</code>这个大写开头的岭回归, 底部还有一个小写的<code>ridge_regression</code>.</p>
<figure data-type="image" tabindex="21"><a href="https://imgse.com/i/p9DPu6S"><img src="https://s1.ax1x.com/2023/05/10/p9DPu6S.png" alt="p9DPu6S.png" loading="lazy"></a></figure>
<pre><code class="language-bash"># Ridge的描述

Linear least squares with l2 regularization.

Minimizes the objective function:

||y - Xw||^2_2 + alpha * ||w||^2_2
This model solves a regression model where the loss function is the linear least squares function and regularization is given by the l2-norm. Also known as Ridge Regression or Tikhonov regularization. This estimator has built-in support for multi-variate regression (i.e., when y is a 2d-array of shape (n_samples, n_targets)).
</code></pre>
<p>关于这两个api这部分描述内容很有迷惑性.</p>
<h5 id="3461-rigde_regression">3.4.6.1 rigde_regression</h5>
<pre><code class="language-bash"># rigde_regression的描述

Solve the ridge equation by the method of normal equations.

linear_model.ridge_regression(
    X,
    y,
    alpha,
    *,
    sample_weight=None,
    solver='auto',
    max_iter=None,
    tol=0.001,
    verbose=0,
    positive=False,
    random_state=None,
    return_n_iter=False,
    return_intercept=False,
    check_input=True,
)
</code></pre>
<pre><code class="language-python"># 计算结果和矩阵的计算结果一致

result = linear_model.ridge_regression(
    X_data,
    y_data,
    alpha=0.062163265306122456,
    solver='svd'
)
result

array([ -6.54257626, -52.72655771,   0.07101763,  -0.42411374,
        -0.57272164,  -0.41373894,  48.39169094])
</code></pre>
<figure data-type="image" tabindex="22"><a href="https://imgse.com/i/p9DPv7j"><img src="https://s1.ax1x.com/2023/05/10/p9DPv7j.png" alt="p9DPv7j.png" loading="lazy"></a></figure>
<figure data-type="image" tabindex="23"><a href="https://imgse.com/i/p9DPzAs"><img src="https://s1.ax1x.com/2023/05/10/p9DPzAs.png" alt="p9DPzAs.png" loading="lazy"></a></figure>
<p><a href="https://blog.csdn.net/MoreAction_/article/details/125004112">图来源: 详解岭回归与L2正则化</a></p>
<p><code>Ridge()</code>声称, 使用<code>l2 regularization</code>来实现最小化的拟合, 但是在前面的数学推导部分, 已经阐述了<code>L2</code>正则化和<code>normal equations</code>之间的关系.</p>
<p>难道出现了理解上的偏差, 再看<code>ridge_regression</code>, 这个<code>api</code>的返回结果, 只有下面内容, 连拟合结果都没有.</p>
<blockquote>
<p><strong>coef</strong><em>ndarray of shape (n_features,) or (n_targets, n_features)</em></p>
<p>Weight vector(s).</p>
<p><strong>n_iter</strong><em>int, optional</em></p>
<p>The actual number of iteration performed by the solver. Only returned if <code>return_n_iter</code> is True.</p>
<p><strong>intercept</strong><em>float or ndarray of shape (n_targets,)</em></p>
<p>The intercept of the model. Only returned if <code>return_intercept</code> is True and if X is a scipy sparse array.</p>
</blockquote>
<p>看上去这个<code>api</code>更像是<code>Ridge</code>的弱化版本, 但是<code>sklearn</code>为什么在有了<code>Ridge</code>还要提供一个看似鸡肋的<code>api</code>呢?.</p>
<p>检索了<code>bing/cn.bing</code>, 完全找不到关于<code>ridge_regression</code>的使用介绍, 甚至于完全没有找到和这个关键字<strong>完全匹配</strong>的信息.</p>
<p>反复确认, 上面的推导的矩阵没有任何问题, 同时使用<code>statsmodels</code>佐证矩阵的计算没有问题.</p>
<h5 id="3462-statsmodels">3.4.6.2 statsmodels</h5>
<pre><code class="language-python"># 不直接支持 ridge
from statsmodels.regression.linear_model import OLS

# fit_regularized, 只有两种选择, 弹性网络和lasso
OLS(y_data, X_data).fit_regularized(
    alpha=0.062163265306122456,
    L1_wt=0 # 当L1惩罚系数为0时, 等价于下面的内容
).params

# 计算上有一些差异, 但是和矩阵的计算结果很接近
array([ -0.38681832, -49.00196643,   0.070243  ,  -0.43313836,
        -0.57483107,  -0.40723044,  47.97496524])

# 二者是等价的
OLS(y_data, X_data)._fit_ridge(
     alpha=0.062163265306122456
).params

array([ -0.38681832, -49.00196643,   0.070243  ,  -0.43313836,
        -0.57483107,  -0.40723044,  47.97496524])
</code></pre>
<p><code>sklearn</code>文档中, 关于岭回归的演示使用的也是<code>Ridge</code>, 显然这才是<code>sklearn</code>解决岭回归的<code>api</code>, 为什么<code>sklearn</code>回提供两种在名称上, 功能上难以分清楚, 但是计算结果差异很大的<code>api</code>呢?..</p>
<h5 id="3463-svd">3.4.6.3 svd</h5>
<p>根据上面<code>Ridge</code>的计算参数, 其使用的<code>svd</code>(<em>Singular Value Decomposition</em>)奇异值分解方式来求解岭回归的, 难道这里有什么猫腻?</p>
<pre><code class="language-python">#  svd, 奇异值分解的 normal equations
def ridge(A, b, alphas):
    &quot;&quot;&quot;
    Return coefficients for regularized least squares

         min ||A x - b||^2 + alpha ||x||^2

    Parameters
    ----------
    A : array, shape (n, p)
    b : array, shape (n,)
    alphas : array, shape (k,)

    Returns
    -------
    coef: array, shape (p, k)
    &quot;&quot;&quot;
    # numpy 提供svd分解的支持
    U, s, Vt = np.linalg.svd(A, full_matrices=False)
    d = s / (s[:, np.newaxis].T ** 2 + alphas[:, np.newaxis])
    return np.dot(d * U.T.dot(b), Vt).T

ridge(X_data, y_data, np.array([0.062163265306122456]))

# 计算结果还是和常规的normal equations的计算一致
array([[ -6.54257626],
       [-52.72655771],
       [  0.07101763],
       [ -0.42411374],
       [ -0.57272164],
       [ -0.41373894],
       [ 48.39169094]])
</code></pre>
<p>显然, 上述的两种计算差异, 提供的结果应该都是没问题的, 那么问题的差异在什么地方呢?</p>
<p>甚至怀疑到了矩阵之间的运算导致的数据精度丢失, 逐层累加, 导致的严重偏差.....(<em>主要被<code>normalize</code>这个参数所干扰, 一直没注意到<code>fit_intercept=True</code>这个参数</em>)</p>
<figure data-type="image" tabindex="24"><a href="https://imgse.com/i/p9DAmNj"><img src="https://s1.ax1x.com/2023/05/10/p9DAmNj.png" alt="p9DAmNj.png" loading="lazy"></a></figure>
<p>但显然上述数据, 还不足以累积如此夸张的偏差.</p>
<ul>
<li><a href="https://stats.stackexchange.com/questions/396914/why-is-computing-ridge-regression-with-a-cholesky-decomposition-much-quicker-tha">Why is computing ridge regression with a Cholesky decomposition much quicker than using SVD? - Cross Validated (stackexchange.com)</a></li>
<li><a href="https://xavierbourretsicotte.github.io/intro_ridge.html">Ridge regression and L2 regularization - Introduction -  Data Blog (xavierbourretsicotte.github.io)</a></li>
<li><a href="https://sthalles.github.io/svd-for-regression/">Understanding Linear Regression using the Singular Value Decomposition - Thalles' blog (sthalles.github.io)</a></li>
</ul>
<h4 id="347-源码的解读">3.4.7 源码的解读</h4>
<p>在排除掉所有的不可能之后, 那么剩下的就是真相了 - 数据在拟合之前被预处理了.</p>
<p>从源代码下手分析, 两个<code>api()</code>之间的差异.</p>
<p><strong>ridge_regression</strong></p>
<pre><code class="language-python"># ridge_regression

def ridge_regression(
    X,
    y,
    alpha,
    *,
    sample_weight=None,
    solver=&quot;auto&quot;,
    max_iter=None,
    tol=1e-3,
    verbose=0,
    positive=False,
    random_state=None,
    return_n_iter=False,
    return_intercept=False,
    check_input=True,
):
        return _ridge_regression(
        X,
        y,
        alpha,
        sample_weight=sample_weight,
        solver=solver,
        max_iter=max_iter,
        tol=tol,
        verbose=verbose,
        positive=positive,
        random_state=random_state,
        return_n_iter=return_n_iter,
        return_intercept=return_intercept,
        X_scale=None,
        X_offset=None,
        check_input=check_input,
    )
</code></pre>
<p>显然这个<code>ridge_regression</code>, <code>api</code>只是外壳, 实际的执行是<code>_ridge_regression</code>这个<code>function</code></p>
<pre><code class="language-python">class Ridge(MultiOutputMixin, RegressorMixin, _BaseRidge):
        def __init__(
        self,
        alpha=1.0,
        *,
        fit_intercept=True,
        normalize=&quot;deprecated&quot;,
        copy_X=True,
        max_iter=None,
        tol=1e-3,
        solver=&quot;auto&quot;,
        positive=False,
        random_state=None,
    ):
        super().__init__(
            alpha=alpha,
            fit_intercept=fit_intercept,
            normalize=normalize,
            copy_X=copy_X,
            max_iter=max_iter,
            tol=tol,
            solver=solver,
            positive=positive,
            random_state=random_state,
        )

    def fit(self, X, y, sample_weight=None):
        _accept_sparse = _get_valid_accept_sparse(sparse.issparse(X), self.solver)
        X, y = self._validate_data(
            X,
            y,
            accept_sparse=_accept_sparse,
            dtype=[np.float64, np.float32],
            multi_output=True,
            y_numeric=True,
        )
        # 关键点在于此处
        # 调用父类的同名function
        return super().fit(X, y, sample_weight=sample_weight)
</code></pre>
<p>找到父类:</p>
<pre><code class="language-python">class _BaseRidge(LinearModel, metaclass=ABCMeta):
    @abstractmethod
    def __init__(
        self,
        alpha=1.0,
        *,
        fit_intercept=True,
        normalize=&quot;deprecated&quot;,
        copy_X=True,
        max_iter=None,
        tol=1e-3,
        solver=&quot;auto&quot;,
        positive=False,
        random_state=None,
    ):
        self.alpha = alpha
        self.fit_intercept = fit_intercept
        self.normalize = normalize
        self.copy_X = copy_X
        self.max_iter = max_iter
        self.tol = tol
        self.solver = solver
        self.positive = positive
        self.random_state = random_state

    def fit(self, X, y, sample_weight=None):

        self._normalize = _deprecate_normalize(
            self.normalize, default=False, estimator_name=self.__class__.__name__
        )

        if self.solver == &quot;lbfgs&quot; and not self.positive:
            raise ValueError(
                &quot;'lbfgs' solver can be used only when positive=True. &quot;
                &quot;Please use another solver.&quot;
            )

        if self.positive:
            if self.solver not in [&quot;auto&quot;, &quot;lbfgs&quot;]:
                raise ValueError(
                    f&quot;solver='{self.solver}' does not support positive fitting. Please&quot;
                    &quot; set the solver to 'auto' or 'lbfgs', or set `positive=False`&quot;
                )
            else:
                solver = self.solver
        elif sparse.issparse(X) and self.fit_intercept:
            if self.solver not in [&quot;auto&quot;, &quot;lbfgs&quot;, &quot;lsqr&quot;, &quot;sag&quot;, &quot;sparse_cg&quot;]:
                raise ValueError(
                    &quot;solver='{}' does not support fitting the intercept &quot;
                    &quot;on sparse data. Please set the solver to 'auto' or &quot;
                    &quot;'lsqr', 'sparse_cg', 'sag', 'lbfgs' &quot;
                    &quot;or set `fit_intercept=False`&quot;.format(self.solver)
                )
            if self.solver in [&quot;lsqr&quot;, &quot;lbfgs&quot;]:
                solver = self.solver
            elif self.solver == &quot;sag&quot; and self.max_iter is None and self.tol &gt; 1e-4:
                warnings.warn(
                    '&quot;sag&quot; solver requires many iterations to fit '
                    &quot;an intercept with sparse inputs. Either set the &quot;
                    'solver to &quot;auto&quot; or &quot;sparse_cg&quot;, or set a low '
                    '&quot;tol&quot; and a high &quot;max_iter&quot; (especially if inputs are '
                    &quot;not standardized).&quot;
                )
                solver = &quot;sag&quot;
            else:
                solver = &quot;sparse_cg&quot;
        else:
            solver = self.solver

        if sample_weight is not None:
            sample_weight = _check_sample_weight(sample_weight, X, dtype=X.dtype)

        if self.max_iter is not None:
            self.max_iter = check_scalar(
                self.max_iter, &quot;max_iter&quot;, target_type=numbers.Integral, min_val=1
            )

        self.tol = check_scalar(self.tol, &quot;tol&quot;, target_type=numbers.Real, min_val=0.0)

        # when X is sparse we only remove offset from y
        X, y, X_offset, y_offset, X_scale = _preprocess_data(
            X,
            y,
            self.fit_intercept,
            self._normalize,
            self.copy_X,
            sample_weight=sample_weight,
        )

        if solver == &quot;sag&quot; and sparse.issparse(X) and self.fit_intercept:
            self.coef_, self.n_iter_, self.intercept_ = _ridge_regression(
                X,
                y,
                alpha=self.alpha,
                sample_weight=sample_weight,
                max_iter=self.max_iter,
                tol=self.tol,
                solver=&quot;sag&quot;,
                positive=self.positive,
                random_state=self.random_state,
                return_n_iter=True,
                return_intercept=True,
                check_input=False,
            )
            # add the offset which was subtracted by _preprocess_data
            self.intercept_ += y_offset

        else:
            if sparse.issparse(X) and self.fit_intercept:
                # required to fit intercept with sparse_cg and lbfgs solver
                params = {&quot;X_offset&quot;: X_offset, &quot;X_scale&quot;: X_scale}
            else:
                # for dense matrices or when intercept is set to 0
                params = {}

        # 关键在于此
            self.coef_, self.n_iter_ = _ridge_regression(
                X,
                y,
                alpha=self.alpha,
                sample_weight=sample_weight,
                max_iter=self.max_iter,
                tol=self.tol,
                solver=solver,
                positive=self.positive,
                random_state=self.random_state,
                return_n_iter=True,
                return_intercept=False,
                check_input=False,
                fit_intercept=self.fit_intercept,
                **params,
            )
            self._set_intercept(X_offset, y_offset, X_scale)

        return self
</code></pre>
<p>关键点来了, 父类中, 最终调用执行的实际<code>function</code>: <code>self.coef_, self.n_iter_ = _ridge_regression</code>, 即<code>Ridge(), ridge_regression()</code>二者实际上调用的是同一<code>function</code>, 那么问题就很简单了, 即二者在调用时, 只是传入的参数的差异, 只需要找到参数的差异即可.</p>
<pre><code class="language-python"># 断点调节
# 回溯, 可以看到, 调用之前
# X, y在计算前, 做了数据的预处理
X, y, X_offset, y_offset, X_scale = _preprocess_data(
            X,
            y,
            self.fit_intercept,
            self._normalize,
            self.copy_X,
            sample_weight=sample_weight,
)
</code></pre>
<p>找到预处理的方式的源码:</p>
<pre><code class="language-python">def _preprocess_data(
    X,
    y,
    fit_intercept,
    normalize=False,
    copy=True,
    sample_weight=None,
    check_input=True,
):
        if isinstance(sample_weight, numbers.Number):
        sample_weight = None
    if sample_weight is not None:
        sample_weight = np.asarray(sample_weight)

    if check_input:
        X = check_array(X, copy=copy, accept_sparse=[&quot;csr&quot;, &quot;csc&quot;], dtype=FLOAT_DTYPES)
    elif copy:
        if sp.issparse(X):
            X = X.copy()
        else:
            X = X.copy(order=&quot;K&quot;)

    y = np.asarray(y, dtype=X.dtype)

    if fit_intercept:
        if sp.issparse(X):
            X_offset, X_var = mean_variance_axis(X, axis=0, weights=sample_weight)
        else:
            if normalize:
                X_offset, X_var, _ = _incremental_mean_and_var(
                    X,
                    last_mean=0.0,
                    last_variance=0.0,
                    last_sample_count=0.0,
                    sample_weight=sample_weight,
                )
            else:
                X_offset = np.average(X, axis=0, weights=sample_weight)

            X_offset = X_offset.astype(X.dtype, copy=False)
            X -= X_offset

        if normalize:
            X_var = X_var.astype(X.dtype, copy=False)
            # Detect constant features on the computed variance, before taking
            # the np.sqrt. Otherwise constant features cannot be detected with
            # sample weights.
            constant_mask = _is_constant_feature(X_var, X_offset, X.shape[0])
            if sample_weight is None:
                X_var *= X.shape[0]
            else:
                X_var *= sample_weight.sum()
            X_scale = np.sqrt(X_var, out=X_var)
            X_scale[constant_mask] = 1.0
            if sp.issparse(X):
                inplace_column_scale(X, 1.0 / X_scale)
            else:
                X /= X_scale
        else:
            X_scale = np.ones(X.shape[1], dtype=X.dtype)

        y_offset = np.average(y, axis=0, weights=sample_weight)
        y = y - y_offset
    else:
        X_offset = np.zeros(X.shape[1], dtype=X.dtype)
        X_scale = np.ones(X.shape[1], dtype=X.dtype)
        if y.ndim == 1:
            y_offset = X.dtype.type(0)
        else:
            y_offset = np.zeros(y.shape[1], dtype=X.dtype)

    return X, y, X_offset, y_offset, X_scale
</code></pre>
<p>由于标准化处理已经被<code>sklearn</code>废弃(在<code>Ridge</code>中), <code>normalize</code>这部分的代码可以跳过, 可以很快找到处理的方式</p>
<pre><code class="language-python">X_offset = X_offset.astype(X.dtype, copy=False)
X -= X_offset

y_offset = np.average(y, axis=0, weights=sample_weight)
y = y - y_offset
</code></pre>
<p>即, 数据在计算前, 做了中心化预处理.</p>
<h5 id="3471-数据中心化处理">3.4.7.1 数据中心化处理</h5>
<p>数据中心化处理, 即<code>Mean-subtraction</code>, <code>Zero-centered</code>.</p>
<figure data-type="image" tabindex="25"><a href="https://imgse.com/i/p9DQlFK"><img src="https://s1.ax1x.com/2023/05/10/p9DQlFK.png" alt="p9DQlFK.png" loading="lazy"></a></figure>
<p>中心化转换后的数据:</p>
<ul>
<li>均值为 0</li>
<li>数据中心位于原点(0, 0, 附近)</li>
</ul>
<p>中心化处理的目的, 通常为: 提高拟合的精度, <a href="https://blog.csdn.net/mooneve/article/details/81943904">加快收敛的速度</a>.</p>
<blockquote>
<p>In regression, it is often recommended to <strong>center</strong> the variables so that the predictors have mean 0. This makes it easier to interpret the intercept term as <strong>the expected value of Yi when the predictor values are set to their means</strong>.</p>
</blockquote>
<ul>
<li><a href="https://stats.stackexchange.com/questions/29781/when-conducting-multiple-regression-when-should-you-center-your-predictor-varia">When conducting multiple regression, when should you center your predictor variables &amp; when should you standardize them?</a></li>
</ul>
<h5 id="3472-验证">3.4.7.2 验证</h5>
<pre><code class="language-python"># 注意这里X_data, 增加了一列常数项, x_data
result = linear_model.ridge_regression(
    X_data - np.average(X_data, axis=0),
    y_data - np.average(y_data, axis=0),
    alpha=0.062163265306122456,
    solver='svd'
)
result

array([ 0.00000000e+00,  7.28591578e+00, -2.26714123e-02, -1.82315635e+00,
       -9.75591287e-01, -9.41080434e-02,  1.60622534e+03])
</code></pre>
<p>即得到了和<code>Ridge()</code>的一样的结果.</p>
<pre><code class="language-python"># 同理, 将fit_intercept设置为false, 即可得到normal equations的计算结果

cfs = {
    'alpha': 0.062163265306122456,
    'fit_intercept': False,
    'solver': 'svd'
}

model_a = linear_model.Ridge(**cfs)

model_a.fit(X_data, y_data)

y_predict_a = model_a.predict(X_data)

print(model_a.coef_)
print(model_a.intercept_)

[ -6.54257626 -52.72655771   0.07101763  -0.42411374  -0.57272164
  -0.41373894  48.39169094]
0.0
</code></pre>
<p>但是还是没想明白, 为什么<code>sklearn</code>需要给<code>normal equations</code>整一个单独的<code> ridge_regression function()</code>, 历史遗留问题?</p>
<h2 id="四-拓展思考">四. 拓展思考</h2>
<p>拓展思考, 前面的计算拟合的数值的<code>mse</code>看起来还是很大, 用没有更好的算法可以有更好的拟合效果呢?(<em>更小的mse</em>)</p>
<pre><code class="language-python">from sklearn.ensemble import GradientBoostingRegressor as gbr
</code></pre>
<blockquote>
<p>Gradient Boosting for regression.</p>
<p>This estimator builds an additive model in a forward stage-wise fashion; it allows for the optimization of arbitrary differentiable loss functions. In each stage a regression tree is fit on the negative gradient of the given loss function.</p>
</blockquote>
<pre><code class="language-python">class sklearn.ensemble.GradientBoostingRegressor(
    *,
    loss='squared_error',
    learning_rate=0.1,
    n_estimators=100,
    subsample=1.0,
    criterion='friedman_mse',
    min_samples_split=2,
    min_samples_leaf=1,
    min_weight_fraction_leaf=0.0,
    max_depth=3,
    min_impurity_decrease=0.0,
    init=None,
    random_state=None,
    max_features=None,
    alpha=0.9,
    verbose=0,
    max_leaf_nodes=None,
    warm_start=False,
    validation_fraction=0.1,
    n_iter_no_change=None,
    tol=0.0001,
    ccp_alpha=0.0
)
</code></pre>
<pre><code class="language-python"># 关于 friedman_mse的定义, sklearn的源码

cdef class FriedmanMSE(MSE):
    &quot;&quot;&quot;Mean squared error impurity criterion with improvement score by Friedman.
    Uses the formula (35) in Friedman's original Gradient Boosting paper:
        diff = mean_left - mean_right
        improvement = n_left * n_right * diff^2 / (n_left + n_right)
    &quot;&quot;&quot;

    cdef double proxy_impurity_improvement(self) noexcept nogil:
        &quot;&quot;&quot;Compute a proxy of the impurity reduction.
        This method is used to speed up the search for the best split.
        It is a proxy quantity such that the split that maximizes this value
        also maximizes the impurity improvement. It neglects all constant terms
        of the impurity decrease for a given split.
        The absolute impurity improvement is only computed by the
        impurity_improvement method once the best split has been found.
        &quot;&quot;&quot;
        cdef double total_sum_left = 0.0
        cdef double total_sum_right = 0.0

        cdef SIZE_t k
        cdef double diff = 0.0

        for k in range(self.n_outputs):
            total_sum_left += self.sum_left[k]
            total_sum_right += self.sum_right[k]

        diff = (self.weighted_n_right * total_sum_left -
                self.weighted_n_left * total_sum_right)

        return diff * diff / (self.weighted_n_left * self.weighted_n_right)
</code></pre>
<p>这里使用<code>sklearn</code>的集成学习(<em>ensemble learning</em>)模块的<code>GradientBoostingRegressor</code>来拟合数据.</p>
<pre><code class="language-python">g = gbr()

g.fit(x_data, y_data)

y_g_p = g.predict(x_data)

g.score(x_data, y_data)
# 0.9999999946671028

# mse
mean_squared_error(y_data, y_g_p)
# 0.061664565452762096

g.feature_importances_
array([0.41136217, 0.06815005, 0.00925716, 0.03311645, 0.16694385,
       0.31117032])

# 回看前面的岭回归拟合结果
[[ 7.28591578e+00 -2.26714123e-02 -1.82315635e+00 -9.75591287e-01
  -9.41080434e-02  1.60622534e+03]]
# 常数项
[-3046586.09163307]
# mse
53667.89859907044

## 对数据标准化之后, 得到的标准化拟合系数
[[ 0.00649597 -0.62167948 -0.48346993 -0.19363754 -0.20970801  2.19567379]]

# normal equations的计算结果
theta
matrix([[ -6.54257318],
        [-52.72655774],
        [  0.07101763],
        [ -0.42411374],
        [ -0.57272164],
        [ -0.41373894],
        [ 48.39169094]])
# 141113.63888591542
</code></pre>
<p>就数值而言, 可以看到<code>gbr</code>的拟合结果<strong>几乎完全等于</strong>原数值, 是不是意味着其他的模型都是弱鸡, 完全可以用这个更强大的工具来拟合数值.</p>
<p>先回顾一下, 线性-回归的目的在于搞清什么问题, 回归系数代表的是什么含义?</p>
<figure data-type="image" tabindex="26"><a href="https://imgse.com/i/p90FqL4"><img src="https://s1.ax1x.com/2023/05/08/p90FqL4.png" alt="p90FqL4.png" loading="lazy"></a></figure>
<figure data-type="image" tabindex="27"><a href="https://imgse.com/i/p90AZB4"><img src="https://s1.ax1x.com/2023/05/08/p90AZB4.png" alt="p90AZB4.png" loading="lazy"></a></figure>
<p>同时还需要理解<code>feature_importances_</code>在机器学习种的内在含义:</p>
<blockquote>
<p>There are indeed several ways to get feature &quot;importances&quot;. As often, there is no strict consensus about what this word means.</p>
<p>In scikit-learn, we implement the importance as described in [1] (often cited, but unfortunately rarely read...). It is sometimes called &quot;gini importance&quot; or &quot;mean decrease impurity&quot; and is defined as the total decrease in node impurity (weighted by the probability of reaching that node (which is approximated by the proportion of samples reaching that node)) averaged over all trees of the ensemble.</p>
<p>In the literature or in some other packages, you can also find feature importances implemented as the &quot;mean decrease accuracy&quot;. Basically, the idea is to measure the decrease in accuracy on OOB data when you randomly permute the values for that feature. If the decrease is low, then the feature is not important, and vice-versa.</p>
<p>(Note that both algorithms are available in the randomForest R package.)</p>
<p>[1]: Breiman, Friedman, &quot;Classification and regression trees&quot;, 1984.</p>
<ul>
<li>https://stackoverflow.com/questions/15810339/how-are-feature-importances-in-randomforestclassifier-determined/15821880#15821880</li>
</ul>
</blockquote>
<pre><code class="language-bash">TOTEMP - Total Employment
GNPDEFL - GNP deflator
GNP - GNP
UNEMP - Number of unemployed
ARMED - Size of armed forces
POP - Population
YEAR - Year (1947 - 1962)

https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/longley.html

A data frame with 7 economical variables, observed yearly from 1947 to 1962 (n=16n=16).

GNP.deflator 物价相关
GNP implicit price deflator (1954=1001954=100)

GNP 国民生产总值
Gross National Product.

Unemployed, 失业人数
number of unemployed.

Armed.Forces, 军队服役
number of people in the armed forces.

Population, 14岁及以上人口
‘noninstitutionalized’ population \ge≥ 14 years of age.

Year, 年
the year (time).

Employed, 就业人数
number of people employed.

The regression lm(Employed ~ .) is known to be highly collinear.
</code></pre>
<table>
<thead>
<tr>
<th>TOTEMP</th>
<th>GNPDEFL</th>
<th>GNP</th>
<th>UNEMP</th>
<th>ARMED</th>
<th>POP</th>
<th>YEAR</th>
</tr>
</thead>
<tbody>
<tr>
<td>60323</td>
<td>83</td>
<td>234289</td>
<td>2356</td>
<td>1590</td>
<td>107608</td>
<td>1947</td>
</tr>
<tr>
<td>61122</td>
<td>88.5</td>
<td>259426</td>
<td>2325</td>
<td>1456</td>
<td>108632</td>
<td>1948</td>
</tr>
<tr>
<td>60171</td>
<td>88.2</td>
<td>258054</td>
<td>3682</td>
<td>1616</td>
<td>109773</td>
<td>1949</td>
</tr>
<tr>
<td>61187</td>
<td>89.5</td>
<td>284599</td>
<td>3351</td>
<td>1650</td>
<td>110929</td>
<td>1950</td>
</tr>
<tr>
<td>63221</td>
<td>96.2</td>
<td>328975</td>
<td>2099</td>
<td>3099</td>
<td>112075</td>
<td>1951</td>
</tr>
<tr>
<td>63639</td>
<td>98.1</td>
<td>346999</td>
<td>1932</td>
<td>3594</td>
<td>113270</td>
<td>1952</td>
</tr>
<tr>
<td>64989</td>
<td>99</td>
<td>365385</td>
<td>1870</td>
<td>3547</td>
<td>115094</td>
<td>1953</td>
</tr>
<tr>
<td>63761</td>
<td>100</td>
<td>363112</td>
<td>3578</td>
<td>3350</td>
<td>116219</td>
<td>1954</td>
</tr>
<tr>
<td>66019</td>
<td>101.2</td>
<td>397469</td>
<td>2904</td>
<td>3048</td>
<td>117388</td>
<td>1955</td>
</tr>
<tr>
<td>67857</td>
<td>104.6</td>
<td>419180</td>
<td>2822</td>
<td>2857</td>
<td>118734</td>
<td>1956</td>
</tr>
<tr>
<td>68169</td>
<td>108.4</td>
<td>442769</td>
<td>2936</td>
<td>2798</td>
<td>120445</td>
<td>1957</td>
</tr>
<tr>
<td>66513</td>
<td>110.8</td>
<td>444546</td>
<td>4681</td>
<td>2637</td>
<td>121950</td>
<td>1958</td>
</tr>
<tr>
<td>68655</td>
<td>112.6</td>
<td>482704</td>
<td>3813</td>
<td>2552</td>
<td>123366</td>
<td>1959</td>
</tr>
<tr>
<td>69564</td>
<td>114.2</td>
<td>502601</td>
<td>3931</td>
<td>2514</td>
<td>125368</td>
<td>1960</td>
</tr>
<tr>
<td>69331</td>
<td>115.7</td>
<td>518173</td>
<td>4806</td>
<td>2572</td>
<td>127852</td>
<td>1961</td>
</tr>
<tr>
<td>70551</td>
<td>116.9</td>
<td>554894</td>
<td>4007</td>
<td>2827</td>
<td>130081</td>
<td>1962</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>item</th>
<th>GNPDEFL</th>
<th>GNP</th>
<th>UNEMP</th>
<th>ARMED</th>
<th>POP</th>
<th>YEAR</th>
</tr>
</thead>
<tbody>
<tr>
<td>未处理</td>
<td>15.062</td>
<td>-0.036</td>
<td>-2.02</td>
<td>-1.033</td>
<td>-0.051</td>
<td>1829.151</td>
</tr>
<tr>
<td>岭回归(常规方程)</td>
<td>-52.7266</td>
<td>0.071018</td>
<td>-0.42411</td>
<td>-0.57272</td>
<td>-0.41374</td>
<td>48.39169</td>
</tr>
<tr>
<td>岭回归(中心化处理)</td>
<td>7.285916</td>
<td>-0.02267</td>
<td>-1.82316</td>
<td>-0.97559</td>
<td>-0.09411</td>
<td>1606.225</td>
</tr>
<tr>
<td>岭回归(标准化处理, 绝对值)</td>
<td>0.006496</td>
<td>0.62168</td>
<td>0.48347</td>
<td>0.19364</td>
<td>0.20971</td>
<td>2.195674</td>
</tr>
<tr>
<td>gbr</td>
<td>0.411362</td>
<td>0.06815</td>
<td>0.009257</td>
<td>0.033116</td>
<td>0.166944</td>
<td>0.31117</td>
</tr>
</tbody>
</table>
<p><em>上述的数据主要是用于说明多重共线性导致的问题, 并不表明这些数据建立的模型适合阐明下列问题, 同时也未尝试使用偏最小二乘法(PLSR)来尝试处理上述问题, 考虑到这个数据集的数据偏少, n &lt; 20, 特征值存在6个.</em></p>
<p>通常情况下, 就业人数和下面变量之间的关系:</p>
<ul>
<li>GNP, 值越大, 理论上, 就业人数越多( GNPDEFL, 实际上是不大可能同时纳入模型, GNPDEFL(国民生产总值平减指数) =报告期价格计算的国民生产总值/不变价格计算的国民生产总值, 实际上是个和GNP重叠的指标 )</li>
<li>失业人数, 一方面失业人口越多, 表明就业越少, 但是就业人口越多, 某种程度也意味着失业人口越多.</li>
<li>军队服役人数, 理论上负相关, 军队分流了部分的就业人口.</li>
<li>人口, 通常而言, 正相关, 但是需要注意的是这是14岁以上人口, 以及需要注意的是美国的战后婴儿潮的影响, 人口的各个年龄的分布, 如婴儿潮在60年后大量满足14岁的统计要求.</li>
</ul>
<p>和分类/标签问题不同的是, 回归问题关心的内容更多, 例如经济生产上, 还需要考虑到模型的可解释性, 或者是这种问题, 更难以某种相对直观的方式完全以数学形式来表示, 以回归系数的解析来看, 对于系数的解析不单纯是数值的问题, 需要其他的更多考虑.</p>
<h3 id="41-标准化回归系数">4.1 <a href="https://www.sciencedirect.com/topics/mathematics/standardized-regression-coefficient">标准化回归系数</a></h3>
<blockquote>
<p><strong>标准化回归系数 VS 未标准化回归系数</strong></p>
<p><strong>1 未标准化回归系数</strong></p>
<p>通常我们在构建多因素回归模型时 方程中呈现的是未标准化回归系数 它是方程中不同自变量对应的原始的回归系数. 它反映了在其他因素不变的情况下 该自变量每变化一个单位对因变量的作用大小. 通过<strong>未标准化回归系数和常数项构建的方程</strong> 便可以对因变量进行预测 并得出结论.</p>
<p><strong>2 标准化回归系数</strong></p>
<p>而对于标准化回归系数 它是在对自变量和因变量同时进行标准化处理后所得到的回归系数 数据经过标准化处理后消除了量纲 数量级等差异的影响 使得不同变量之间具有可比性 因此可以用标准化回归系数来比较不同自变量对因变量的作用大小.</p>
<p><strong>通常我们主要关注的是标准化回归系数的绝对值大小 绝对值越大 可认为它对因变量的影响就越大</strong>.</p>
<p>https://zhuanlan.zhihu.com/p/164970155</p>
</blockquote>
<p>对于多元回归方程而言, 如何判断不同的变量对于y值的影响呢?</p>
<p>因为不同的自变量因为数值单位的差异, 如克, 千克, 吨等, 这样显然不能判断不同的因子对于自变量的影响, 但是很多时候希望知道这种变化之间的关系, 为此在操作上, 消除量纲的影响, 如对数据进行标准化处理, 得到的这种回归系数一般被称为<em>无量纲回归系数</em>.</p>
<table summary="Coefficients, 表, 2 个级别的列标题和 2 个级别的行标题, 包含 14 列 8 行的表" tabindex="0" role="grid" style="width: 1077px; margin-bottom: 0px;" class="WebReportBlue PivotTable ui-selectable" aria-label="Coefficients" data-lookname="WebReportBlue" data-rowlabelwidth="2" data-collabelheight="2" data-numrows="4" data-numcols="12" data-rowlabels="Corner" data-decimal-char="." data-col-labels="Unstandardized Coefficients B; Std. Error;Standardized Coefficients Beta;t ;Sig. ;95.0% Confidence Interval for B Lower Bound; Upper Bound;Correlations Zero-order; Partial; Part;Collinearity Statistics Tolerance; VIF" data-row-labels="1 (Constant); TV; Radio; Newspaper" data-layer-dimension="" data-column-dimension="Statistics;" data-row-dimension="Model;Variables;" data-maxcolwidth="72">
<caption class="title ui-selectee" style="width:1077px" title="a. Dependent Variable: Sales">Coefficients<sup class="ui-selectee">a</sup><span class="details ui-selectee"></span></caption>
<tbody class="PivotBody defaultLayer innerFrameBd ui-selectee" style="display: table;">
<tr class="ui-selectee" style="">
<td class="cornerLabels ui-selectee" data-rc="0_0" tabindex="-1" rowspan="2" colspan="2">Model</td>
<td class="columnLabels dataAreaLeft hCC vCC role2 ui-selectee" data-rc="0_2" tabindex="-1" colspan="2">Unstandardized Coefficients</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_4" tabindex="-1">Standardized Coefficients</td>
<td class="columnLabels hCC vCC role3 ui-selectee" data-rc="0_5" tabindex="-1" rowspan="2">t</td>
<td class="columnLabels hDC vCC role3 ui-selectee" data-rc="0_6" tabindex="-1" rowspan="2">Sig.</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_7" tabindex="-1" colspan="2">95.0% Confidence Interval for B</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_9" tabindex="-1" colspan="3">Correlations</td>
<td class="columnLabels hCC vCC role2 ui-selectee" data-rc="0_12" tabindex="-1" colspan="2">Collinearity Statistics</td>
</tr>
<tr class="ui-selectee" style="">
<td class="columnLabels dataAreaLeft vCC role3 ui-selectee" data-rc="1_2" tabindex="-1">B</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_3" tabindex="-1">Std. Error</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_4" tabindex="-1">Beta</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_7" tabindex="-1">Lower Bound</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_8" tabindex="-1">Upper Bound</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_9" tabindex="-1">Zero-order</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_10" tabindex="-1">Partial</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_11" tabindex="-1">Part</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_12" tabindex="-1">Tolerance</td>
<td class="columnLabels vCC role3 ui-selectee" data-rc="1_13" tabindex="-1">VIF</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels dataAreaTop role3 ui-selectee" data-rc="2_0" tabindex="-1" data-d="0" rowspan="4">1</td>
<td class="rowLabels dataAreaTop vCR role3 ui-selectee" data-rc="2_1" tabindex="-1">(Constant)</td>
<td class="o dataAreaTop dataAreaLeft vCC ui-selectee" data-rc="2_2" tabindex="-1" data-f="9388893694594183" data-d="3" data-i="2">2.939</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_3" tabindex="-1" data-f="3119082363217914" data-d="3">.312</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_4" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_5" tabindex="-1" data-f="422288440076354" data-d="3">9.422</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_6" tabindex="-1" data-f="0000000000000" data-d="3">.000</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_7" tabindex="-1" data-f="323762279233449" data-d="3">2.324</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_8" tabindex="-1" data-f="5540164596853874" data-d="3" data-i="3">3.554</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_9" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_10" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_11" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_12" tabindex="-1">&nbsp;</td>
<td class="o dataAreaTop vCC ui-selectee" data-rc="2_13" tabindex="-1">&nbsp;</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="3_1" tabindex="-1">TV</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="3_2" tabindex="-1" data-f="04576464545539752" data-d="3">.046</td>
<td class="e hCR vCC ui-selectee" data-rc="3_3" tabindex="-1" data-f="0013948968069749756" data-d="3">.001</td>
<td class="e hCR vCC ui-selectee" data-rc="3_4" tabindex="-1" data-f="7530659117735555" data-d="3" data-i="0">.753</td>
<td class="e hCR vCC ui-selectee" data-rc="3_5" tabindex="-1" data-f="808624427669606" data-d="3" data-i="32">32.809</td>
<td class="e hCR vCC ui-selectee" data-rc="3_6" tabindex="-1" data-d="3">.000</td>
<td class="e hCR vCC ui-selectee" data-rc="3_7" tabindex="-1" data-f="04301371196239804" data-d="3">.043</td>
<td class="e hCR vCC ui-selectee" data-rc="3_8" tabindex="-1" data-f="048515578948396997" data-d="3">.049</td>
<td class="e hCR vCC ui-selectee" data-rc="3_9" tabindex="-1" data-f="782224424861606" data-d="3" data-i="0">.782</td>
<td class="e hCR vCC ui-selectee" data-rc="3_10" tabindex="-1" data-f="9197614345208119" data-d="3" data-i="0">.920</td>
<td class="e hCR vCC ui-selectee" data-rc="3_11" tabindex="-1" data-f="7513357799470414" data-d="3" data-i="0">.751</td>
<td class="e hCR vCC ui-selectee" data-rc="3_12" tabindex="-1" data-f="9954103768257605" data-d="3" data-i="0">.995</td>
<td class="e hCR vCC ui-selectee" data-rc="3_13" tabindex="-1" data-f="00461078493965" data-d="3">1.005</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="4_1" tabindex="-1">Radio</td>
<td class="o dataAreaLeft hCR vCC ui-selectee" data-rc="4_2" tabindex="-1" data-f="18853001691820453" data-d="3">.189</td>
<td class="o hCR vCC ui-selectee" data-rc="4_3" tabindex="-1" data-f="008611233967301951" data-d="3">.009</td>
<td class="o hCR vCC ui-selectee" data-rc="4_4" tabindex="-1" data-f="5364815499490959" data-d="3" data-i="0">.536</td>
<td class="o hCR vCC ui-selectee" data-rc="4_5" tabindex="-1" data-f="893496058065445" data-d="3" data-i="21">21.893</td>
<td class="o hCR vCC ui-selectee" data-rc="4_6" tabindex="-1" data-d="3">.000</td>
<td class="o hCR vCC ui-selectee" data-rc="4_7" tabindex="-1" data-f="17154744744191588" data-d="3">.172</td>
<td class="o hCR vCC ui-selectee" data-rc="4_8" tabindex="-1" data-f="20551258639449319" data-d="3">.206</td>
<td class="o hCR vCC ui-selectee" data-rc="4_9" tabindex="-1" data-f="5762225745710556" data-d="3" data-i="0">.576</td>
<td class="o hCR vCC ui-selectee" data-rc="4_10" tabindex="-1" data-f="8424781559247361" data-d="3" data-i="0">.842</td>
<td class="o hCR vCC ui-selectee" data-rc="4_11" tabindex="-1" data-f="5013732585106883" data-d="3" data-i="0">.501</td>
<td class="o hCR vCC ui-selectee" data-rc="4_12" tabindex="-1" data-f="8733991227579433" data-d="3" data-i="0">.873</td>
<td class="o hCR vCC ui-selectee" data-rc="4_13" tabindex="-1" data-f="1449519171055353" data-d="3">1.145</td>
</tr>
<tr class="ui-selectee" style="">
<td class="rowLabels hCR vCR role3 ui-selectee" data-rc="5_1" tabindex="-1">Newspaper</td>
<td class="e dataAreaLeft hCR vCC ui-selectee" data-rc="5_2" tabindex="-1" data-f="0010374930424763204" data-d="3" data-i="-">-.001</td>
<td class="e hCR vCC ui-selectee" data-rc="5_3" tabindex="-1" data-f="005871009647086371" data-d="3">.006</td>
<td class="e hCR vCC ui-selectee" data-rc="5_4" tabindex="-1" data-f="0043306862855733985" data-d="3" data-i="-">-.004</td>
<td class="e hCR vCC ui-selectee" data-rc="5_5" tabindex="-1" data-f="1767145865602863" data-d="3" data-i="-">-.177</td>
<td class="e hCR vCC ui-selectee" data-rc="5_6" tabindex="-1" data-f="8599150500805679" data-d="3" data-i="0">.860</td>
<td class="e hCR vCC ui-selectee" data-rc="5_7" tabindex="-1" data-f="012615953180268208" data-d="3" data-i="-">-.013</td>
<td class="e hCR vCC ui-selectee" data-rc="5_8" tabindex="-1" data-f="010540967095315568" data-d="3">.011</td>
<td class="e hCR vCC ui-selectee" data-rc="5_9" tabindex="-1" data-f="22829902637616534" data-d="3">.228</td>
<td class="e hCR vCC ui-selectee" data-rc="5_10" tabindex="-1" data-f="012621465040067946" data-d="3" data-i="-">-.013</td>
<td class="e hCR vCC ui-selectee" data-rc="5_11" tabindex="-1" data-f="0040468624953783955" data-d="3" data-i="-">-.004</td>
<td class="e hCR vCC ui-selectee" data-rc="5_12" tabindex="-1" data-f="8732195434377652" data-d="3" data-i="0">.873</td>
<td class="e hCR vCC ui-selectee" data-rc="5_13" tabindex="-1" data-f="1451873787239286" data-d="3">1.145</td>
</tr>
</tbody><tfoot style="display: table-footer-group;" class="ui-selectee">
<tr class="ui-selectee" style="">
<td class="footnotes ui-selectee" data-rc="6_0" tabindex="-1" colspan="14">a. Dependent Variable: Sales</td>
</tr>
<tr class="ui-selectee" style="">
<td tabindex="-1" style="width:48px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:83px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:87px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:87px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:96px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:95px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:95px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:77px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:74px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
<td tabindex="-1" style="width:67px;padding:0px;border-spacing:0px" class="ui-selectee"></td>
</tr>
</tfoot>
</table>
数据来源: [kaggle](https://www.kaggle.com/datasets/sazid28/advertising.csv)
<p>可以看到未标准化的系数和标准化系数之间的差异, 单纯从上述数据来看, 标准化的数据是否更容易符合直观的感觉, 用于区分不同的传媒渠道对于销量的影响, TV的效果, 理论上是应该比<code>Radio, newspaper</code>这两者好的.</p>
<pre><code class="language-python">from sklearn.preprocessing import StandardScaler
import pandas as pd
from sklearn import linear_model

standard = StandardScaler()
df = pd.read_csv(r&quot;D:\trainning_data\Advertising.csv&quot;)

x_data = df[['TV',	'Radio',	'Newspaper']].values
y_data = df['Sales'].values

line = linear_model.LinearRegression()
line.fit(
    x_data,
    y_data
)
print(line.coef_)
print(line.intercept_)

[ 0.04576465  0.18853002 -0.00103749]
2.9388893694594085

line = linear_model.LinearRegression()
line.fit(
    standard.fit_transform(x_data),
    standard.fit_transform(y_data.reshape(-1, 1))
)
[[ 0.75306591  0.53648155 -0.00433069]]
[-1.67495358e-17]
</code></pre>
<p>但是需要注意, 标准化系数的使用在数学上并不是很严谨.</p>
<figure data-type="image" tabindex="28"><a href="https://imgse.com/i/p9DBUnP"><img src="https://s1.ax1x.com/2023/05/10/p9DBUnP.png" alt="p9DBUnP.png" loading="lazy"></a></figure>
<h3 id="42-模型可解释的重要性">4.2 模型可解释的重要性</h3>
<figure data-type="image" tabindex="29"><a href="https://imgse.com/i/p94mVED"><img src="https://s1.ax1x.com/2023/05/19/p94mVED.png" alt="p94mVED.png" loading="lazy"></a></figure>
<p>(<em>图: 来源, Kaggle Machine Learning &amp; Data Science Survey 2020</em>)</p>
<blockquote>
<p>对可解释性是没有数学上定义的. 我⽐较喜欢Miller (2017)[3] 的(⾮数学的) 定义: 可解释性是⼈们能够理解决策原因的程度. 另⼀种定义是[4]: 可解释性是指⼈们能够⼀致地预测模型结果的程度. 机器学习模型的可解释性越⾼, ⼈们就越容易理解为什么做出某些决策或预测. 如果⼀个模型的决策⽐另⼀个模型的决策能让⼈更容易理解, 那么它就⽐另⼀个模型有更⾼的解释性. 我们将在后⽂中同时使⽤ Interpretable 和 Explainable 这两个术语来描述可解释性. 像Miller (2017) ⼀样 区分术语 Interpretable 和 Explainable 是有意义的. 我们将使⽤ Explainable 来描述对单个实例预测的解释.</p>
<ul>
<li>&lt; 可解释的机器模型 &gt;, Interpretable Machine Learning</li>
</ul>
</blockquote>
<p>尽管从各种角度, 情况来看, 传统的线性(逻辑)回归在其他新锐算法面前已经日益衰微, 但是考虑到模型的可解释性, 这种想法并不一定可靠.</p>
<p>有很多时候, 从模型预期得到的往往不单纯是一个数值结果, 还希望通过模型获得更多对于实际业务层的指导意义, 也许这种预期并不是以数值的方式呈现的.</p>
<h3 id="43-为什么不直接采用矩阵公式求解">4.3 为什么不直接采用矩阵公式求解</h3>
<ul>
<li><a href="https://stats.stackexchange.com/questions/343069/why-not-use-the-normal-equations-to-find-simple-least-squares-coefficients">Why not use the &quot;normal equations&quot; to find simple least squares coefficients?</a></li>
</ul>
<pre><code class="language-python">import numpy as np
from sklearn.linear_model import LinearRegression
from scipy.stats import linregress
import timeit

b0 = 0
b1 = 1
n = 100000000
x = np.linspace(-5, 5, n)
np.random.seed(42)
e = np.random.randn(n)
y = b0 + b1*x + e

# scipy
start = timeit.default_timer()
print(str.format('{0:.30f}', linregress(x, y)[0]))
stop = timeit.default_timer()
print(stop - start)

# numpy
start = timeit.default_timer()
print(str.format('{0:.30f}', np.polyfit(x, y, 1)[0]))
stop = timeit.default_timer()
print(stop - start)

# sklearn
clf = LinearRegression()
start = timeit.default_timer()
clf.fit(x.reshape(-1, 1), y.reshape(-1, 1))
stop = timeit.default_timer()
print(str.format('{0:.30f}', clf.coef_[0, 0]))
print(stop - start)

# normal equation
start = timeit.default_timer()
slope = np.sum((x-x.mean())*(y-y.mean()))/np.sum((x-x.mean())**2)
stop = timeit.default_timer()
print(str.format('{0:.30f}', slope))
print(stop - start)
</code></pre>
<pre><code class="language-bash"># 四种方式拟合一元线性回归
# 系数
# 运行时间

1.000043549123382113918978575384
5.756738899999618

1.000043549123411201762223754486
21.265933399998175

1.000043549123505348674711967760
10.673586299999442

1.000043549123402319978026753233
2.226430500002607
</code></pre>
<p>前面已经提过一部分:</p>
<ul>
<li>
<p>矩阵之间的运算导致的精度丢失问题.</p>
</li>
<li>
<p>逆矩阵计算消耗的时间, 这种时间的消耗随着特征数量的增加而指数增长(<em>降维的重要性</em>).</p>
<blockquote>
<p>@Simon Well, when you solve the normal equations you never actually form the inverse matrix, which is too slow.</p>
</blockquote>
</li>
</ul>
<p>对于小型数据集, 显然<code>normal equations</code>的计算速度是更快的, 而且其拟合的结果, 理论上是最优解(对于诸如一元, 多元线性模型).</p>
<blockquote>
<p>You don't need to drag large statistical libraries just to solve this one little problem, of course.</p>
</blockquote>
<ul>
<li><a href="https://stackoverflow.com/questions/55113978/what-is-the-difference-between-freidman-mse-and-mse">scikit learn - What is the difference between Freidman mse and mse? - Stack Overflow</a></li>
<li><a href="https://datascience.stackexchange.com/questions/66062/what-is-the-difference-between-freidman-mse-and-mse">machine learning - What is the difference between Freidman mse and mse? - Data Science Stack Exchange</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/64759172">机器学习的特征重要性究竟是怎么算的</a></li>
<li><a href="https://www.biaodianfu.com/feature-importance.html">基于决策树的特征重要性评估</a></li>
</ul>
<h2 id="五-参考">五. 参考</h2>
<ul>
<li>&lt; 问卷统计分析实务 SPSS操作与应用 &gt;, 吴明隆</li>
<li>&lt; SPSS统计分析高级教程( 第2版) &gt;, 张文彤,董伟</li>
<li>&lt; 应用回归分析 &gt;, 第五版, 何晓群</li>
<li>&lt; 线性回归分析导论 &gt;, 第五版, 道格拉斯</li>
<li>&lt; Python机器学习基础教程 &gt;, Andreas</li>
<li><a href="https://statisticsbyjim.com/regression/multicollinearity-in-regression-analysis/">Multicollinearity in Regression Analysis: Problems, Detection, and Solutions - Statistics By Jim</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/88025370">共线性问题</a></li>
<li><a href="https://online.stat.psu.edu/stat501/lesson/12/12.1">What is Multicollinearity?</a></li>
<li><a href="https://math.stackexchange.com/questions/268757/least-square-problem-normal-equations">least square problem normal equations</a></li>
<li><a href="https://math.stackexchange.com/questions/317114/what-is-the-purpose-of-subtracting-the-mean-from-data-when-standardizing">What is the purpose of subtracting the mean from data when standardizing?</a></li>
</ul>

            </div>
            
            
              <div class="post-footer">
  <ul class="post-copyright">
    <li class="post-copyright-author">
      <strong class="language" data-lan="author">本文作者：</strong>
      Lian
    </li>
    <li class="post-copyright-link">
      <strong class="language" data-lan="link">本文链接：</strong>
      <a href="https://Kyouichirou.github.io/post/longley-shu-ju-ji-duo-chong-gong-xian-xing-wen-ti-yu-ling-hui-gui/" title="Longley数据集-多重共线性问题与岭回归">https://Kyouichirou.github.io/post/longley-shu-ju-ji-duo-chong-gong-xian-xing-wen-ti-yu-ling-hui-gui/</a>
    </li>
    <li class="post-copyright-license">
      <strong class="language" data-lan="copyright">版权声明： </strong>
      本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！
    </li>
  </ul>
  <div class="tags">
    
      <a href="https://Kyouichirou.github.io/tag/Q2P6FXAzPd/"># spss</a>
    
      <a href="https://Kyouichirou.github.io/tag/89XKfdJfIJ/"># scipy</a>
    
      <a href="https://Kyouichirou.github.io/tag/bxmmKSW1O/"># math</a>
    
      <a href="https://Kyouichirou.github.io/tag/XPEQV0L0x/"># sklearn</a>
    
      <a href="https://Kyouichirou.github.io/tag/7svOER7Ka/"># priority</a>
    
  </div>
  <div class="nav">
    <div class="nav-prev">
      
        <i class="fa fa-chevron-left"></i>
        <a class="nav-pc-next" title="PCA&amp;SVD-摘要" href="https://Kyouichirou.github.io/post/pcaandsvd-zhai-yao/">PCA&amp;SVD-摘要</a class="nav-pc-next">
        <a class="nav-mobile-prev" title="PCA&amp;SVD-摘要" href="https://Kyouichirou.github.io/post/pcaandsvd-zhai-yao/">上一篇</a>
      
    </div>
    <div class="nav-next">
      
        <a class="nav-pc-next" title="Pandas周边-ydata-profiling(数据概览)" href="https://Kyouichirou.github.io/post/pandas-zhou-bian-ydata-profilingshu-ju-gai-lan/">Pandas周边-ydata-profiling(数据概览)</a>
        <a class="nav-mobile-next" title="Pandas周边-ydata-profiling(数据概览)" href="https://Kyouichirou.github.io/post/pandas-zhou-bian-ydata-profilingshu-ju-gai-lan/">下一篇</a>
        <i class="fa fa-chevron-right"></i>
      
    </div>
  </div>
</div>
            
            
  

          </div>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <center id="runTimeBox">
      已运行:<span id="run_time"></span>
    </center>
    <span id="busuanzi_container_site_pv">浏览数:<span id="busuanzi_value_site_pv"></span> 次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">访客数:<span id="busuanzi_value_site_uv"></span> 人</span>

    <script>
      BirthDay = new Date('');
      if (BirthDay.getTime()) {
        function runTime() {
          str = "";
          today = new Date();
          timeold = today.getTime() - BirthDay.getTime();
          msPerDay = 24 * 60 * 60 * 1000;
          e_daysold = timeold / msPerDay;
          daysold = Math.floor(e_daysold);
          str += daysold + "天";
          return str;
        }
        setInterval(function () {
          $("#run_time").html(runTime());
        }, 1000);
      } else {
        document.querySelector('.footer').removeChild(document.querySelector('#runTimeBox'));
      }
    </script>
    <div class="poweredby">
      Powered by <a href="https://github.com/Kyouichirou" target="_blank">Kyouichirou</a>
    </div>
  </footer>
  
    
      <div class="drawer-box left" id="drawer_box">
        <span class="muse-line muse-line-first"></span>
        <span class="muse-line muse-line-middle"></span>
        <span class="muse-line muse-line-last"></span>
      </div>
      
        <div class="mist back-to-top" id="back_to_top">
          <i class="fa fa-arrow-up"></i>
          
        </div>
        
          
            
              <div class="bg-img">
                <img src="https://s1.ax1x.com/2023/03/24/ppBNvm6.jpg" />
              </div>
              
                
                  
                        
</div>
<script>
  let sideBarOpen = "sidebar-open";
  let body = document.body;
  let back2Top = document.querySelector("#back_to_top"),
    back2TopText = document.querySelector("#back_to_top_text"),
    drawerBox = document.querySelector("#drawer_box"),
    rightSideBar = document.querySelector(".sidebar"),
    viewport = document.querySelector("body");

  function scrollAnimation(currentY, targetY) {
    let needScrollTop = targetY - currentY;
    let _currentY = currentY;
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10);
      _currentY += dist;
      window.scrollTo(_currentY, currentY);
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY);
      } else {
        window.scrollTo(_currentY, targetY);
      }
    }, 1);
  }

  back2Top.addEventListener("click", function (e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });

  window.addEventListener("scroll", function (e) {
    let percent =
      (document.scrollingElement.scrollTop /
        (document.scrollingElement.scrollHeight -
          document.scrollingElement.clientHeight)) *
      100;
    if (percent > 1 && !back2Top.classList.contains("back-top-active")) {
      back2Top.classList.add("back-top-active");
    }
    if (percent == 0) {
      back2Top.classList.remove("back-top-active");
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });

  let hasCacu = false;
  window.addEventListener("resize", function (e) {
    calcuHeight();
  });

  function calcuHeight() {
    // 动态调整站点概览高度
    if (
      (!hasCacu && back2Top.classList.contains("pisces")) ||
      back2Top.classList.contains("gemini")
    ) {
      let sideBar = document.querySelector(".sidebar");
      let navUl = document.querySelector("#site_nav");
      sideBar.style =
        "margin-top:" + (navUl.offsetHeight + navUl.offsetTop + 15) + "px;";
      hasCacu = true;
    }
  }
  calcuHeight();

  let open = false,
    MOTION_TIME = 300,
    RIGHT_MOVE_DIS = "320px";

  if (drawerBox) {
    let rightMotions = document.querySelectorAll(".right-motion");
    let right = drawerBox.classList.contains("right");

    let transitionDir = right
      ? "transition.slideRightIn"
      : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS,
      };
      closeProp = {
        paddingRight: "0px",
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS,
      };
      closeProp = {
        paddingLeft: "0px",
      };
    }

    drawerBox.onclick = function () {
      open = !open;
      jQuery.Velocity(rightSideBar, "stop");
      jQuery.Velocity(viewport, "stop");
      jQuery.Velocity(rightMotions, "stop");
      if (open) {
        jQuery.Velocity(
          rightSideBar,
          {
            width: RIGHT_MOVE_DIS,
          },
          {
            duration: MOTION_TIME,
            begin: function () {
              jQuery.Velocity(rightMotions, transitionDir, {});
            },
          }
        );
        jQuery.Velocity(viewport, openProp, {
          duration: MOTION_TIME,
        });
      } else {
        jQuery.Velocity(
          rightSideBar,
          {
            width: "0px",
          },
          {
            duration: MOTION_TIME,
            begin: function () {
              jQuery.Velocity(rightMotions, {
                opacity: 0,
              });
            },
          }
        );
        jQuery.Velocity(viewport, closeProp, {
          duration: MOTION_TIME,
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle("muse-line");
      }
      drawerBox.classList.toggle(sideBarOpen);
    };
  }

  // 链接跳转
  let newWindow = "false";
  if (newWindow === "true") {
    let links = document.querySelectorAll(".post-body a");
    links.forEach((item) => {
      if (!item.classList.contains("btn")) {
        item.setAttribute("target", "_blank");
      }
    });
  }

  let faSearch = document.querySelector("#fa_search");
  faSearch &&
    faSearch.addEventListener("click", function () {
      document.querySelector("#search_mask").style = "";
    });

  // 代码高亮
  hljs.initHighlightingOnLoad();

  // 离开当前页title变化
  var leaveTitle = "";
  var normal_title = document.title;
  if (leaveTitle) {
    document.addEventListener("visibilitychange", function () {
      if (document.visibilityState == "hidden") {
        normal_title = document.title;
        document.title = leaveTitle;
      } else {
        document.title = normal_title;
      }
    });
  }
</script>

<link rel="stylesheet" href="/media/css/jquery.fancybox.css" />
<script src="/media/js/jquery.fancybox.js"></script>

<script>
  let images = document.querySelectorAll(".section img");
  images.forEach((image) => {
    var parent = image.parentElement;
    var next = image.nextElementSibling;
    parent.removeChild(image);
    var aelem = document.createElement("a");
    aelem.href = image.src;
    aelem.dataset["fancybox"] = "images";
    aelem.dataset["rel"] = "fancybox-button";
    aelem.classList.add("fancybox");
    aelem.appendChild(image);
    parent.insertBefore(aelem, next);
  });
</script>
    <div class="reward-mask" style="display: none;">
  <div class="reward-relative">
    <span class="close" aria-hidden="true">x</span>
    <div class="reward-body">
      <h2>感谢您的支持，我会继续努力的!</h2>
      <div class="reward-img-box">
        <div style="position: relative; width: 140px; height: 140px;">
          
          
          
        </div>
      </div>
      <p class="reward-word">扫码打赏，你说多少就多少</p>
      <p class="reward-tip"> </p>
    </div>
    <div class="bottom">
      
      
    </div>
  </div>
</div>
<style>
  .reward-mask {
    position: fixed;
    z-index: 99999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #00000054;
  }

  .reward-relative {
    position: relative;
    width: 480px;
    text-align: center;
    margin: 0 auto;
    border-radius: 5px;
    background-color: #fff;
    top: 50%;
    margin-top: -205px;
  }

  .reward-relative .close {
    position: absolute;
    right: 10px;
    font-weight: normal;
    font-size: 16px;
    color: #929292;
  }

  .reward-body {
    padding: 40px 20px 20px;
  }

  .bottom {
    display: flex;
  }

  .reward-btn {
    text-align: center;
  }

  .reward-btn-text {
    display: inline-block;
    cursor: pointer;
    width: 60px;
    height: 60px;
    line-height: 60px;
    border-radius: 50%;
    background-color: #ff9734;
    color: #FFF;
    margin-top: 20px;
  }

  .pay-text {
    margin-top: 10px;
    padding: 10px;
    flex: 1;
    transition: all .2s linear;
  }

  .pay-text:hover {
    background-color: #a5a5a536;
  }

  .reward-body h2 {
    padding-top: 10px;
    text-align: center;
    color: #a3a3a3;
    font-size: 16px;
    font-weight: normal;
    margin: 0 0 20px;
  }

  .reward-body h2:after,
  .reward-body h2:before {
    font-family: Arial, Helvetica, sans-serif;
    background: 0 0;
    width: 0;
    height: 0;
    font-style: normal;
    color: #eee;
    font-size: 80px;
    position: absolute;
    top: 20px;
  }

  .reward-body h2:before {
    content: '\201c';
    left: 50px;
  }

  .reward-body h2:after {
    content: '\201d';
    right: 80px;
  }

  .reward-img-box {
    display: inline-block;
    padding: 10px;
    border: 6px solid #ea5f00;
    margin: 0 auto;
    border-radius: 3px;
    position: relative;
  }

  .reward-img {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
  }

  @media (max-width: 767px) {
    .reward-relative {
      height: 100%;
      top: 0px;
      margin-top: 0;
      width: auto;
    }

    .reward-relative .bottom {
      flex-direction: column;
    }

    .reward-relative .pay-text {
      width: 80%;
      margin: 5px auto;
      border: 1px solid silver;
      padding: 6px;
      border-radius: 4px;
    }

    .reward-body h2:after {
      right: 40px;
    }

    .reward-body h2:after,
    .reward-body h2:before {
      font-size: 60px;
    }

    .reward-body h2:before {
      left: 20px;
    }
  }
</style>
<script>
  !function () {
    var mask = document.querySelector('.reward-mask');
    let close = document.querySelector('.reward-relative .close');
    let rewardBtn = document.querySelector('.reward-btn');

    let zfb = document.querySelector('#zfb'),
      wx = document.querySelector('#wx'),
      zfbBtn = document.querySelector('#zfbBtn'),
      wxBtn = document.querySelector('#wxBtn');

    if (zfbBtn && wxBtn) {
      zfbBtn.addEventListener('click', () => {
        jQuery.Velocity(zfb, 'transition.slideLeftIn', {
          duration: 400
        });
        jQuery.Velocity(wx, 'transition.slideRightOut', {
          display: 'none',
          duration: 400
        });
      });

      wxBtn.addEventListener('click', () => {
        jQuery.Velocity(wx, 'transition.slideRightIn', {
          duration: 400
        });
        jQuery.Velocity(zfb, 'transition.slideLeftOut', {
          display: 'none',
          duration: 400
        });
      });
    }

    rewardBtn && rewardBtn.addEventListener('click', (e) => {
      jQuery.Velocity(mask, 'transition.slideDownIn', {
        duration: 400
      })
    });

    close.addEventListener('click', (e) => {
      e.preventDefault();
      jQuery.Velocity(mask, 'transition.slideUpOut', {
        duration: 400
      })
    })
  }()
</script>

  </div>
</body>

<input hidden id="copy" />
<script>
  !function () {
    let times = document.querySelectorAll('.publish-time');
    for (let i = 0; i < times.length; i++) {
      let date = times[i].dataset.t;
      let time = Math.floor((new Date().getTime() - new Date(date).getTime()) / 1000);
      if (time < 60) {
        str = time + '秒之前';
      } else if (time < 3600) {
        str = Math.floor(time / 60) + '分钟之前';
      } else if (time >= 3600 && time < 86400) {
        str = Math.floor(time / 3600) + '小时之前';
      } else if (time >= 86400 && time < 259200) {
        str = Math.floor(time / 86400) + '天之前';
      } else {
        str = times[i].textContent;
      }
      times[i].textContent = str;
    }
  }();
</script>

<script>
  let language = 'en';
  if (language !== '') {
    let map = new Map();
    if (language === 'en') {
      map.set('search', 'Search');
      map.set('category', 'Categories');
      map.set('article', 'Articles');
      map.set('tag', 'Tags');
      map.set('top', 'Top');
      map.set('publish', 'published');
      map.set('minute', ' minutes');
      map.set('read-more', 'Read More');
      map.set('view', 'View');
      map.set('words', ' words');
      map.set('category-in', 'category in');
      map.set('preview', 'Meta');
      map.set('index', 'Toc');
      map.set('no-archives', "You haven't created yet");
      map.set('archives', " articles in total");
      map.set('cloud-tags', " tags in total");
      map.set('copyright', "Copyright: ");
      map.set('author', "Author: ");
      map.set('link', "Link: ");
      map.set('leave-message', "Leave a message");
      map.set('format', "Links Format");
      map.set('site-name', "Name: ");
      map.set('site-link', "Link: ");
      map.set('site-desc', "Desc: ");
      map.set('stat', " related results, taking ");
      map.set('stat-time', " ms");
      map.set('site-img', "Image: ");
    }

    if (map.size > 0) {
      let lanElems = document.querySelectorAll('.language');
      lanElems.forEach(elem => {
        let lan = elem.dataset.lan, text = map.get(lan);
        if (elem.__proto__ === HTMLInputElement.prototype) {
          elem.placeholder = text
        } else {
          if (elem.dataset.count) {
            text = elem.dataset.count + text;
          }
          elem.textContent = text;
        }
      })
    }
  }

  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // 判断是不是ios端
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //创建文本元素
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //选择内容
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //复制到剪贴板
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("复制错误！请手动复制！")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === '复制成功') {
        return;
      }
      e.srcElement.textContent = '复制成功';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === '复制成功') {
            elem.textContent = '复制代码'
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = '复制代码';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })

</script>
<script src="/media/js/motion.js"></script>


  <script
    src="https://cdn.staticfile.org/smooth-scroll/16.1.3/smooth-scroll.polyfills.min.js"></script>
  <script>
    var scroll = new SmoothScroll('a[href*="#"]', {
      speed: 200
    });
  </script>






  <div class="snow-container"></div>
  <script src="/media/js/bg/snow.js"></script>

</html>